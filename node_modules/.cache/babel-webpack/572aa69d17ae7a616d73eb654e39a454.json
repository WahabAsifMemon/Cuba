{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, PLATFORM_ID, Inject, EventEmitter, Directive, Input, Output, Component, ViewEncapsulation, ViewChild, HostListener, NgModule } from '@angular/core';\nimport * as i10 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { ReplaySubject, of, Observable, Subject } from 'rxjs';\nimport * as i3 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport { finalize } from 'rxjs/operators';\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"background-color\": a0,\n    \"color\": a1,\n    \"border-color\": a2\n  };\n};\nconst _c1 = [\"*\"];\nconst _c2 = [\"stepHolder\"];\nconst _c3 = [\"stepContainer\"];\nfunction JoyrideStepComponent_joyride_arrow_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"joyride-arrow\", 17);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"top\", ctx_r1.arrowTopPosition, \"px\")(\"left\", ctx_r1.arrowLeftPosition, \"px\");\n    i0.ɵɵproperty(\"position\", ctx_r1.arrowPosition);\n  }\n}\nfunction JoyrideStepComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n    i0.ɵɵpipe(1, \"async\");\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(1, 1, ctx_r5.text), \" \");\n  }\n}\nfunction JoyrideStepComponent_div_15_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_div_15_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r13.counter);\n  }\n}\nfunction JoyrideStepComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, JoyrideStepComponent_div_15_ng_container_1_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_div_15_ng_template_2_Template, 2, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r12 = i0.ɵɵreference(3);\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r6.customCounter ? ctx_r6.customCounter : _r12)(\"ngTemplateOutletContext\", ctx_r6.counterData);\n  }\n}\nfunction JoyrideStepComponent_div_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_div_17_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"joyride-button\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"color\", ctx_r16.themeColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ctx_r16.prevText));\n  }\n}\nfunction JoyrideStepComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵlistener(\"click\", function JoyrideStepComponent_div_17_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.prev();\n    });\n    i0.ɵɵtemplate(1, JoyrideStepComponent_div_17_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_div_17_ng_template_2_Template, 3, 4, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r15 = i0.ɵɵreference(3);\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r7.customPrevButton ? ctx_r7.customPrevButton : _r15);\n  }\n}\nfunction JoyrideStepComponent_div_18_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_div_18_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"joyride-button\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"color\", ctx_r21.themeColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ctx_r21.nextText));\n  }\n}\nfunction JoyrideStepComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵlistener(\"click\", function JoyrideStepComponent_div_18_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.next();\n    });\n    i0.ɵɵtemplate(1, JoyrideStepComponent_div_18_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_div_18_ng_template_2_Template, 3, 4, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r20 = i0.ɵɵreference(3);\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r8.customNextButton ? ctx_r8.customNextButton : _r20);\n  }\n}\nfunction JoyrideStepComponent_ng_template_19_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction JoyrideStepComponent_ng_template_19_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"joyride-button\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"color\", ctx_r26.themeColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, ctx_r26.doneText));\n  }\n}\nfunction JoyrideStepComponent_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵlistener(\"click\", function JoyrideStepComponent_ng_template_19_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.close();\n    });\n    i0.ɵɵtemplate(1, JoyrideStepComponent_ng_template_19_ng_container_1_Template, 1, 0, \"ng-container\", 22);\n    i0.ɵɵtemplate(2, JoyrideStepComponent_ng_template_19_ng_template_2_Template, 3, 4, \"ng-template\", null, 29, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r25 = i0.ɵɵreference(3);\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r10.customDoneButton ? ctx_r10.customDoneButton : _r25);\n  }\n}\nclass JoyrideStep {\n  constructor() {\n    this.title = new ReplaySubject();\n    this.text = new ReplaySubject();\n  }\n}\nclass JoyrideError extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, JoyrideError.prototype);\n  }\n}\nclass JoyrideStepDoesNotExist extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\n  }\n}\nclass JoyrideStepOutOfRange extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\n  }\n}\nconst DEFAULT_THEME_COLOR = '#3b5560';\nconst STEP_DEFAULT_POSITION = 'bottom';\nconst DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\nclass ObservableCustomTexts {}\nconst DEFAULT_TEXTS = {\n  prev: of('prev'),\n  next: of('next'),\n  done: of('done'),\n  close: of(null)\n};\nclass JoyrideOptionsService {\n  constructor() {\n    this.themeColor = DEFAULT_THEME_COLOR;\n    this.stepDefaultPosition = STEP_DEFAULT_POSITION;\n    this.logsEnabled = false;\n    this.showCounter = true;\n    this.showPrevButton = true;\n    this.stepsOrder = [];\n  }\n  setOptions(options) {\n    this.stepsOrder = options.steps;\n    this.stepDefaultPosition = options.stepDefaultPosition ? options.stepDefaultPosition : this.stepDefaultPosition;\n    this.logsEnabled = typeof options.logsEnabled !== 'undefined' ? options.logsEnabled : this.logsEnabled;\n    this.showCounter = typeof options.showCounter !== 'undefined' ? options.showCounter : this.showCounter;\n    this.showPrevButton = typeof options.showPrevButton !== 'undefined' ? options.showPrevButton : this.showPrevButton;\n    this.themeColor = options.themeColor ? options.themeColor : this.themeColor;\n    this.firstStep = options.startWith;\n    this.waitingTime = typeof options.waitingTime !== 'undefined' ? options.waitingTime : DEFAULT_TIMEOUT_BETWEEN_STEPS;\n    typeof options.customTexts !== 'undefined' ? this.setCustomText(options.customTexts) : this.setCustomText(DEFAULT_TEXTS);\n  }\n  getBackdropColor() {\n    return this.hexToRgb(this.themeColor);\n  }\n  getThemeColor() {\n    return this.themeColor;\n  }\n  getStepDefaultPosition() {\n    return this.stepDefaultPosition;\n  }\n  getStepsOrder() {\n    return this.stepsOrder;\n  }\n  getFirstStep() {\n    return this.firstStep;\n  }\n  getWaitingTime() {\n    return this.waitingTime;\n  }\n  areLogsEnabled() {\n    return this.logsEnabled;\n  }\n  isCounterVisible() {\n    return this.showCounter;\n  }\n  isPrevButtonVisible() {\n    return this.showPrevButton;\n  }\n  getCustomTexts() {\n    return this.customTexts;\n  }\n  setCustomText(texts) {\n    let prev;\n    let next;\n    let done;\n    let close;\n    prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\n    next = texts.next ? texts.next : DEFAULT_TEXTS.next;\n    done = texts.done ? texts.done : DEFAULT_TEXTS.done;\n    close = texts.close ? texts.close : DEFAULT_TEXTS.close;\n    this.customTexts = {\n      prev: this.toObservable(prev),\n      next: this.toObservable(next),\n      done: this.toObservable(done),\n      close: this.toObservable(close)\n    };\n  }\n  toObservable(value) {\n    return value instanceof Observable ? value : of(value);\n  }\n  hexToRgb(hex) {\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, (m, r, g, b) => {\n      return r + r + g + g + b + b;\n    });\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : null;\n  }\n}\nJoyrideOptionsService.ɵfac = function JoyrideOptionsService_Factory(t) {\n  return new (t || JoyrideOptionsService)();\n};\nJoyrideOptionsService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideOptionsService,\n  factory: JoyrideOptionsService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideOptionsService, [{\n    type: Injectable\n  }], null, null);\n})();\nconst JOYRIDE = 'ngx-joyride:::';\nclass LoggerService {\n  constructor(optionService) {\n    this.optionService = optionService;\n  }\n  debug(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.debug(JOYRIDE + message, data);\n    }\n  }\n  info(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.info(JOYRIDE + message, data);\n    }\n  }\n  warn(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.warn(JOYRIDE + message, data);\n    }\n  }\n  error(message, data = \"\") {\n    if (this.optionService.areLogsEnabled()) {\n      console.error(JOYRIDE + message, data);\n    }\n  }\n}\nLoggerService.ɵfac = function LoggerService_Factory(t) {\n  return new (t || LoggerService)(i0.ɵɵinject(JoyrideOptionsService));\n};\nLoggerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: LoggerService,\n  factory: LoggerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LoggerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: JoyrideOptionsService\n    }];\n  }, null);\n})();\nconst ROUTE_SEPARATOR = '@';\nclass Step {}\nvar StepActionType;\n(function (StepActionType) {\n  StepActionType[\"NEXT\"] = \"NEXT\";\n  StepActionType[\"PREV\"] = \"PREV\";\n})(StepActionType || (StepActionType = {}));\nclass JoyrideStepsContainerService {\n  constructor(stepOptions, logger) {\n    this.stepOptions = stepOptions;\n    this.logger = logger;\n    this.tempSteps = [];\n    this.currentStepIndex = -2;\n    this.stepHasBeenModified = new Subject();\n  }\n  getFirstStepIndex() {\n    const firstStep = this.stepOptions.getFirstStep();\n    const stepIds = this.stepOptions.getStepsOrder();\n    let index = stepIds.indexOf(firstStep);\n    if (index < 0) {\n      index = 0;\n      if (firstStep !== undefined) this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\n    }\n    return index;\n  }\n  init() {\n    this.logger.info('Initializing the steps array.');\n    this.steps = [];\n    this.currentStepIndex = this.getFirstStepIndex() - 1;\n    let stepIds = this.stepOptions.getStepsOrder();\n    stepIds.forEach(stepId => this.steps.push({\n      id: stepId,\n      step: null\n    }));\n  }\n  addStep(stepToAdd) {\n    let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\n    if (!stepExist) {\n      this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\n      this.tempSteps.push(stepToAdd);\n    } else {\n      let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\n      this.tempSteps[stepIndexToReplace] = stepToAdd;\n    }\n  }\n  get(action) {\n    if (action === StepActionType.NEXT) this.currentStepIndex++;else this.currentStepIndex--;\n    if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length) throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\n    const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\n    const index = this.tempSteps.findIndex(step => step.name === stepName);\n    let stepFound = this.tempSteps[index];\n    this.steps[this.currentStepIndex].step = stepFound;\n    if (stepFound == null) {\n      this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\n    }\n    return stepFound;\n  }\n  getStepRoute(action) {\n    let stepID;\n    if (action === StepActionType.NEXT) {\n      stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\n    } else {\n      stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\n    }\n    let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\n    return stepRoute;\n  }\n  updatePosition(stepName, position) {\n    let index = this.getStepIndex(stepName);\n    if (this.steps[index].step) {\n      this.steps[index].step.position = position;\n      this.stepHasBeenModified.next(this.steps[index].step);\n    } else {\n      this.logger.warn(`Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`);\n    }\n  }\n  getStepNumber(stepName) {\n    return this.getStepIndex(stepName) + 1;\n  }\n  getStepsCount() {\n    let stepsOrder = this.stepOptions.getStepsOrder();\n    return stepsOrder.length;\n  }\n  getStepIndex(stepName) {\n    const index = this.steps.map(step => step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id).findIndex(name => stepName === name);\n    if (index === -1) throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\n    return index;\n  }\n  getStepName(stepID) {\n    let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\n    return stepName;\n  }\n}\nJoyrideStepsContainerService.ɵfac = function JoyrideStepsContainerService_Factory(t) {\n  return new (t || JoyrideStepsContainerService)(i0.ɵɵinject(JoyrideOptionsService), i0.ɵɵinject(LoggerService));\n};\nJoyrideStepsContainerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideStepsContainerService,\n  factory: JoyrideStepsContainerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideStepsContainerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: JoyrideOptionsService\n    }, {\n      type: LoggerService\n    }];\n  }, null);\n})();\nclass DomRefService {\n  constructor(platformId) {\n    this.platformId = platformId;\n    this.fakeDocument = {\n      body: {},\n      documentElement: {}\n    };\n    this.fakeWindow = {\n      document: this.fakeDocument,\n      navigator: {}\n    };\n  }\n  getNativeWindow() {\n    if (isPlatformBrowser(this.platformId)) return window;else return this.fakeWindow;\n  }\n  getNativeDocument() {\n    if (isPlatformBrowser(this.platformId)) return document;else return this.fakeDocument;\n  }\n}\nDomRefService.ɵfac = function DomRefService_Factory(t) {\n  return new (t || DomRefService)(i0.ɵɵinject(PLATFORM_ID));\n};\nDomRefService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DomRefService,\n  factory: DomRefService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DomRefService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\nclass TemplatesService {\n  setPrevButton(template) {\n    this._prevButton = template;\n  }\n  getPrevButton() {\n    return this._prevButton;\n  }\n  setNextButton(template) {\n    this._nextButton = template;\n  }\n  getNextButton() {\n    return this._nextButton;\n  }\n  setDoneButton(template) {\n    this._doneButton = template;\n  }\n  getDoneButton() {\n    return this._doneButton;\n  }\n  setCounter(template) {\n    this._counter = template;\n  }\n  getCounter() {\n    return this._counter;\n  }\n}\nTemplatesService.ɵfac = function TemplatesService_Factory(t) {\n  return new (t || TemplatesService)();\n};\nTemplatesService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: TemplatesService,\n  factory: TemplatesService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TemplatesService, [{\n    type: Injectable\n  }], null, null);\n})();\nconst NO_POSITION = 'NO_POSITION';\nclass JoyrideDirective {\n  constructor(joyrideStepsContainer, viewContainerRef, domService, router, templateService, platformId) {\n    this.joyrideStepsContainer = joyrideStepsContainer;\n    this.viewContainerRef = viewContainerRef;\n    this.domService = domService;\n    this.router = router;\n    this.templateService = templateService;\n    this.platformId = platformId;\n    this.stepPosition = NO_POSITION;\n    this.prev = new EventEmitter();\n    this.next = new EventEmitter();\n    this.done = new EventEmitter();\n    this.subscriptions = [];\n    this.windowRef = this.domService.getNativeWindow();\n    this.step = new JoyrideStep();\n  }\n  ngAfterViewInit() {\n    if (!isPlatformBrowser(this.platformId)) return;\n    if (this.prevTemplate) this.templateService.setPrevButton(this.prevTemplate);\n    if (this.nextTemplate) this.templateService.setNextButton(this.nextTemplate);\n    if (this.doneTemplate) this.templateService.setDoneButton(this.doneTemplate);\n    if (this.counterTemplate) this.templateService.setCounter(this.counterTemplate);\n    this.step.position = this.stepPosition;\n    this.step.targetViewContainer = this.viewContainerRef;\n    this.setAsyncFields(this.step);\n    this.step.stepContent = this.stepContent;\n    this.step.stepContentParams = this.stepContentParams;\n    this.step.nextClicked = this.next;\n    this.step.prevCliked = this.prev;\n    this.step.tourDone = this.done;\n    if (!this.name) throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\n    this.step.name = this.name;\n    this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\n    this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\n    this.step.isElementOrAncestorFixed = this.isElementFixed(this.viewContainerRef.element) || this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\n    this.joyrideStepsContainer.addStep(this.step);\n  }\n  ngOnChanges(changes) {\n    if (changes['title'] || changes['text']) {\n      this.setAsyncFields(this.step);\n    }\n  }\n  isElementFixed(element) {\n    return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\n  }\n  setAsyncFields(step) {\n    if (this.title instanceof Observable) {\n      this.subscriptions.push(this.title.subscribe(title => {\n        step.title.next(title);\n      }));\n    } else {\n      step.title.next(this.title);\n    }\n    if (this.text instanceof Observable) {\n      this.subscriptions.push(this.text.subscribe(text => {\n        step.text.next(text);\n      }));\n    } else {\n      step.text.next(this.text);\n    }\n  }\n  isAncestorsFixed(nativeElement) {\n    if (!nativeElement || !nativeElement.parentElement) return false;\n    let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\n    if (nativeElement.nodeName === 'BODY') {\n      return isElementFixed;\n    }\n    if (isElementFixed) return true;else return this.isAncestorsFixed(nativeElement.parentElement);\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(sub => {\n      sub.unsubscribe();\n    });\n  }\n}\nJoyrideDirective.ɵfac = function JoyrideDirective_Factory(t) {\n  return new (t || JoyrideDirective)(i0.ɵɵdirectiveInject(JoyrideStepsContainerService), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(DomRefService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(TemplatesService), i0.ɵɵdirectiveInject(PLATFORM_ID));\n};\nJoyrideDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: JoyrideDirective,\n  selectors: [[\"joyrideStep\"], [\"\", \"joyrideStep\", \"\"]],\n  inputs: {\n    name: [\"joyrideStep\", \"name\"],\n    nextStep: \"nextStep\",\n    title: \"title\",\n    text: \"text\",\n    stepPosition: \"stepPosition\",\n    stepContent: \"stepContent\",\n    stepContentParams: \"stepContentParams\",\n    prevTemplate: \"prevTemplate\",\n    nextTemplate: \"nextTemplate\",\n    doneTemplate: \"doneTemplate\",\n    counterTemplate: \"counterTemplate\"\n  },\n  outputs: {\n    prev: \"prev\",\n    next: \"next\",\n    done: \"done\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'joyrideStep, [joyrideStep]'\n    }]\n  }], function () {\n    return [{\n      type: JoyrideStepsContainerService\n    }, {\n      type: i0.ViewContainerRef\n    }, {\n      type: DomRefService\n    }, {\n      type: i3.Router\n    }, {\n      type: TemplatesService\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, {\n    name: [{\n      type: Input,\n      args: ['joyrideStep']\n    }],\n    nextStep: [{\n      type: Input\n    }],\n    title: [{\n      type: Input\n    }],\n    text: [{\n      type: Input\n    }],\n    stepPosition: [{\n      type: Input\n    }],\n    stepContent: [{\n      type: Input\n    }],\n    stepContentParams: [{\n      type: Input\n    }],\n    prevTemplate: [{\n      type: Input\n    }],\n    nextTemplate: [{\n      type: Input\n    }],\n    doneTemplate: [{\n      type: Input\n    }],\n    counterTemplate: [{\n      type: Input\n    }],\n    prev: [{\n      type: Output\n    }],\n    next: [{\n      type: Output\n    }],\n    done: [{\n      type: Output\n    }]\n  });\n})();\nclass JoyrideStepInfo {}\nclass DocumentService {\n  constructor(DOMService, platformId) {\n    this.DOMService = DOMService;\n    if (!isPlatformBrowser(platformId)) {\n      return;\n    }\n    this.setDocumentHeight();\n    var doc = DOMService.getNativeDocument();\n    if (doc && !doc.elementsFromPoint) {\n      // IE 11 - Edge browsers\n      doc.elementsFromPoint = this.elementsFromPoint.bind(this);\n    }\n  }\n  getElementFixedTop(elementRef) {\n    return elementRef.nativeElement.getBoundingClientRect().top;\n  }\n  getElementFixedLeft(elementRef) {\n    return elementRef.nativeElement.getBoundingClientRect().left;\n  }\n  getElementAbsoluteTop(elementRef) {\n    const scrollOffsets = this.getScrollOffsets();\n    return elementRef.nativeElement.getBoundingClientRect().top + scrollOffsets.y;\n  }\n  getElementAbsoluteLeft(elementRef) {\n    const scrollOffsets = this.getScrollOffsets();\n    return elementRef.nativeElement.getBoundingClientRect().left + scrollOffsets.x;\n  }\n  setDocumentHeight() {\n    this.documentHeight = this.calculateDocumentHeight();\n  }\n  getDocumentHeight() {\n    return this.documentHeight;\n  }\n  isParentScrollable(elementRef) {\n    return this.getFirstScrollableParent(elementRef.nativeElement) !== this.DOMService.getNativeDocument().body;\n  }\n  isElementBeyondOthers(elementRef, isElementFixed, keywordToDiscard) {\n    const x1 = isElementFixed ? this.getElementFixedLeft(elementRef) : this.getElementAbsoluteLeft(elementRef);\n    const y1 = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\n    const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\n    const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\n    const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\n    const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\n    if (elements1.length === 0 && elements2.length === 0) return 1;\n    if (this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !== elementRef.nativeElement || this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !== elementRef.nativeElement) {\n      return 2;\n    }\n    return 3;\n  }\n  scrollIntoView(elementRef, isElementFixed) {\n    const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n    const top = isElementFixed ? this.getElementFixedTop(elementRef) : this.getElementAbsoluteTop(elementRef);\n    if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n      if (firstScrollableParent.scrollTo) {\n        firstScrollableParent.scrollTo(0, top - 150);\n      } else {\n        // IE 11 - Edge browsers\n        firstScrollableParent.scrollTop = top - 150;\n      }\n    } else {\n      this.DOMService.getNativeWindow().scrollTo(0, top - 150);\n    }\n  }\n  scrollToTheTop(elementRef) {\n    const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n    if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n      if (firstScrollableParent.scrollTo) {\n        firstScrollableParent.scrollTo(0, 0);\n      } else {\n        // IE 11 - Edge browsers\n        firstScrollableParent.scrollTop = 0;\n      }\n    } else {\n      this.DOMService.getNativeWindow().scrollTo(0, 0);\n    }\n  }\n  scrollToTheBottom(elementRef) {\n    const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n    if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n      if (firstScrollableParent.scrollTo) {\n        firstScrollableParent.scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n      } else {\n        // IE 11 - Edge browsers\n        firstScrollableParent.scrollTop = firstScrollableParent.scrollHeight - firstScrollableParent.clientHeight;\n      }\n    } else {\n      this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n    }\n  }\n  getFirstScrollableParent(node) {\n    const regex = /(auto|scroll|overlay)/;\n    const style = (node, prop) => this.DOMService.getNativeWindow().getComputedStyle(node, null).getPropertyValue(prop);\n    const scroll = node => regex.test(style(node, 'overflow') + style(node, 'overflow-y') + style(node, 'overflow-x'));\n    const scrollparent = node => {\n      return !node || node === this.DOMService.getNativeDocument().body ? this.DOMService.getNativeDocument().body : scroll(node) ? node : scrollparent(node.parentNode);\n    };\n    return scrollparent(node);\n  }\n  calculateDocumentHeight() {\n    const documentRef = this.DOMService.getNativeDocument();\n    return Math.max(documentRef.body.scrollHeight, documentRef.documentElement.scrollHeight, documentRef.body.offsetHeight, documentRef.documentElement.offsetHeight, documentRef.body.clientHeight, documentRef.documentElement.clientHeight);\n  }\n  getScrollOffsets() {\n    const winReference = this.DOMService.getNativeWindow();\n    const docReference = this.DOMService.getNativeDocument();\n    // This works for all browsers except IE versions 8 and before\n    if (winReference.pageXOffset != null) return {\n      x: winReference.pageXOffset,\n      y: winReference.pageYOffset\n    };\n    // For IE (or any browser) in Standards mode\n    if (docReference.compatMode == 'CSS1Compat') return {\n      x: docReference.documentElement.scrollLeft,\n      y: docReference.documentElement.scrollTop\n    };\n    // For browsers in Quirks mode\n    return {\n      x: docReference.body.scrollLeft,\n      y: docReference.body.scrollTop\n    };\n  }\n  elementsFromPoint(x, y) {\n    var parents = [];\n    var parent = void 0;\n    do {\n      const elem = this.DOMService.getNativeDocument().elementFromPoint(x, y);\n      if (elem && parent !== elem) {\n        parent = elem;\n        parents.push(parent);\n        parent.style.pointerEvents = 'none';\n      } else {\n        parent = false;\n      }\n    } while (parent);\n    parents.forEach(function (parent) {\n      return parent.style.pointerEvents = 'all';\n    });\n    return parents;\n  }\n  getFirstElementWithoutKeyword(elements, keyword) {\n    while (elements[0] && elements[0].classList.toString().includes(keyword)) {\n      elements.shift();\n    }\n    return elements[0];\n  }\n}\nDocumentService.ɵfac = function DocumentService_Factory(t) {\n  return new (t || DocumentService)(i0.ɵɵinject(DomRefService), i0.ɵɵinject(PLATFORM_ID));\n};\nDocumentService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DocumentService,\n  factory: DocumentService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: DomRefService\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\nclass JoyrideBackdropService {\n  constructor(documentService, optionsService, rendererFactory) {\n    this.documentService = documentService;\n    this.optionsService = optionsService;\n    this.rendererFactory = rendererFactory;\n    this.lastXScroll = 0;\n    this.lastYScroll = 0;\n    this.setRenderer();\n  }\n  setRenderer() {\n    this.renderer = this.rendererFactory.createRenderer(null, null);\n  }\n  draw(step) {\n    this.elementRef = step.targetViewContainer;\n    this.targetAbsoluteTop = this.getTargetTotalTop(step);\n    this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n    this.currentBackdropContainer = this.renderer.createElement('div');\n    this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\n    this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\n    this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\n    this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\n    this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\n    this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\n    this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\n    this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\n    this.backdropContent = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropContent, 'backdrop-content');\n    this.renderer.setStyle(this.backdropContent, 'position', 'relative');\n    this.renderer.setStyle(this.backdropContent, 'height', '100%');\n    this.renderer.setStyle(this.backdropContent, 'display', 'flex');\n    this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\n    this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\n    this.backdropTop = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\n    this.renderer.addClass(this.backdropTop, 'backdrop-top');\n    this.renderer.setStyle(this.backdropTop, 'width', '100%');\n    this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\n    this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\n    this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropContent, this.backdropTop);\n    this.backdropMiddleContainer = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\n    this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n    this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\n    this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\n    this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\n    this.backdropMiddleContent = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\n    this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\n    this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\n    this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\n    this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\n    this.leftBackdrop = this.renderer.createElement('div');\n    this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\n    this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\n    this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\n    this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\n    this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\n    this.targetBackdrop = this.renderer.createElement('div');\n    this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\n    this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\n    this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n    this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\n    this.rightBackdrop = this.renderer.createElement('div');\n    this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\n    this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\n    this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\n    this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\n    this.backdropBottom = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\n    this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\n    this.renderer.setStyle(this.backdropBottom, 'width', '100%');\n    this.renderer.setStyle(this.backdropBottom, 'height', '100%');\n    this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n    this.renderer.appendChild(this.backdropContent, this.backdropBottom);\n    this.removeLastBackdrop();\n    this.drawCurrentBackdrop();\n    this.lastBackdropContainer = this.currentBackdropContainer;\n  }\n  remove() {\n    this.removeLastBackdrop();\n  }\n  redrawTarget(step) {\n    this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n    this.targetAbsoluteTop = this.getTargetTotalTop(step);\n    this.handleVerticalScroll(step);\n    this.handleHorizontalScroll(step);\n  }\n  getTargetTotalTop(step) {\n    let targetVC = step.targetViewContainer;\n    return step.isElementOrAncestorFixed ? this.documentService.getElementFixedTop(targetVC.element) : this.documentService.getElementAbsoluteTop(targetVC.element);\n  }\n  getTargetTotalLeft(step) {\n    let targetVC = step.targetViewContainer;\n    return step.isElementOrAncestorFixed ? this.documentService.getElementFixedLeft(targetVC.element) : this.documentService.getElementAbsoluteLeft(targetVC.element);\n  }\n  redraw(step, scroll) {\n    if (this.lastYScroll !== scroll.scrollY) {\n      this.lastYScroll = scroll.scrollY;\n      if (this.elementRef) {\n        this.handleVerticalScroll(step);\n      }\n    }\n    if (this.lastXScroll !== scroll.scrollX) {\n      this.lastXScroll = scroll.scrollX;\n      if (this.elementRef) {\n        this.handleHorizontalScroll(step);\n      }\n    }\n  }\n  handleHorizontalScroll(step) {\n    let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\n    if (newBackdropLeftWidth >= 0) {\n      this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\n      this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n    } else {\n      this.handleTargetPartialWidth(newBackdropLeftWidth);\n    }\n  }\n  handleTargetPartialWidth(newBackdropLeftWidth) {\n    this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\n    let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\n    if (visibleTargetWidth >= 0) {\n      this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\n    } else {\n      this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\n    }\n  }\n  handleVerticalScroll(step) {\n    let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\n    if (newBackdropTopHeight >= 0) {\n      this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\n      this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n    } else {\n      this.handleTargetPartialHeight(newBackdropTopHeight);\n    }\n  }\n  handleTargetPartialHeight(newBackdropTopHeight) {\n    this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\n    let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\n    if (visibleTargetHeight >= 0) {\n      this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\n    } else {\n      this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\n    }\n  }\n  removeLastBackdrop() {\n    if (this.lastBackdropContainer) {\n      this.renderer.removeChild(document.body, this.lastBackdropContainer);\n      this.lastBackdropContainer = undefined;\n    }\n  }\n  drawCurrentBackdrop() {\n    this.renderer.appendChild(document.body, this.currentBackdropContainer);\n  }\n}\nJoyrideBackdropService.ɵfac = function JoyrideBackdropService_Factory(t) {\n  return new (t || JoyrideBackdropService)(i0.ɵɵinject(DocumentService), i0.ɵɵinject(JoyrideOptionsService), i0.ɵɵinject(i0.RendererFactory2));\n};\nJoyrideBackdropService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideBackdropService,\n  factory: JoyrideBackdropService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideBackdropService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: DocumentService\n    }, {\n      type: JoyrideOptionsService\n    }, {\n      type: i0.RendererFactory2\n    }];\n  }, null);\n})();\nclass Scroll {}\nclass EventListenerService {\n  constructor(rendererFactory, DOMService) {\n    this.rendererFactory = rendererFactory;\n    this.DOMService = DOMService;\n    this.scrollEvent = new Subject();\n    this.resizeEvent = new Subject();\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n  startListeningScrollEvents() {\n    this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\n      this.scrollEvent.next({\n        scrollX: this.DOMService.getNativeWindow().pageXOffset,\n        scrollY: this.DOMService.getNativeWindow().pageYOffset\n      });\n    });\n  }\n  startListeningResizeEvents() {\n    this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\n      this.resizeEvent.next(evt);\n    });\n  }\n  stopListeningScrollEvents() {\n    this.scrollUnlisten();\n  }\n  stopListeningResizeEvents() {\n    this.resizeUnlisten();\n  }\n}\nEventListenerService.ɵfac = function EventListenerService_Factory(t) {\n  return new (t || EventListenerService)(i0.ɵɵinject(i0.RendererFactory2), i0.ɵɵinject(DomRefService));\n};\nEventListenerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: EventListenerService,\n  factory: EventListenerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(EventListenerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i0.RendererFactory2\n    }, {\n      type: DomRefService\n    }];\n  }, null);\n})();\nclass JoyrideArrowComponent {\n  constructor() {\n    this.position = 'top';\n  }\n}\nJoyrideArrowComponent.ɵfac = function JoyrideArrowComponent_Factory(t) {\n  return new (t || JoyrideArrowComponent)();\n};\nJoyrideArrowComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideArrowComponent,\n  selectors: [[\"joyride-arrow\"]],\n  inputs: {\n    position: \"position\"\n  },\n  decls: 1,\n  vars: 8,\n  template: function JoyrideArrowComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\");\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"joyride-arrow__top\", ctx.position == \"top\")(\"joyride-arrow__bottom\", ctx.position == \"bottom\")(\"joyride-arrow__left\", ctx.position == \"left\")(\"joyride-arrow__right\", ctx.position == \"right\");\n    }\n  },\n  styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideArrowComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joyride-arrow',\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div [class.joyride-arrow__top]=\\\"position == 'top'\\\"\\n     [class.joyride-arrow__bottom]=\\\"position == 'bottom'\\\"\\n     [class.joyride-arrow__left]=\\\"position == 'left'\\\"\\n     [class.joyride-arrow__right]=\\\"position == 'right'\\\">\\n</div>\",\n      styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"]\n    }]\n  }], null, {\n    position: [{\n      type: Input\n    }]\n  });\n})();\nclass JoyrideCloseButtonComponent {}\nJoyrideCloseButtonComponent.ɵfac = function JoyrideCloseButtonComponent_Factory(t) {\n  return new (t || JoyrideCloseButtonComponent)();\n};\nJoyrideCloseButtonComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideCloseButtonComponent,\n  selectors: [[\"joy-close-button\"]],\n  decls: 3,\n  vars: 0,\n  consts: [[\"viewBox\", \"0 0 25 25\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"x1\", \"1\", \"y1\", \"24\", \"x2\", \"24\", \"y2\", \"1\", \"stroke\", \"black\", \"stroke-width\", \"3\"], [\"x1\", \"1\", \"y1\", \"1\", \"x2\", \"24\", \"y2\", \"24\", \"stroke\", \"black\", \"stroke-width\", \"3\"]],\n  template: function JoyrideCloseButtonComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(0, \"svg\", 0);\n      i0.ɵɵelement(1, \"line\", 1);\n      i0.ɵɵelement(2, \"line\", 2);\n      i0.ɵɵelementEnd();\n    }\n  },\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideCloseButtonComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joy-close-button',\n      template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`\n    }]\n  }], null, null);\n})();\nclass JoyrideButtonComponent {\n  constructor() {\n    this.clicked = new EventEmitter();\n  }\n  onClick() {\n    this.clicked.emit();\n  }\n}\nJoyrideButtonComponent.ɵfac = function JoyrideButtonComponent_Factory(t) {\n  return new (t || JoyrideButtonComponent)();\n};\nJoyrideButtonComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideButtonComponent,\n  selectors: [[\"joyride-button\"]],\n  inputs: {\n    color: \"color\"\n  },\n  outputs: {\n    clicked: \"clicked\"\n  },\n  ngContentSelectors: _c1,\n  decls: 2,\n  vars: 5,\n  consts: [[1, \"joyride-button\", 3, \"ngStyle\", \"mouseleave\", \"mouseover\", \"click\"]],\n  template: function JoyrideButtonComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"mouseleave\", function JoyrideButtonComponent_Template_button_mouseleave_0_listener() {\n        return ctx.hover = false;\n      })(\"mouseover\", function JoyrideButtonComponent_Template_button_mouseover_0_listener() {\n        return ctx.hover = true;\n      })(\"click\", function JoyrideButtonComponent_Template_button_click_0_listener() {\n        return ctx.onClick();\n      });\n      i0.ɵɵprojection(1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction3(1, _c0, ctx.hover ? \"#fff\" : ctx.color, ctx.hover ? ctx.color : \"#fff\", ctx.hover ? ctx.color : \"transparent\"));\n    }\n  },\n  directives: [i10.NgStyle],\n  styles: [\".joyride-button[_ngcontent-%COMP%]{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button[_ngcontent-%COMP%]:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideButtonComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joyride-button',\n      template: \"<button (mouseleave)=\\\"hover=false\\\" (mouseover)=\\\"hover=true\\\"\\n    [ngStyle]=\\\"{'background-color': hover ? '#fff' : color, \\n                'color': hover ? color : '#fff',\\n                'border-color' : hover ? color : 'transparent'}\\\"\\n    class=\\\"joyride-button\\\" (click)=\\\"onClick()\\\">\\n    <ng-content></ng-content>\\n</button>\",\n      styles: [\".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\\n\"]\n    }]\n  }], null, {\n    color: [{\n      type: Input\n    }],\n    clicked: [{\n      type: Output\n    }]\n  });\n})();\nconst STEP_MIN_WIDTH = 200;\nconst STEP_MAX_WIDTH = 400;\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\nconst STEP_HEIGHT = 200;\nconst ASPECT_RATIO = 1.212;\nconst DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\nvar KEY_CODE;\n(function (KEY_CODE) {\n  KEY_CODE[KEY_CODE[\"RIGHT_ARROW\"] = 39] = \"RIGHT_ARROW\";\n  KEY_CODE[KEY_CODE[\"LEFT_ARROW\"] = 37] = \"LEFT_ARROW\";\n  KEY_CODE[KEY_CODE[\"ESCAPE_KEY\"] = 27] = \"ESCAPE_KEY\";\n})(KEY_CODE || (KEY_CODE = {}));\nclass JoyrideStepComponent {\n  constructor(injector, stepsContainerService, eventListenerService, documentService, renderer, logger, optionsService, templateService) {\n    this.injector = injector;\n    this.stepsContainerService = stepsContainerService;\n    this.eventListenerService = eventListenerService;\n    this.documentService = documentService;\n    this.renderer = renderer;\n    this.logger = logger;\n    this.optionsService = optionsService;\n    this.templateService = templateService;\n    this.stepWidth = STEP_MIN_WIDTH;\n    this.stepHeight = STEP_HEIGHT;\n    this.showArrow = true;\n    this.arrowSize = ARROW_SIZE;\n    this.subscriptions = [];\n  }\n  ngOnInit() {\n    // Need to Inject here otherwise you will obtain a circular dependency\n    this.joyrideStepService = this.injector.get(JoyrideStepService);\n    this.documentHeight = this.documentService.getDocumentHeight();\n    this.subscriptions.push(this.subscribeToResizeEvents());\n    this.title = this.step.title.asObservable();\n    this.text = this.step.text.asObservable();\n    this.setCustomTemplates();\n    this.setCustomTexts();\n    this.counter = this.getCounter();\n    this.isCounterVisible = this.optionsService.isCounterVisible();\n    this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\n    this.themeColor = this.optionsService.getThemeColor();\n    if (this.text) this.text.subscribe(val => this.checkRedraw(val));\n    if (this.title) this.title.subscribe(val => this.checkRedraw(val));\n  }\n  ngAfterViewInit() {\n    if (this.isCustomized()) {\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\n      this.updateStepDimensions();\n    } else {\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\n      let dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);\n      dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\n      this.stepWidth = dimensions.width;\n      this.stepHeight = dimensions.height;\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\n      this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\n    }\n    this.drawStep();\n  }\n  checkRedraw(val) {\n    if (val != null) {\n      // Need to wait that the change is rendered before redrawing\n      setTimeout(() => {\n        this.redrawStep();\n      }, 2);\n    }\n  }\n  isCustomized() {\n    return this.step.stepContent || this.templateService.getCounter() || this.templateService.getPrevButton() || this.templateService.getNextButton() || this.templateService.getDoneButton();\n  }\n  setCustomTexts() {\n    const customeTexts = this.optionsService.getCustomTexts();\n    this.prevText = customeTexts.prev;\n    this.nextText = customeTexts.next;\n    this.doneText = customeTexts.done;\n  }\n  drawStep() {\n    let position = this.step.isElementOrAncestorFixed ? 'fixed' : 'absolute';\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\n    this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\n    this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\n    this.targetAbsoluteLeft = position === 'fixed' ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element) : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\n    this.targetAbsoluteTop = position === 'fixed' ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element) : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\n    this.setStepStyle();\n  }\n  getCounter() {\n    let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);\n    let numberOfSteps = this.stepsContainerService.getStepsCount();\n    this.counterData = {\n      step: stepPosition,\n      total: numberOfSteps\n    };\n    return stepPosition + '/' + numberOfSteps;\n  }\n  setCustomTemplates() {\n    this.customContent = this.step.stepContent;\n    this.ctx = this.step.stepContentParams;\n    this.customPrevButton = this.templateService.getPrevButton();\n    this.customNextButton = this.templateService.getNextButton();\n    this.customDoneButton = this.templateService.getDoneButton();\n    this.customCounter = this.templateService.getCounter();\n  }\n  keyEvent(event) {\n    console.log(event);\n    if (event.keyCode === KEY_CODE.RIGHT_ARROW) {\n      if (this.isLastStep()) {\n        this.close();\n      } else {\n        this.next();\n      }\n    } else if (event.keyCode === KEY_CODE.LEFT_ARROW) {\n      this.prev();\n    } else if (event.keyCode === KEY_CODE.ESCAPE_KEY) {\n      this.close();\n    }\n  }\n  prev() {\n    this.joyrideStepService.prev();\n  }\n  next() {\n    this.joyrideStepService.next();\n  }\n  close() {\n    this.joyrideStepService.close();\n  }\n  isFirstStep() {\n    return this.stepsContainerService.getStepNumber(this.step.name) === 1;\n  }\n  isLastStep() {\n    return this.stepsContainerService.getStepNumber(this.step.name) === this.stepsContainerService.getStepsCount();\n  }\n  setStepStyle() {\n    switch (this.step.position) {\n      case 'top':\n        {\n          this.setStyleTop();\n          break;\n        }\n      case 'bottom':\n        {\n          this.setStyleBottom();\n          break;\n        }\n      case 'right':\n        {\n          this.setStyleRight();\n          break;\n        }\n      case 'left':\n        {\n          this.setStyleLeft();\n          break;\n        }\n      case 'center':\n        {\n          this.setStyleCenter();\n          break;\n        }\n      default:\n        {\n          this.setStyleBottom();\n        }\n    }\n  }\n  setStyleTop() {\n    this.stepsContainerService.updatePosition(this.step.name, 'top');\n    this.topPosition = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n    this.stepAbsoluteTop = this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n    this.arrowTopPosition = this.stepHeight;\n    this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n    this.adjustLeftPosition();\n    this.adjustRightPosition();\n    this.arrowPosition = 'bottom';\n    this.autofixTopPosition();\n  }\n  setStyleRight() {\n    this.stepsContainerService.updatePosition(this.step.name, 'right');\n    this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n    this.leftPosition = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n    this.stepAbsoluteLeft = this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n    this.arrowLeftPosition = -this.arrowSize;\n    this.adjustTopPosition();\n    this.adjustBottomPosition();\n    this.arrowPosition = 'left';\n    this.autofixRightPosition();\n  }\n  setStyleBottom() {\n    this.stepsContainerService.updatePosition(this.step.name, 'bottom');\n    this.topPosition = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n    this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n    this.arrowTopPosition = -this.arrowSize;\n    this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n    this.leftPosition = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.stepAbsoluteLeft = this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n    this.adjustLeftPosition();\n    this.adjustRightPosition();\n    this.arrowPosition = 'top';\n    this.autofixBottomPosition();\n  }\n  setStyleLeft() {\n    this.stepsContainerService.updatePosition(this.step.name, 'left');\n    this.topPosition = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.stepAbsoluteTop = this.targetAbsoluteTop + this.targetHeight / 2 - this.stepHeight / 2;\n    this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n    this.leftPosition = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n    this.stepAbsoluteLeft = this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n    this.arrowLeftPosition = this.stepWidth;\n    this.adjustTopPosition();\n    this.adjustBottomPosition();\n    this.arrowPosition = 'right';\n    this.autofixLeftPosition();\n  }\n  setStyleCenter() {\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\n    this.updateStepDimensions();\n    this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`);\n    this.showArrow = false;\n  }\n  adjustLeftPosition() {\n    if (this.leftPosition < 0) {\n      this.arrowLeftPosition = this.arrowLeftPosition + this.leftPosition - DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n      this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n    }\n  }\n  adjustRightPosition() {\n    let currentWindowWidth = document.body.clientWidth;\n    if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\n      let newLeftPos = this.leftPosition - (this.stepAbsoluteLeft + this.stepWidth + DEFAULT_DISTANCE_FROM_MARGIN_RIGHT - currentWindowWidth);\n      let deltaLeftPosition = newLeftPos - this.leftPosition;\n      this.leftPosition = newLeftPos;\n      this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\n    }\n  }\n  adjustTopPosition() {\n    if (this.stepAbsoluteTop < 0) {\n      this.arrowTopPosition = this.arrowTopPosition + this.topPosition - DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n      this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n    }\n  }\n  adjustBottomPosition() {\n    if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\n      let newTopPos = this.topPosition - (this.stepAbsoluteTop + this.stepHeight + DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM - this.documentHeight);\n      let deltaTopPosition = newTopPos - this.topPosition;\n      this.topPosition = newTopPos;\n      this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\n    }\n  }\n  autofixTopPosition() {\n    if (this.positionAlreadyFixed) {\n      this.logger.warn('No step positions found for this step. The step will be centered.');\n    } else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize < 0) {\n      this.positionAlreadyFixed = true;\n      this.setStyleRight();\n    }\n  }\n  autofixRightPosition() {\n    if (this.targetAbsoluteLeft + this.targetWidth + this.stepWidth + this.arrowSize > document.body.clientWidth) {\n      this.setStyleBottom();\n    }\n  }\n  autofixBottomPosition() {\n    if (this.targetAbsoluteTop + this.stepHeight + this.arrowSize + this.targetHeight > this.documentHeight) {\n      this.setStyleLeft();\n    }\n  }\n  autofixLeftPosition() {\n    if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\n      this.setStyleTop();\n    }\n  }\n  subscribeToResizeEvents() {\n    return this.eventListenerService.resizeEvent.subscribe(() => {\n      this.redrawStep();\n    });\n  }\n  redrawStep() {\n    this.updateStepDimensions();\n    this.drawStep();\n  }\n  getDimensionsByAspectRatio(width, height, aspectRatio) {\n    let calcHeight = (width + height) / (1 + aspectRatio);\n    let calcWidth = calcHeight * aspectRatio;\n    return {\n      width: calcWidth,\n      height: calcHeight\n    };\n  }\n  adjustDimensions(width, height) {\n    let area = width * height;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > STEP_MAX_WIDTH) {\n      newWidth = STEP_MAX_WIDTH;\n      newHeight = area / newWidth;\n    } else if (width < STEP_MIN_WIDTH) {\n      newWidth = STEP_MIN_WIDTH;\n      newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\n    }\n    return {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  updateStepDimensions() {\n    this.stepWidth = this.stepContainer.nativeElement.clientWidth;\n    this.stepHeight = this.stepContainer.nativeElement.clientHeight;\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n  }\n}\nJoyrideStepComponent.ɵfac = function JoyrideStepComponent_Factory(t) {\n  return new (t || JoyrideStepComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(JoyrideStepsContainerService), i0.ɵɵdirectiveInject(EventListenerService), i0.ɵɵdirectiveInject(DocumentService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(LoggerService), i0.ɵɵdirectiveInject(JoyrideOptionsService), i0.ɵɵdirectiveInject(TemplatesService));\n};\nJoyrideStepComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: JoyrideStepComponent,\n  selectors: [[\"joyride-step\"]],\n  viewQuery: function JoyrideStepComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c2, 7);\n      i0.ɵɵviewQuery(_c3, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepHolder = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepContainer = _t.first);\n    }\n  },\n  hostBindings: function JoyrideStepComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"keyup\", function JoyrideStepComponent_keyup_HostBindingHandler($event) {\n        return ctx.keyEvent($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  inputs: {\n    step: \"step\"\n  },\n  decls: 21,\n  vars: 17,\n  consts: [[1, \"joyride-step__holder\", 3, \"id\"], [\"stepHolder\", \"\"], [\"class\", \"joyride-step__arrow\", 3, \"position\", \"top\", \"left\", 4, \"ngIf\"], [1, \"joyride-step__container\"], [\"stepContainer\", \"\"], [1, \"joyride-step__close\", 3, \"click\"], [1, \"joyride-step__header\"], [1, \"joyride-step__title\"], [1, \"joyride-step__body\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"defaultContent\", \"\"], [1, \"joyride-step__footer\"], [\"class\", \"joyride-step__counter-container\", 4, \"ngIf\"], [1, \"joyride-step__buttons-container\"], [\"class\", \"joyride-step__prev-container joyride-step__button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"joyride-step__next-container joyride-step__button\", 3, \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"doneButton\", \"\"], [1, \"joyride-step__arrow\", 3, \"position\"], [1, \"joyride-step__counter-container\"], [\"defaultCounter\", \"\"], [1, \"joyride-step__counter\"], [1, \"joyride-step__prev-container\", \"joyride-step__button\", 3, \"click\"], [4, \"ngTemplateOutlet\"], [\"defaultPrevButton\", \"\"], [1, \"joyride-step__prev-button\", 3, \"color\"], [1, \"joyride-step__next-container\", \"joyride-step__button\", 3, \"click\"], [\"defaulNextButton\", \"\"], [3, \"color\"], [1, \"joyride-step__done-container\", \"joyride-step__button\", 3, \"click\"], [\"defaultDoneButton\", \"\"], [1, \"joyride-step__done-button\", 3, \"color\"]],\n  template: function JoyrideStepComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵtemplate(2, JoyrideStepComponent_joyride_arrow_2_Template, 1, 5, \"joyride-arrow\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3, 4);\n      i0.ɵɵelementStart(5, \"joy-close-button\", 5);\n      i0.ɵɵlistener(\"click\", function JoyrideStepComponent_Template_joy_close_button_click_5_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8);\n      i0.ɵɵtemplate(11, JoyrideStepComponent_ng_container_11_Template, 1, 0, \"ng-container\", 9);\n      i0.ɵɵtemplate(12, JoyrideStepComponent_ng_template_12_Template, 2, 3, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 11);\n      i0.ɵɵtemplate(15, JoyrideStepComponent_div_15_Template, 4, 2, \"div\", 12);\n      i0.ɵɵelementStart(16, \"div\", 13);\n      i0.ɵɵtemplate(17, JoyrideStepComponent_div_17_Template, 4, 1, \"div\", 14);\n      i0.ɵɵtemplate(18, JoyrideStepComponent_div_18_Template, 4, 1, \"div\", 15);\n      i0.ɵɵtemplate(19, JoyrideStepComponent_ng_template_19_Template, 4, 1, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      const _r4 = i0.ɵɵreference(13);\n      const _r9 = i0.ɵɵreference(20);\n      i0.ɵɵstyleProp(\"top\", ctx.topPosition, \"px\")(\"left\", ctx.leftPosition, \"px\");\n      i0.ɵɵproperty(\"id\", \"joyride-step-\" + ctx.step.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showArrow);\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleProp(\"color\", ctx.themeColor);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 15, ctx.title));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngTemplateOutlet\", ctx.customContent ? ctx.customContent : _r4)(\"ngTemplateOutletContext\", ctx.ctx);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isCounterVisible);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isPrevButtonVisible && !ctx.isFirstStep());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLastStep())(\"ngIfElse\", _r9);\n    }\n  },\n  directives: [i10.NgIf, JoyrideCloseButtonComponent, i10.NgTemplateOutlet, JoyrideArrowComponent, JoyrideButtonComponent],\n  pipes: [i10.AsyncPipe],\n  styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideStepComponent, [{\n    type: Component,\n    args: [{\n      selector: 'joyride-step',\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div #stepHolder class=\\\"joyride-step__holder\\\" [id]=\\\"'joyride-step-' + step.name\\\" [style.top.px]=\\\"topPosition\\\" [style.left.px]=\\\"leftPosition\\\">\\n    <joyride-arrow *ngIf=\\\"showArrow\\\" class=\\\"joyride-step__arrow\\\" [position]=\\\"arrowPosition\\\" [style.top.px]=\\\"arrowTopPosition\\\"\\n        [style.left.px]=\\\"arrowLeftPosition\\\"></joyride-arrow>\\n    <div #stepContainer class=\\\"joyride-step__container\\\">\\n        <joy-close-button class=\\\"joyride-step__close\\\" (click)=\\\"close()\\\"></joy-close-button>\\n        <div class=\\\"joyride-step__header\\\">\\n            <div class=\\\"joyride-step__title\\\" [style.color]=\\\"themeColor\\\">{{ title | async }}</div>\\n        </div>\\n        <div class=\\\"joyride-step__body\\\">\\n            <ng-container *ngTemplateOutlet=\\\"customContent ? customContent : defaultContent; context: ctx\\\"></ng-container>\\n            <ng-template #defaultContent>\\n                {{ text | async }}\\n            </ng-template>\\n        </div>\\n        <div class=\\\"joyride-step__footer\\\">\\n            <div *ngIf=\\\"isCounterVisible\\\" class=\\\"joyride-step__counter-container\\\">\\n                <ng-container *ngTemplateOutlet=\\\"customCounter ? customCounter : defaultCounter; context: counterData\\\"></ng-container>\\n                <ng-template #defaultCounter>\\n                    <div class=\\\"joyride-step__counter\\\">{{ counter }}</div>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"joyride-step__buttons-container\\\">\\n                <div class=\\\"joyride-step__prev-container joyride-step__button\\\" *ngIf=\\\"isPrevButtonVisible && !isFirstStep()\\\" (click)=\\\"prev()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customPrevButton ? customPrevButton : defaultPrevButton\\\"></ng-container>\\n                    <ng-template #defaultPrevButton>\\n                        <joyride-button class=\\\"joyride-step__prev-button\\\" [color]=\\\"themeColor\\\">{{ prevText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <div class=\\\"joyride-step__next-container joyride-step__button\\\" *ngIf=\\\"!isLastStep(); else doneButton\\\" (click)=\\\"next()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customNextButton ? customNextButton : defaulNextButton\\\"></ng-container>\\n                    <ng-template #defaulNextButton>\\n                        <joyride-button [color]=\\\"themeColor\\\">{{ nextText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <ng-template #doneButton>\\n                    <div class=\\\"joyride-step__done-container joyride-step__button\\\" (click)=\\\"close()\\\">\\n                        <ng-container *ngTemplateOutlet=\\\"customDoneButton ? customDoneButton : defaultDoneButton\\\"></ng-container>\\n                        <ng-template #defaultDoneButton>\\n                            <joyride-button class=\\\"joyride-step__done-button\\\" [color]=\\\"themeColor\\\">{{ doneText | async }}</joyride-button>\\n                        </ng-template>\\n                    </div>\\n                </ng-template>\\n            </div>\\n        </div>\\n    </div>\\n</div>\",\n      styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: JoyrideStepsContainerService\n    }, {\n      type: EventListenerService\n    }, {\n      type: DocumentService\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: LoggerService\n    }, {\n      type: JoyrideOptionsService\n    }, {\n      type: TemplatesService\n    }];\n  }, {\n    step: [{\n      type: Input\n    }],\n    stepHolder: [{\n      type: ViewChild,\n      args: ['stepHolder', {\n        static: true\n      }]\n    }],\n    stepContainer: [{\n      type: ViewChild,\n      args: ['stepContainer', {\n        static: true\n      }]\n    }],\n    keyEvent: [{\n      type: HostListener,\n      args: ['window:keyup', ['$event']]\n    }]\n  });\n})();\nclass StepDrawerService {\n  constructor(componentFactoryResolver, appRef, injector) {\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.appRef = appRef;\n    this.injector = injector;\n    this.refMap = {};\n  }\n  draw(step) {\n    // 1. Create a component reference from the component\n    const ref = this.componentFactoryResolver.resolveComponentFactory(JoyrideStepComponent).create(this.injector);\n    // 2. Attach component to the appRef so that it's inside the ng component tree\n    this.appRef.attachView(ref.hostView);\n    // 3. Get DOM element from component\n    const domElem = ref.hostView.rootNodes[0];\n    // 4. Append DOM element to the body\n    document.body.appendChild(domElem);\n    const instance = ref.instance;\n    instance.step = step;\n    ref.changeDetectorRef.detectChanges();\n    step.stepInstance = instance;\n    this.refMap[step.name] = ref;\n  }\n  remove(step) {\n    this.appRef.detachView(this.refMap[step.name].hostView);\n    this.refMap[step.name].destroy();\n  }\n}\nStepDrawerService.ɵfac = function StepDrawerService_Factory(t) {\n  return new (t || StepDrawerService)(i0.ɵɵinject(i0.ComponentFactoryResolver), i0.ɵɵinject(i0.ApplicationRef), i0.ɵɵinject(i0.Injector));\n};\nStepDrawerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: StepDrawerService,\n  factory: StepDrawerService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StepDrawerService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i0.ComponentFactoryResolver\n    }, {\n      type: i0.ApplicationRef\n    }, {\n      type: i0.Injector\n    }];\n  }, null);\n})();\nconst SCROLLBAR_SIZE = 20;\nconst DISTANCE_FROM_TARGET = 15;\nconst ARROW_SIZE = 10;\nclass JoyrideStepService {\n  constructor(backDropService, eventListener, stepsContainerService, documentService, DOMService, stepDrawerService, optionsService, router, logger) {\n    this.backDropService = backDropService;\n    this.eventListener = eventListener;\n    this.stepsContainerService = stepsContainerService;\n    this.documentService = documentService;\n    this.DOMService = DOMService;\n    this.stepDrawerService = stepDrawerService;\n    this.optionsService = optionsService;\n    this.router = router;\n    this.logger = logger;\n    this.winTopPosition = 0;\n    this.winBottomPosition = 0;\n    this.stepsObserver = new ReplaySubject();\n    this.initViewportPositions();\n    this.subscribeToScrollEvents();\n    this.subscribeToResizeEvents();\n  }\n  initViewportPositions() {\n    this.winTopPosition = 0;\n    this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n  }\n  subscribeToScrollEvents() {\n    this.eventListener.startListeningScrollEvents();\n    this.eventListener.scrollEvent.subscribe(scroll => {\n      this.winTopPosition = scroll.scrollY;\n      this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n      if (this.currentStep) this.backDropService.redraw(this.currentStep, scroll);\n    });\n  }\n  subscribeToResizeEvents() {\n    this.eventListener.resizeEvent.subscribe(() => {\n      if (this.currentStep) this.backDropService.redrawTarget(this.currentStep);\n    });\n  }\n  drawStep(step) {\n    step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\n    this.stepDrawerService.draw(step);\n  }\n  startTour() {\n    this.stepsObserver = new ReplaySubject();\n    this.stepsContainerService.init();\n    this.documentService.setDocumentHeight();\n    this.tryShowStep(StepActionType.NEXT);\n    this.eventListener.startListeningResizeEvents();\n    this.subscribeToStepsUpdates();\n    return this.stepsObserver.asObservable();\n  }\n  close() {\n    this.removeCurrentStep();\n    this.notifyTourIsFinished();\n    this.DOMService.getNativeWindow().scrollTo(0, 0);\n    this.eventListener.stopListeningResizeEvents();\n    this.backDropService.remove();\n  }\n  prev() {\n    this.removeCurrentStep();\n    this.currentStep.prevCliked.emit();\n    this.tryShowStep(StepActionType.PREV);\n  }\n  next() {\n    this.removeCurrentStep();\n    this.currentStep.nextClicked.emit();\n    this.tryShowStep(StepActionType.NEXT);\n  }\n  async navigateToStepPage(action) {\n    let stepRoute = this.stepsContainerService.getStepRoute(action);\n    if (stepRoute) {\n      return await this.router.navigate([stepRoute]);\n    }\n  }\n  subscribeToStepsUpdates() {\n    this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\n      if (this.currentStep && this.currentStep.name === updatedStep.name) {\n        this.currentStep = updatedStep;\n      }\n    });\n  }\n  async tryShowStep(actionType) {\n    await this.navigateToStepPage(actionType);\n    const timeout = this.optionsService.getWaitingTime();\n    if (timeout > 100) this.backDropService.remove();\n    setTimeout(() => {\n      try {\n        this.showStep(actionType);\n      } catch (error) {\n        if (error instanceof JoyrideStepDoesNotExist) {\n          this.tryShowStep(actionType);\n        } else if (error instanceof JoyrideStepOutOfRange) {\n          this.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\n          this.close();\n        } else {\n          throw new Error(error);\n        }\n      }\n    }, timeout);\n  }\n  showStep(actionType) {\n    this.currentStep = this.stepsContainerService.get(actionType);\n    if (this.currentStep == null) throw new JoyrideStepDoesNotExist('');\n    this.notifyStepClicked(actionType);\n    // Scroll the element to get it visible if it's in a scrollable element\n    this.scrollIfElementBeyondOtherElements();\n    this.backDropService.draw(this.currentStep);\n    this.drawStep(this.currentStep);\n    this.scrollIfStepAndTargetAreNotVisible();\n  }\n  notifyStepClicked(actionType) {\n    let stepInfo = {\n      number: this.stepsContainerService.getStepNumber(this.currentStep.name),\n      name: this.currentStep.name,\n      route: this.currentStep.route,\n      actionType\n    };\n    this.stepsObserver.next(stepInfo);\n  }\n  notifyTourIsFinished() {\n    if (this.currentStep) this.currentStep.tourDone.emit();\n    this.stepsObserver.complete();\n  }\n  removeCurrentStep() {\n    if (this.currentStep) this.stepDrawerService.remove(this.currentStep);\n  }\n  scrollIfStepAndTargetAreNotVisible() {\n    this.scrollWhenTargetOrStepAreHiddenBottom();\n    this.scrollWhenTargetOrStepAreHiddenTop();\n  }\n  scrollWhenTargetOrStepAreHiddenBottom() {\n    let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\n    if (totalTargetBottom > this.winBottomPosition) {\n      this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\n    }\n  }\n  scrollWhenTargetOrStepAreHiddenTop() {\n    let totalTargetTop = this.getMaxTargetAndStepTopPosition();\n    if (totalTargetTop < this.winTopPosition) {\n      this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\n    }\n  }\n  getMaxTargetAndStepBottomPosition() {\n    let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n    if (this.currentStep.position === 'top') {\n      return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\n    } else if (this.currentStep.position === 'bottom') {\n      return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight + this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET;\n    } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n      return Math.max(targetAbsoluteTop + this.currentStep.stepInstance.targetHeight, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2);\n    }\n  }\n  getMaxTargetAndStepTopPosition() {\n    let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n    if (this.currentStep.position === 'top') {\n      return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\n    } else if (this.currentStep.position === 'bottom') {\n      return targetAbsoluteTop;\n    } else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n      return Math.min(targetAbsoluteTop, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2);\n    }\n  }\n  scrollIfElementBeyondOtherElements() {\n    if (this.isElementBeyondOthers() === 2) {\n      this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\n    }\n    if (this.isElementBeyondOthers() === 2) {\n      this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\n    }\n    if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n      this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\n    }\n    if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n      this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\n    }\n  }\n  isElementBeyondOthers() {\n    return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed, 'backdrop');\n  }\n}\nJoyrideStepService.ɵfac = function JoyrideStepService_Factory(t) {\n  return new (t || JoyrideStepService)(i0.ɵɵinject(JoyrideBackdropService), i0.ɵɵinject(EventListenerService), i0.ɵɵinject(JoyrideStepsContainerService), i0.ɵɵinject(DocumentService), i0.ɵɵinject(DomRefService), i0.ɵɵinject(StepDrawerService), i0.ɵɵinject(JoyrideOptionsService), i0.ɵɵinject(i3.Router), i0.ɵɵinject(LoggerService));\n};\nJoyrideStepService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideStepService,\n  factory: JoyrideStepService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideStepService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: JoyrideBackdropService\n    }, {\n      type: EventListenerService\n    }, {\n      type: JoyrideStepsContainerService\n    }, {\n      type: DocumentService\n    }, {\n      type: DomRefService\n    }, {\n      type: StepDrawerService\n    }, {\n      type: JoyrideOptionsService\n    }, {\n      type: i3.Router\n    }, {\n      type: LoggerService\n    }];\n  }, null);\n})();\nclass JoyrideService {\n  constructor(platformId, stepService, optionsService) {\n    this.platformId = platformId;\n    this.stepService = stepService;\n    this.optionsService = optionsService;\n    this.tourInProgress = false;\n  }\n  startTour(options) {\n    if (!isPlatformBrowser(this.platformId)) {\n      return of(new JoyrideStepInfo());\n    }\n    if (!this.tourInProgress) {\n      this.tourInProgress = true;\n      if (options) {\n        this.optionsService.setOptions(options);\n      }\n      this.tour$ = this.stepService.startTour().pipe(finalize(() => this.tourInProgress = false));\n      this.tour$.subscribe();\n    }\n    return this.tour$;\n  }\n  closeTour() {\n    if (this.isTourInProgress()) this.stepService.close();\n  }\n  isTourInProgress() {\n    return this.tourInProgress;\n  }\n}\nJoyrideService.ɵfac = function JoyrideService_Factory(t) {\n  return new (t || JoyrideService)(i0.ɵɵinject(PLATFORM_ID), i0.ɵɵinject(JoyrideStepService), i0.ɵɵinject(JoyrideOptionsService));\n};\nJoyrideService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: JoyrideService,\n  factory: JoyrideService.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: JoyrideStepService\n    }, {\n      type: JoyrideOptionsService\n    }];\n  }, null);\n})();\nconst routerModuleForChild = RouterModule.forChild([]);\nclass JoyrideModule {\n  static forRoot() {\n    return {\n      ngModule: JoyrideModule,\n      providers: [JoyrideService, JoyrideStepService, JoyrideStepsContainerService, JoyrideBackdropService, EventListenerService, DocumentService, JoyrideOptionsService, StepDrawerService, DomRefService, LoggerService, TemplatesService]\n    };\n  }\n  static forChild() {\n    return {\n      ngModule: JoyrideModule,\n      providers: []\n    };\n  }\n}\nJoyrideModule.ɵfac = function JoyrideModule_Factory(t) {\n  return new (t || JoyrideModule)();\n};\nJoyrideModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: JoyrideModule\n});\nJoyrideModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, routerModuleForChild]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(JoyrideModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, routerModuleForChild],\n      declarations: [JoyrideDirective, JoyrideStepComponent, JoyrideArrowComponent, JoyrideButtonComponent, JoyrideCloseButtonComponent],\n      exports: [JoyrideDirective]\n    }]\n  }], null, null);\n})();\n\n/*\n * Public API Surface of ngx-joyride\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ARROW_SIZE, DEFAULT_DISTANCE_FROM_MARGIN_LEFT, DEFAULT_DISTANCE_FROM_MARGIN_TOP, DEFAULT_TEXTS, DEFAULT_THEME_COLOR, DEFAULT_TIMEOUT_BETWEEN_STEPS, DISTANCE_FROM_TARGET, DocumentService, DomRefService, EventListenerService, JoyrideArrowComponent, JoyrideBackdropService, JoyrideButtonComponent, JoyrideCloseButtonComponent, JoyrideDirective, JoyrideModule, JoyrideOptionsService, JoyrideService, JoyrideStepComponent, JoyrideStepService, JoyrideStepsContainerService, KEY_CODE, LoggerService, NO_POSITION, ObservableCustomTexts, STEP_DEFAULT_POSITION, Scroll, StepActionType, StepDrawerService, TemplatesService, routerModuleForChild };\n//# sourceMappingURL=ngx-joyride.mjs.map","map":{"version":3,"names":["i0","Injectable","PLATFORM_ID","Inject","EventEmitter","Directive","Input","Output","Component","ViewEncapsulation","ViewChild","HostListener","NgModule","i10","isPlatformBrowser","CommonModule","ReplaySubject","of","Observable","Subject","i3","RouterModule","finalize","_c0","a0","a1","a2","_c1","_c2","_c3","JoyrideStepComponent_joyride_arrow_2_Template","rf","ctx","ɵɵelement","ctx_r1","ɵɵnextContext","ɵɵstyleProp","arrowTopPosition","arrowLeftPosition","ɵɵproperty","arrowPosition","JoyrideStepComponent_ng_container_11_Template","ɵɵelementContainer","JoyrideStepComponent_ng_template_12_Template","ɵɵtext","ɵɵpipe","ctx_r5","ɵɵtextInterpolate1","ɵɵpipeBind1","text","JoyrideStepComponent_div_15_ng_container_1_Template","JoyrideStepComponent_div_15_ng_template_2_Template","ɵɵelementStart","ɵɵelementEnd","ctx_r13","ɵɵadvance","ɵɵtextInterpolate","counter","JoyrideStepComponent_div_15_Template","ɵɵtemplate","ɵɵtemplateRefExtractor","_r12","ɵɵreference","ctx_r6","customCounter","counterData","JoyrideStepComponent_div_17_ng_container_1_Template","JoyrideStepComponent_div_17_ng_template_2_Template","ctx_r16","themeColor","prevText","JoyrideStepComponent_div_17_Template","_r18","ɵɵgetCurrentView","ɵɵlistener","JoyrideStepComponent_div_17_Template_div_click_0_listener","ɵɵrestoreView","ctx_r17","prev","_r15","ctx_r7","customPrevButton","JoyrideStepComponent_div_18_ng_container_1_Template","JoyrideStepComponent_div_18_ng_template_2_Template","ctx_r21","nextText","JoyrideStepComponent_div_18_Template","_r23","JoyrideStepComponent_div_18_Template_div_click_0_listener","ctx_r22","next","_r20","ctx_r8","customNextButton","JoyrideStepComponent_ng_template_19_ng_container_1_Template","JoyrideStepComponent_ng_template_19_ng_template_2_Template","ctx_r26","doneText","JoyrideStepComponent_ng_template_19_Template","_r28","JoyrideStepComponent_ng_template_19_Template_div_click_0_listener","ctx_r27","close","_r25","ctx_r10","customDoneButton","JoyrideStep","constructor","title","JoyrideError","Error","message","Object","setPrototypeOf","prototype","JoyrideStepDoesNotExist","JoyrideStepOutOfRange","DEFAULT_THEME_COLOR","STEP_DEFAULT_POSITION","DEFAULT_TIMEOUT_BETWEEN_STEPS","ObservableCustomTexts","DEFAULT_TEXTS","done","JoyrideOptionsService","stepDefaultPosition","logsEnabled","showCounter","showPrevButton","stepsOrder","setOptions","options","steps","firstStep","startWith","waitingTime","customTexts","setCustomText","getBackdropColor","hexToRgb","getThemeColor","getStepDefaultPosition","getStepsOrder","getFirstStep","getWaitingTime","areLogsEnabled","isCounterVisible","isPrevButtonVisible","getCustomTexts","texts","toObservable","value","hex","shorthandRegex","replace","m","r","g","b","result","exec","parseInt","ɵfac","JoyrideOptionsService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","ngDevMode","ɵsetClassMetadata","type","JOYRIDE","LoggerService","optionService","debug","data","console","info","warn","error","LoggerService_Factory","ɵɵinject","ROUTE_SEPARATOR","Step","StepActionType","JoyrideStepsContainerService","stepOptions","logger","tempSteps","currentStepIndex","stepHasBeenModified","getFirstStepIndex","stepIds","index","indexOf","undefined","init","forEach","stepId","push","id","step","addStep","stepToAdd","stepExist","filter","name","length","stepIndexToReplace","findIndex","get","action","NEXT","stepName","getStepName","stepFound","getStepRoute","stepID","stepRoute","includes","split","updatePosition","position","getStepIndex","getStepNumber","getStepsCount","map","JoyrideStepsContainerService_Factory","DomRefService","platformId","fakeDocument","body","documentElement","fakeWindow","document","navigator","getNativeWindow","window","getNativeDocument","DomRefService_Factory","decorators","args","TemplatesService","setPrevButton","template","_prevButton","getPrevButton","setNextButton","_nextButton","getNextButton","setDoneButton","_doneButton","getDoneButton","setCounter","_counter","getCounter","TemplatesService_Factory","NO_POSITION","JoyrideDirective","joyrideStepsContainer","viewContainerRef","domService","router","templateService","stepPosition","subscriptions","windowRef","ngAfterViewInit","prevTemplate","nextTemplate","doneTemplate","counterTemplate","targetViewContainer","setAsyncFields","stepContent","stepContentParams","nextClicked","prevCliked","tourDone","route","url","substr","transformCssStyle","getComputedStyle","element","nativeElement","transform","isElementOrAncestorFixed","isElementFixed","isAncestorsFixed","parentElement","ngOnChanges","changes","subscribe","nodeName","ngOnDestroy","sub","unsubscribe","JoyrideDirective_Factory","ɵɵdirectiveInject","ViewContainerRef","Router","ɵdir","ɵɵdefineDirective","selectors","inputs","nextStep","outputs","features","ɵɵNgOnChangesFeature","selector","JoyrideStepInfo","DocumentService","DOMService","setDocumentHeight","doc","elementsFromPoint","bind","getElementFixedTop","elementRef","getBoundingClientRect","top","getElementFixedLeft","left","getElementAbsoluteTop","scrollOffsets","getScrollOffsets","y","getElementAbsoluteLeft","x","documentHeight","calculateDocumentHeight","getDocumentHeight","isParentScrollable","getFirstScrollableParent","isElementBeyondOthers","keywordToDiscard","x1","y1","x2","width","y2","height","elements1","elements2","getFirstElementWithoutKeyword","scrollIntoView","firstScrollableParent","scrollTo","scrollTop","scrollToTheTop","scrollToTheBottom","scrollHeight","clientHeight","node","regex","style","prop","getPropertyValue","scroll","test","scrollparent","parentNode","documentRef","Math","max","offsetHeight","winReference","docReference","pageXOffset","pageYOffset","compatMode","scrollLeft","parents","parent","elem","elementFromPoint","pointerEvents","elements","keyword","classList","toString","shift","DocumentService_Factory","JoyrideBackdropService","documentService","optionsService","rendererFactory","lastXScroll","lastYScroll","setRenderer","renderer","createRenderer","draw","targetAbsoluteTop","getTargetTotalTop","targetAbsoluteLeft","getTargetTotalLeft","currentBackdropContainer","createElement","addClass","setStyle","setAttribute","backdropContent","appendChild","backdropTop","backdropMiddleContainer","backdropMiddleContent","leftBackdrop","targetBackdrop","offsetWidth","rightBackdrop","backdropBottom","removeLastBackdrop","drawCurrentBackdrop","lastBackdropContainer","remove","redrawTarget","handleVerticalScroll","handleHorizontalScroll","targetVC","redraw","scrollY","scrollX","newBackdropLeftWidth","handleTargetPartialWidth","visibleTargetWidth","newBackdropTopHeight","handleTargetPartialHeight","visibleTargetHeight","removeChild","JoyrideBackdropService_Factory","RendererFactory2","Scroll","EventListenerService","scrollEvent","resizeEvent","startListeningScrollEvents","scrollUnlisten","listen","evt","startListeningResizeEvents","resizeUnlisten","stopListeningScrollEvents","stopListeningResizeEvents","EventListenerService_Factory","JoyrideArrowComponent","JoyrideArrowComponent_Factory","ɵcmp","ɵɵdefineComponent","decls","vars","JoyrideArrowComponent_Template","ɵɵclassProp","styles","encapsulation","None","JoyrideCloseButtonComponent","JoyrideCloseButtonComponent_Factory","consts","JoyrideCloseButtonComponent_Template","ɵɵnamespaceSVG","JoyrideButtonComponent","clicked","onClick","emit","JoyrideButtonComponent_Factory","color","ngContentSelectors","JoyrideButtonComponent_Template","ɵɵprojectionDef","JoyrideButtonComponent_Template_button_mouseleave_0_listener","hover","JoyrideButtonComponent_Template_button_mouseover_0_listener","JoyrideButtonComponent_Template_button_click_0_listener","ɵɵprojection","ɵɵpureFunction3","directives","NgStyle","STEP_MIN_WIDTH","STEP_MAX_WIDTH","CUSTOM_STEP_MAX_WIDTH_VW","STEP_HEIGHT","ASPECT_RATIO","DEFAULT_DISTANCE_FROM_MARGIN_TOP","DEFAULT_DISTANCE_FROM_MARGIN_LEFT","DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM","DEFAULT_DISTANCE_FROM_MARGIN_RIGHT","KEY_CODE","JoyrideStepComponent","injector","stepsContainerService","eventListenerService","stepWidth","stepHeight","showArrow","arrowSize","ARROW_SIZE","ngOnInit","joyrideStepService","JoyrideStepService","subscribeToResizeEvents","asObservable","setCustomTemplates","setCustomTexts","val","checkRedraw","isCustomized","stepContainer","updateStepDimensions","dimensions","getDimensionsByAspectRatio","clientWidth","adjustDimensions","drawStep","setTimeout","redrawStep","customeTexts","stepHolder","targetWidth","targetHeight","setStepStyle","numberOfSteps","total","customContent","keyEvent","event","log","keyCode","RIGHT_ARROW","isLastStep","LEFT_ARROW","ESCAPE_KEY","isFirstStep","setStyleTop","setStyleBottom","setStyleRight","setStyleLeft","setStyleCenter","topPosition","DISTANCE_FROM_TARGET","stepAbsoluteTop","leftPosition","stepAbsoluteLeft","adjustLeftPosition","adjustRightPosition","autofixTopPosition","adjustTopPosition","adjustBottomPosition","autofixRightPosition","autofixBottomPosition","autofixLeftPosition","currentWindowWidth","newLeftPos","deltaLeftPosition","newTopPos","deltaTopPosition","positionAlreadyFixed","aspectRatio","calcHeight","calcWidth","area","newWidth","newHeight","subscription","JoyrideStepComponent_Factory","Injector","Renderer2","viewQuery","JoyrideStepComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","hostBindings","JoyrideStepComponent_HostBindings","JoyrideStepComponent_keyup_HostBindingHandler","$event","ɵɵresolveWindow","JoyrideStepComponent_Template","JoyrideStepComponent_Template_joy_close_button_click_5_listener","_r4","_r9","NgIf","NgTemplateOutlet","pipes","AsyncPipe","static","StepDrawerService","componentFactoryResolver","appRef","refMap","ref","resolveComponentFactory","create","attachView","hostView","domElem","rootNodes","instance","changeDetectorRef","detectChanges","stepInstance","detachView","destroy","StepDrawerService_Factory","ComponentFactoryResolver","ApplicationRef","SCROLLBAR_SIZE","backDropService","eventListener","stepDrawerService","winTopPosition","winBottomPosition","stepsObserver","initViewportPositions","subscribeToScrollEvents","innerHeight","currentStep","startTour","tryShowStep","subscribeToStepsUpdates","removeCurrentStep","notifyTourIsFinished","PREV","navigateToStepPage","navigate","updatedStep","actionType","timeout","showStep","notifyStepClicked","scrollIfElementBeyondOtherElements","scrollIfStepAndTargetAreNotVisible","stepInfo","number","complete","scrollWhenTargetOrStepAreHiddenBottom","scrollWhenTargetOrStepAreHiddenTop","totalTargetBottom","getMaxTargetAndStepBottomPosition","scrollBy","totalTargetTop","getMaxTargetAndStepTopPosition","min","JoyrideStepService_Factory","JoyrideService","stepService","tourInProgress","tour$","pipe","closeTour","isTourInProgress","JoyrideService_Factory","routerModuleForChild","forChild","JoyrideModule","forRoot","ngModule","providers","JoyrideModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","declarations","exports"],"sources":["D:/Angular/angular/cuba/node_modules/ngx-joyride/fesm2020/ngx-joyride.mjs","D:/Angular/angular/cuba/projects/ngx-joyride/src/lib/components/step/joyride-step.component.html","D:/Angular/angular/cuba/projects/ngx-joyride/src/lib/components/arrow/arrow.component.html","D:/Angular/angular/cuba/projects/ngx-joyride/src/lib/components/button/button.component.html"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, PLATFORM_ID, Inject, EventEmitter, Directive, Input, Output, Component, ViewEncapsulation, ViewChild, HostListener, NgModule } from '@angular/core';\nimport * as i10 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { ReplaySubject, of, Observable, Subject } from 'rxjs';\nimport * as i3 from '@angular/router';\nimport { RouterModule } from '@angular/router';\nimport { finalize } from 'rxjs/operators';\n\nclass JoyrideStep {\n    constructor() {\n        this.title = new ReplaySubject();\n        this.text = new ReplaySubject();\n    }\n}\n\nclass JoyrideError extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, JoyrideError.prototype);\n    }\n}\nclass JoyrideStepDoesNotExist extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, JoyrideStepDoesNotExist.prototype);\n    }\n}\nclass JoyrideStepOutOfRange extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, JoyrideStepOutOfRange.prototype);\n    }\n}\n\nconst DEFAULT_THEME_COLOR = '#3b5560';\nconst STEP_DEFAULT_POSITION = 'bottom';\nconst DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;\nclass ObservableCustomTexts {\n}\nconst DEFAULT_TEXTS = {\n    prev: of('prev'),\n    next: of('next'),\n    done: of('done'),\n    close: of(null)\n};\nclass JoyrideOptionsService {\n    constructor() {\n        this.themeColor = DEFAULT_THEME_COLOR;\n        this.stepDefaultPosition = STEP_DEFAULT_POSITION;\n        this.logsEnabled = false;\n        this.showCounter = true;\n        this.showPrevButton = true;\n        this.stepsOrder = [];\n    }\n    setOptions(options) {\n        this.stepsOrder = options.steps;\n        this.stepDefaultPosition = options.stepDefaultPosition\n            ? options.stepDefaultPosition\n            : this.stepDefaultPosition;\n        this.logsEnabled =\n            typeof options.logsEnabled !== 'undefined'\n                ? options.logsEnabled\n                : this.logsEnabled;\n        this.showCounter =\n            typeof options.showCounter !== 'undefined'\n                ? options.showCounter\n                : this.showCounter;\n        this.showPrevButton =\n            typeof options.showPrevButton !== 'undefined'\n                ? options.showPrevButton\n                : this.showPrevButton;\n        this.themeColor = options.themeColor\n            ? options.themeColor\n            : this.themeColor;\n        this.firstStep = options.startWith;\n        this.waitingTime =\n            typeof options.waitingTime !== 'undefined'\n                ? options.waitingTime\n                : DEFAULT_TIMEOUT_BETWEEN_STEPS;\n        typeof options.customTexts !== 'undefined'\n            ? this.setCustomText(options.customTexts)\n            : this.setCustomText(DEFAULT_TEXTS);\n    }\n    getBackdropColor() {\n        return this.hexToRgb(this.themeColor);\n    }\n    getThemeColor() {\n        return this.themeColor;\n    }\n    getStepDefaultPosition() {\n        return this.stepDefaultPosition;\n    }\n    getStepsOrder() {\n        return this.stepsOrder;\n    }\n    getFirstStep() {\n        return this.firstStep;\n    }\n    getWaitingTime() {\n        return this.waitingTime;\n    }\n    areLogsEnabled() {\n        return this.logsEnabled;\n    }\n    isCounterVisible() {\n        return this.showCounter;\n    }\n    isPrevButtonVisible() {\n        return this.showPrevButton;\n    }\n    getCustomTexts() {\n        return this.customTexts;\n    }\n    setCustomText(texts) {\n        let prev;\n        let next;\n        let done;\n        let close;\n        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;\n        next = texts.next ? texts.next : DEFAULT_TEXTS.next;\n        done = texts.done ? texts.done : DEFAULT_TEXTS.done;\n        close = texts.close ? texts.close : DEFAULT_TEXTS.close;\n        this.customTexts = {\n            prev: this.toObservable(prev),\n            next: this.toObservable(next),\n            done: this.toObservable(done),\n            close: this.toObservable(close)\n        };\n    }\n    toObservable(value) {\n        return value instanceof Observable ? value : of(value);\n    }\n    hexToRgb(hex) {\n        const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hex = hex.replace(shorthandRegex, (m, r, g, b) => {\n            return r + r + g + g + b + b;\n        });\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result\n            ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`\n            : null;\n    }\n}\nJoyrideOptionsService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideOptionsService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideOptionsService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideOptionsService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideOptionsService, decorators: [{\n            type: Injectable\n        }] });\n\nconst JOYRIDE = 'ngx-joyride:::';\nclass LoggerService {\n    constructor(optionService) {\n        this.optionService = optionService;\n    }\n    debug(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.debug(JOYRIDE + message, data);\n        }\n    }\n    info(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.info(JOYRIDE + message, data);\n        }\n    }\n    warn(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.warn(JOYRIDE + message, data);\n        }\n    }\n    error(message, data = \"\") {\n        if (this.optionService.areLogsEnabled()) {\n            console.error(JOYRIDE + message, data);\n        }\n    }\n}\nLoggerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoggerService, deps: [{ token: JoyrideOptionsService }], target: i0.ɵɵFactoryTarget.Injectable });\nLoggerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoggerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: LoggerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: JoyrideOptionsService }]; } });\n\nconst ROUTE_SEPARATOR = '@';\nclass Step {\n}\nvar StepActionType;\n(function (StepActionType) {\n    StepActionType[\"NEXT\"] = \"NEXT\";\n    StepActionType[\"PREV\"] = \"PREV\";\n})(StepActionType || (StepActionType = {}));\nclass JoyrideStepsContainerService {\n    constructor(stepOptions, logger) {\n        this.stepOptions = stepOptions;\n        this.logger = logger;\n        this.tempSteps = [];\n        this.currentStepIndex = -2;\n        this.stepHasBeenModified = new Subject();\n    }\n    getFirstStepIndex() {\n        const firstStep = this.stepOptions.getFirstStep();\n        const stepIds = this.stepOptions.getStepsOrder();\n        let index = stepIds.indexOf(firstStep);\n        if (index < 0) {\n            index = 0;\n            if (firstStep !== undefined)\n                this.logger.warn(`The step ${firstStep} does not exist. Check in your step list if it's present.`);\n        }\n        return index;\n    }\n    init() {\n        this.logger.info('Initializing the steps array.');\n        this.steps = [];\n        this.currentStepIndex = this.getFirstStepIndex() - 1;\n        let stepIds = this.stepOptions.getStepsOrder();\n        stepIds.forEach(stepId => this.steps.push({ id: stepId, step: null }));\n    }\n    addStep(stepToAdd) {\n        let stepExist = this.tempSteps.filter(step => step.name === stepToAdd.name).length > 0;\n        if (!stepExist) {\n            this.logger.info(`Adding step ${stepToAdd.name} to the steps list.`);\n            this.tempSteps.push(stepToAdd);\n        }\n        else {\n            let stepIndexToReplace = this.tempSteps.findIndex(step => step.name === stepToAdd.name);\n            this.tempSteps[stepIndexToReplace] = stepToAdd;\n        }\n    }\n    get(action) {\n        if (action === StepActionType.NEXT)\n            this.currentStepIndex++;\n        else\n            this.currentStepIndex--;\n        if (this.currentStepIndex < 0 || this.currentStepIndex >= this.steps.length)\n            throw new JoyrideStepOutOfRange('The first or last step of the tour cannot be found!');\n        const stepName = this.getStepName(this.steps[this.currentStepIndex].id);\n        const index = this.tempSteps.findIndex(step => step.name === stepName);\n        let stepFound = this.tempSteps[index];\n        this.steps[this.currentStepIndex].step = stepFound;\n        if (stepFound == null) {\n            this.logger.warn(`Step ${this.steps[this.currentStepIndex].id} not found in the DOM. Check if it's hidden by *ngIf directive.`);\n        }\n        return stepFound;\n    }\n    getStepRoute(action) {\n        let stepID;\n        if (action === StepActionType.NEXT) {\n            stepID = this.steps[this.currentStepIndex + 1] ? this.steps[this.currentStepIndex + 1].id : null;\n        }\n        else {\n            stepID = this.steps[this.currentStepIndex - 1] ? this.steps[this.currentStepIndex - 1].id : null;\n        }\n        let stepRoute = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[1] : '';\n        return stepRoute;\n    }\n    updatePosition(stepName, position) {\n        let index = this.getStepIndex(stepName);\n        if (this.steps[index].step) {\n            this.steps[index].step.position = position;\n            this.stepHasBeenModified.next(this.steps[index].step);\n        }\n        else {\n            this.logger.warn(`Trying to modify the position of ${stepName} to ${position}. Step not found!Is this step located in a different route?`);\n        }\n    }\n    getStepNumber(stepName) {\n        return this.getStepIndex(stepName) + 1;\n    }\n    getStepsCount() {\n        let stepsOrder = this.stepOptions.getStepsOrder();\n        return stepsOrder.length;\n    }\n    getStepIndex(stepName) {\n        const index = this.steps\n            .map(step => (step.id.includes(ROUTE_SEPARATOR) ? step.id.split(ROUTE_SEPARATOR)[0] : step.id))\n            .findIndex(name => stepName === name);\n        if (index === -1)\n            throw new JoyrideError(`The step with name: ${stepName} does not exist in the step list.`);\n        return index;\n    }\n    getStepName(stepID) {\n        let stepName = stepID && stepID.includes(ROUTE_SEPARATOR) ? stepID.split(ROUTE_SEPARATOR)[0] : stepID;\n        return stepName;\n    }\n}\nJoyrideStepsContainerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepsContainerService, deps: [{ token: JoyrideOptionsService }, { token: LoggerService }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideStepsContainerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepsContainerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepsContainerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: JoyrideOptionsService }, { type: LoggerService }]; } });\n\nclass DomRefService {\n    constructor(platformId) {\n        this.platformId = platformId;\n        this.fakeDocument = { body: {}, documentElement: {} };\n        this.fakeWindow = { document: this.fakeDocument, navigator: {} };\n    }\n    getNativeWindow() {\n        if (isPlatformBrowser(this.platformId))\n            return window;\n        else\n            return this.fakeWindow;\n    }\n    getNativeDocument() {\n        if (isPlatformBrowser(this.platformId))\n            return document;\n        else\n            return this.fakeDocument;\n    }\n}\nDomRefService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DomRefService, deps: [{ token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\nDomRefService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DomRefService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DomRefService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; } });\n\nclass TemplatesService {\n    setPrevButton(template) {\n        this._prevButton = template;\n    }\n    getPrevButton() {\n        return this._prevButton;\n    }\n    setNextButton(template) {\n        this._nextButton = template;\n    }\n    getNextButton() {\n        return this._nextButton;\n    }\n    setDoneButton(template) {\n        this._doneButton = template;\n    }\n    getDoneButton() {\n        return this._doneButton;\n    }\n    setCounter(template) {\n        this._counter = template;\n    }\n    getCounter() {\n        return this._counter;\n    }\n}\nTemplatesService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: TemplatesService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nTemplatesService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: TemplatesService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: TemplatesService, decorators: [{\n            type: Injectable\n        }] });\n\nconst NO_POSITION = 'NO_POSITION';\nclass JoyrideDirective {\n    constructor(joyrideStepsContainer, viewContainerRef, domService, router, templateService, platformId) {\n        this.joyrideStepsContainer = joyrideStepsContainer;\n        this.viewContainerRef = viewContainerRef;\n        this.domService = domService;\n        this.router = router;\n        this.templateService = templateService;\n        this.platformId = platformId;\n        this.stepPosition = NO_POSITION;\n        this.prev = new EventEmitter();\n        this.next = new EventEmitter();\n        this.done = new EventEmitter();\n        this.subscriptions = [];\n        this.windowRef = this.domService.getNativeWindow();\n        this.step = new JoyrideStep();\n    }\n    ngAfterViewInit() {\n        if (!isPlatformBrowser(this.platformId))\n            return;\n        if (this.prevTemplate)\n            this.templateService.setPrevButton(this.prevTemplate);\n        if (this.nextTemplate)\n            this.templateService.setNextButton(this.nextTemplate);\n        if (this.doneTemplate)\n            this.templateService.setDoneButton(this.doneTemplate);\n        if (this.counterTemplate)\n            this.templateService.setCounter(this.counterTemplate);\n        this.step.position = this.stepPosition;\n        this.step.targetViewContainer = this.viewContainerRef;\n        this.setAsyncFields(this.step);\n        this.step.stepContent = this.stepContent;\n        this.step.stepContentParams = this.stepContentParams;\n        this.step.nextClicked = this.next;\n        this.step.prevCliked = this.prev;\n        this.step.tourDone = this.done;\n        if (!this.name)\n            throw new JoyrideError(\"All the steps should have the 'joyrideStep' property set with a custom name.\");\n        this.step.name = this.name;\n        this.step.route = this.router.url.substr(0, 1) === '/' ? this.router.url.substr(1) : this.router.url;\n        this.step.transformCssStyle = this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform;\n        this.step.isElementOrAncestorFixed =\n            this.isElementFixed(this.viewContainerRef.element) ||\n                this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement);\n        this.joyrideStepsContainer.addStep(this.step);\n    }\n    ngOnChanges(changes) {\n        if (changes['title'] || changes['text']) {\n            this.setAsyncFields(this.step);\n        }\n    }\n    isElementFixed(element) {\n        return this.windowRef.getComputedStyle(element.nativeElement).position === 'fixed';\n    }\n    setAsyncFields(step) {\n        if (this.title instanceof Observable) {\n            this.subscriptions.push(this.title.subscribe(title => {\n                step.title.next(title);\n            }));\n        }\n        else {\n            step.title.next(this.title);\n        }\n        if (this.text instanceof Observable) {\n            this.subscriptions.push(this.text.subscribe(text => {\n                step.text.next(text);\n            }));\n        }\n        else {\n            step.text.next(this.text);\n        }\n    }\n    isAncestorsFixed(nativeElement) {\n        if (!nativeElement || !nativeElement.parentElement)\n            return false;\n        let isElementFixed = this.windowRef.getComputedStyle(nativeElement.parentElement).position === 'fixed';\n        if (nativeElement.nodeName === 'BODY') {\n            return isElementFixed;\n        }\n        if (isElementFixed)\n            return true;\n        else\n            return this.isAncestorsFixed(nativeElement.parentElement);\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach(sub => {\n            sub.unsubscribe();\n        });\n    }\n}\nJoyrideDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideDirective, deps: [{ token: JoyrideStepsContainerService }, { token: i0.ViewContainerRef }, { token: DomRefService }, { token: i3.Router }, { token: TemplatesService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Directive });\nJoyrideDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideDirective, selector: \"joyrideStep, [joyrideStep]\", inputs: { name: [\"joyrideStep\", \"name\"], nextStep: \"nextStep\", title: \"title\", text: \"text\", stepPosition: \"stepPosition\", stepContent: \"stepContent\", stepContentParams: \"stepContentParams\", prevTemplate: \"prevTemplate\", nextTemplate: \"nextTemplate\", doneTemplate: \"doneTemplate\", counterTemplate: \"counterTemplate\" }, outputs: { prev: \"prev\", next: \"next\", done: \"done\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'joyrideStep, [joyrideStep]'\n                }]\n        }], ctorParameters: function () { return [{ type: JoyrideStepsContainerService }, { type: i0.ViewContainerRef }, { type: DomRefService }, { type: i3.Router }, { type: TemplatesService }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; }, propDecorators: { name: [{\n                type: Input,\n                args: ['joyrideStep']\n            }], nextStep: [{\n                type: Input\n            }], title: [{\n                type: Input\n            }], text: [{\n                type: Input\n            }], stepPosition: [{\n                type: Input\n            }], stepContent: [{\n                type: Input\n            }], stepContentParams: [{\n                type: Input\n            }], prevTemplate: [{\n                type: Input\n            }], nextTemplate: [{\n                type: Input\n            }], doneTemplate: [{\n                type: Input\n            }], counterTemplate: [{\n                type: Input\n            }], prev: [{\n                type: Output\n            }], next: [{\n                type: Output\n            }], done: [{\n                type: Output\n            }] } });\n\nclass JoyrideStepInfo {\n}\n\nclass DocumentService {\n    constructor(DOMService, platformId) {\n        this.DOMService = DOMService;\n        if (!isPlatformBrowser(platformId)) {\n            return;\n        }\n        this.setDocumentHeight();\n        var doc = DOMService.getNativeDocument();\n        if (doc && !doc.elementsFromPoint) {\n            // IE 11 - Edge browsers\n            doc.elementsFromPoint = this.elementsFromPoint.bind(this);\n        }\n    }\n    getElementFixedTop(elementRef) {\n        return elementRef.nativeElement.getBoundingClientRect().top;\n    }\n    getElementFixedLeft(elementRef) {\n        return elementRef.nativeElement.getBoundingClientRect().left;\n    }\n    getElementAbsoluteTop(elementRef) {\n        const scrollOffsets = this.getScrollOffsets();\n        return (elementRef.nativeElement.getBoundingClientRect().top +\n            scrollOffsets.y);\n    }\n    getElementAbsoluteLeft(elementRef) {\n        const scrollOffsets = this.getScrollOffsets();\n        return (elementRef.nativeElement.getBoundingClientRect().left +\n            scrollOffsets.x);\n    }\n    setDocumentHeight() {\n        this.documentHeight = this.calculateDocumentHeight();\n    }\n    getDocumentHeight() {\n        return this.documentHeight;\n    }\n    isParentScrollable(elementRef) {\n        return (this.getFirstScrollableParent(elementRef.nativeElement) !==\n            this.DOMService.getNativeDocument().body);\n    }\n    isElementBeyondOthers(elementRef, isElementFixed, keywordToDiscard) {\n        const x1 = isElementFixed\n            ? this.getElementFixedLeft(elementRef)\n            : this.getElementAbsoluteLeft(elementRef);\n        const y1 = isElementFixed\n            ? this.getElementFixedTop(elementRef)\n            : this.getElementAbsoluteTop(elementRef);\n        const x2 = x1 + elementRef.nativeElement.getBoundingClientRect().width - 1;\n        const y2 = y1 + elementRef.nativeElement.getBoundingClientRect().height - 1;\n        const elements1 = this.DOMService.getNativeDocument().elementsFromPoint(x1, y1);\n        const elements2 = this.DOMService.getNativeDocument().elementsFromPoint(x2, y2);\n        if (elements1.length === 0 && elements2.length === 0)\n            return 1;\n        if (this.getFirstElementWithoutKeyword(elements1, keywordToDiscard) !==\n            elementRef.nativeElement ||\n            this.getFirstElementWithoutKeyword(elements2, keywordToDiscard) !==\n                elementRef.nativeElement) {\n            return 2;\n        }\n        return 3;\n    }\n    scrollIntoView(elementRef, isElementFixed) {\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n        const top = isElementFixed\n            ? this.getElementFixedTop(elementRef)\n            : this.getElementAbsoluteTop(elementRef);\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n            if (firstScrollableParent.scrollTo) {\n                firstScrollableParent.scrollTo(0, top - 150);\n            }\n            else {\n                // IE 11 - Edge browsers\n                firstScrollableParent.scrollTop = top - 150;\n            }\n        }\n        else {\n            this.DOMService.getNativeWindow().scrollTo(0, top - 150);\n        }\n    }\n    scrollToTheTop(elementRef) {\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n            if (firstScrollableParent.scrollTo) {\n                firstScrollableParent.scrollTo(0, 0);\n            }\n            else {\n                // IE 11 - Edge browsers\n                firstScrollableParent.scrollTop = 0;\n            }\n        }\n        else {\n            this.DOMService.getNativeWindow().scrollTo(0, 0);\n        }\n    }\n    scrollToTheBottom(elementRef) {\n        const firstScrollableParent = this.getFirstScrollableParent(elementRef.nativeElement);\n        if (firstScrollableParent !== this.DOMService.getNativeDocument().body) {\n            if (firstScrollableParent.scrollTo) {\n                firstScrollableParent.scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n            }\n            else {\n                // IE 11 - Edge browsers\n                firstScrollableParent.scrollTop =\n                    firstScrollableParent.scrollHeight -\n                        firstScrollableParent.clientHeight;\n            }\n        }\n        else {\n            this.DOMService.getNativeWindow().scrollTo(0, this.DOMService.getNativeDocument().body.scrollHeight);\n        }\n    }\n    getFirstScrollableParent(node) {\n        const regex = /(auto|scroll|overlay)/;\n        const style = (node, prop) => this.DOMService.getNativeWindow()\n            .getComputedStyle(node, null)\n            .getPropertyValue(prop);\n        const scroll = (node) => regex.test(style(node, 'overflow') +\n            style(node, 'overflow-y') +\n            style(node, 'overflow-x'));\n        const scrollparent = (node) => {\n            return !node || node === this.DOMService.getNativeDocument().body\n                ? this.DOMService.getNativeDocument().body\n                : scroll(node)\n                    ? node\n                    : scrollparent(node.parentNode);\n        };\n        return scrollparent(node);\n    }\n    calculateDocumentHeight() {\n        const documentRef = this.DOMService.getNativeDocument();\n        return Math.max(documentRef.body.scrollHeight, documentRef.documentElement.scrollHeight, documentRef.body.offsetHeight, documentRef.documentElement.offsetHeight, documentRef.body.clientHeight, documentRef.documentElement.clientHeight);\n    }\n    getScrollOffsets() {\n        const winReference = this.DOMService.getNativeWindow();\n        const docReference = this.DOMService.getNativeDocument();\n        // This works for all browsers except IE versions 8 and before\n        if (winReference.pageXOffset != null)\n            return { x: winReference.pageXOffset, y: winReference.pageYOffset };\n        // For IE (or any browser) in Standards mode\n        if (docReference.compatMode == 'CSS1Compat')\n            return {\n                x: docReference.documentElement.scrollLeft,\n                y: docReference.documentElement.scrollTop\n            };\n        // For browsers in Quirks mode\n        return {\n            x: docReference.body.scrollLeft,\n            y: docReference.body.scrollTop\n        };\n    }\n    elementsFromPoint(x, y) {\n        var parents = [];\n        var parent = void 0;\n        do {\n            const elem = this.DOMService.getNativeDocument().elementFromPoint(x, y);\n            if (elem && parent !== elem) {\n                parent = elem;\n                parents.push(parent);\n                parent.style.pointerEvents = 'none';\n            }\n            else {\n                parent = false;\n            }\n        } while (parent);\n        parents.forEach(function (parent) {\n            return (parent.style.pointerEvents = 'all');\n        });\n        return parents;\n    }\n    getFirstElementWithoutKeyword(elements, keyword) {\n        while (elements[0] &&\n            elements[0].classList.toString().includes(keyword)) {\n            elements.shift();\n        }\n        return elements[0];\n    }\n}\nDocumentService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DocumentService, deps: [{ token: DomRefService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\nDocumentService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DocumentService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: DocumentService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: DomRefService }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }]; } });\n\nclass JoyrideBackdropService {\n    constructor(documentService, optionsService, rendererFactory) {\n        this.documentService = documentService;\n        this.optionsService = optionsService;\n        this.rendererFactory = rendererFactory;\n        this.lastXScroll = 0;\n        this.lastYScroll = 0;\n        this.setRenderer();\n    }\n    setRenderer() {\n        this.renderer = this.rendererFactory.createRenderer(null, null);\n    }\n    draw(step) {\n        this.elementRef = step.targetViewContainer;\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n        this.currentBackdropContainer = this.renderer.createElement('div');\n        this.renderer.addClass(this.currentBackdropContainer, 'backdrop-container');\n        this.renderer.setStyle(this.currentBackdropContainer, 'position', 'fixed');\n        this.renderer.setStyle(this.currentBackdropContainer, 'top', '0px');\n        this.renderer.setStyle(this.currentBackdropContainer, 'left', '0px');\n        this.renderer.setStyle(this.currentBackdropContainer, 'width', '100%');\n        this.renderer.setStyle(this.currentBackdropContainer, 'height', '100%');\n        this.renderer.setStyle(this.currentBackdropContainer, 'z-index', '1000');\n        this.renderer.setAttribute(this.currentBackdropContainer, 'id', 'backdrop-' + step.name);\n        this.backdropContent = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropContent, 'backdrop-content');\n        this.renderer.setStyle(this.backdropContent, 'position', 'relative');\n        this.renderer.setStyle(this.backdropContent, 'height', '100%');\n        this.renderer.setStyle(this.backdropContent, 'display', 'flex');\n        this.renderer.setStyle(this.backdropContent, 'flex-direction', 'column');\n        this.renderer.appendChild(this.currentBackdropContainer, this.backdropContent);\n        this.backdropTop = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropTop, 'joyride-backdrop');\n        this.renderer.addClass(this.backdropTop, 'backdrop-top');\n        this.renderer.setStyle(this.backdropTop, 'width', '100%');\n        this.renderer.setStyle(this.backdropTop, 'height', this.targetAbsoluteTop - this.lastYScroll + 'px');\n        this.renderer.setStyle(this.backdropTop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.backdropTop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropContent, this.backdropTop);\n        this.backdropMiddleContainer = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropMiddleContainer, 'backdrop-middle-container');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'width', '100%');\n        this.renderer.setStyle(this.backdropMiddleContainer, 'flex-shrink', '0');\n        this.renderer.appendChild(this.backdropContent, this.backdropMiddleContainer);\n        this.backdropMiddleContent = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropMiddleContent, 'backdrop-middle-content');\n        this.renderer.setStyle(this.backdropMiddleContent, 'display', 'flex');\n        this.renderer.setStyle(this.backdropMiddleContent, 'width', '100%');\n        this.renderer.setStyle(this.backdropMiddleContent, 'height', '100%');\n        this.renderer.appendChild(this.backdropMiddleContainer, this.backdropMiddleContent);\n        this.leftBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.leftBackdrop, 'joyride-backdrop');\n        this.renderer.addClass(this.leftBackdrop, 'backdrop-left');\n        this.renderer.setStyle(this.leftBackdrop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.leftBackdrop, 'width', this.targetAbsoluteLeft - this.lastXScroll + 'px');\n        this.renderer.setStyle(this.leftBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropMiddleContent, this.leftBackdrop);\n        this.targetBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.targetBackdrop, 'backdrop-target');\n        this.renderer.setStyle(this.targetBackdrop, 'flex-shrink', '0');\n        this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n        this.renderer.appendChild(this.backdropMiddleContent, this.targetBackdrop);\n        this.rightBackdrop = this.renderer.createElement('div');\n        this.renderer.addClass(this.rightBackdrop, 'joyride-backdrop');\n        this.renderer.addClass(this.rightBackdrop, 'backdrop-right');\n        this.renderer.setStyle(this.rightBackdrop, 'width', '100%');\n        this.renderer.setStyle(this.rightBackdrop, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropMiddleContent, this.rightBackdrop);\n        this.backdropBottom = this.renderer.createElement('div');\n        this.renderer.addClass(this.backdropBottom, 'joyride-backdrop');\n        this.renderer.addClass(this.backdropBottom, 'backdrop-bottom');\n        this.renderer.setStyle(this.backdropBottom, 'width', '100%');\n        this.renderer.setStyle(this.backdropBottom, 'height', '100%');\n        this.renderer.setStyle(this.backdropBottom, 'background-color', `rgba(${this.optionsService.getBackdropColor()}, 0.7)`);\n        this.renderer.appendChild(this.backdropContent, this.backdropBottom);\n        this.removeLastBackdrop();\n        this.drawCurrentBackdrop();\n        this.lastBackdropContainer = this.currentBackdropContainer;\n    }\n    remove() {\n        this.removeLastBackdrop();\n    }\n    redrawTarget(step) {\n        this.targetAbsoluteLeft = this.getTargetTotalLeft(step);\n        this.targetAbsoluteTop = this.getTargetTotalTop(step);\n        this.handleVerticalScroll(step);\n        this.handleHorizontalScroll(step);\n    }\n    getTargetTotalTop(step) {\n        let targetVC = step.targetViewContainer;\n        return step.isElementOrAncestorFixed\n            ? this.documentService.getElementFixedTop(targetVC.element)\n            : this.documentService.getElementAbsoluteTop(targetVC.element);\n    }\n    getTargetTotalLeft(step) {\n        let targetVC = step.targetViewContainer;\n        return step.isElementOrAncestorFixed\n            ? this.documentService.getElementFixedLeft(targetVC.element)\n            : this.documentService.getElementAbsoluteLeft(targetVC.element);\n    }\n    redraw(step, scroll) {\n        if (this.lastYScroll !== scroll.scrollY) {\n            this.lastYScroll = scroll.scrollY;\n            if (this.elementRef) {\n                this.handleVerticalScroll(step);\n            }\n        }\n        if (this.lastXScroll !== scroll.scrollX) {\n            this.lastXScroll = scroll.scrollX;\n            if (this.elementRef) {\n                this.handleHorizontalScroll(step);\n            }\n        }\n    }\n    handleHorizontalScroll(step) {\n        let newBackdropLeftWidth = step.isElementOrAncestorFixed ? this.targetAbsoluteLeft : this.targetAbsoluteLeft - this.lastXScroll;\n        if (newBackdropLeftWidth >= 0) {\n            this.renderer.setStyle(this.leftBackdrop, 'width', newBackdropLeftWidth + 'px');\n            this.renderer.setStyle(this.targetBackdrop, 'width', this.elementRef.element.nativeElement.offsetWidth + 'px');\n        }\n        else {\n            this.handleTargetPartialWidth(newBackdropLeftWidth);\n        }\n    }\n    handleTargetPartialWidth(newBackdropLeftWidth) {\n        this.renderer.setStyle(this.leftBackdrop, 'width', 0 + 'px');\n        let visibleTargetWidth = this.elementRef.element.nativeElement.offsetWidth + newBackdropLeftWidth;\n        if (visibleTargetWidth >= 0) {\n            this.renderer.setStyle(this.targetBackdrop, 'width', visibleTargetWidth + 'px');\n        }\n        else {\n            this.renderer.setStyle(this.targetBackdrop, 'width', 0 + 'px');\n        }\n    }\n    handleVerticalScroll(step) {\n        let newBackdropTopHeight = step.isElementOrAncestorFixed ? this.targetAbsoluteTop : this.targetAbsoluteTop - this.lastYScroll;\n        if (newBackdropTopHeight >= 0) {\n            this.renderer.setStyle(this.backdropTop, 'height', newBackdropTopHeight + 'px');\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', this.elementRef.element.nativeElement.offsetHeight + 'px');\n        }\n        else {\n            this.handleTargetPartialHeight(newBackdropTopHeight);\n        }\n    }\n    handleTargetPartialHeight(newBackdropTopHeight) {\n        this.renderer.setStyle(this.backdropTop, 'height', 0 + 'px');\n        let visibleTargetHeight = this.elementRef.element.nativeElement.offsetHeight + newBackdropTopHeight;\n        if (visibleTargetHeight >= 0) {\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', visibleTargetHeight + 'px');\n        }\n        else {\n            this.renderer.setStyle(this.backdropMiddleContainer, 'height', 0 + 'px');\n        }\n    }\n    removeLastBackdrop() {\n        if (this.lastBackdropContainer) {\n            this.renderer.removeChild(document.body, this.lastBackdropContainer);\n            this.lastBackdropContainer = undefined;\n        }\n    }\n    drawCurrentBackdrop() {\n        this.renderer.appendChild(document.body, this.currentBackdropContainer);\n    }\n}\nJoyrideBackdropService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideBackdropService, deps: [{ token: DocumentService }, { token: JoyrideOptionsService }, { token: i0.RendererFactory2 }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideBackdropService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideBackdropService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideBackdropService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: DocumentService }, { type: JoyrideOptionsService }, { type: i0.RendererFactory2 }]; } });\n\nclass Scroll {\n}\nclass EventListenerService {\n    constructor(rendererFactory, DOMService) {\n        this.rendererFactory = rendererFactory;\n        this.DOMService = DOMService;\n        this.scrollEvent = new Subject();\n        this.resizeEvent = new Subject();\n        this.renderer = rendererFactory.createRenderer(null, null);\n    }\n    startListeningScrollEvents() {\n        this.scrollUnlisten = this.renderer.listen('document', 'scroll', evt => {\n            this.scrollEvent.next({\n                scrollX: this.DOMService.getNativeWindow().pageXOffset,\n                scrollY: this.DOMService.getNativeWindow().pageYOffset\n            });\n        });\n    }\n    startListeningResizeEvents() {\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', evt => {\n            this.resizeEvent.next(evt);\n        });\n    }\n    stopListeningScrollEvents() {\n        this.scrollUnlisten();\n    }\n    stopListeningResizeEvents() {\n        this.resizeUnlisten();\n    }\n}\nEventListenerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: EventListenerService, deps: [{ token: i0.RendererFactory2 }, { token: DomRefService }], target: i0.ɵɵFactoryTarget.Injectable });\nEventListenerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: EventListenerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: EventListenerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i0.RendererFactory2 }, { type: DomRefService }]; } });\n\nclass JoyrideArrowComponent {\n    constructor() {\n        this.position = 'top';\n    }\n}\nJoyrideArrowComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideArrowComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nJoyrideArrowComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideArrowComponent, selector: \"joyride-arrow\", inputs: { position: \"position\" }, ngImport: i0, template: \"<div [class.joyride-arrow__top]=\\\"position == 'top'\\\"\\n     [class.joyride-arrow__bottom]=\\\"position == 'bottom'\\\"\\n     [class.joyride-arrow__left]=\\\"position == 'left'\\\"\\n     [class.joyride-arrow__right]=\\\"position == 'right'\\\">\\n</div>\", styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideArrowComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'joyride-arrow', encapsulation: ViewEncapsulation.None, template: \"<div [class.joyride-arrow__top]=\\\"position == 'top'\\\"\\n     [class.joyride-arrow__bottom]=\\\"position == 'bottom'\\\"\\n     [class.joyride-arrow__left]=\\\"position == 'left'\\\"\\n     [class.joyride-arrow__right]=\\\"position == 'right'\\\">\\n</div>\", styles: [\".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #ffffff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #ffffff}.joyride-arrow__right{border-left:11px solid #ffffff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #ffffff;border-top:11px solid transparent;border-bottom:11px solid transparent}\\n\"] }]\n        }], propDecorators: { position: [{\n                type: Input\n            }] } });\n\nclass JoyrideCloseButtonComponent {\n}\nJoyrideCloseButtonComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideCloseButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nJoyrideCloseButtonComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideCloseButtonComponent, selector: \"joy-close-button\", ngImport: i0, template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`, isInline: true });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideCloseButtonComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'joy-close-button',\n                    template: `<svg viewBox=\"0 0 25 25\" xmlns=\"http://www.w3.org/2000/svg\">\n                <line x1=\"1\" y1=\"24\" \n                    x2=\"24\" y2=\"1\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n                <line x1=\"1\" y1=\"1\" \n                    x2=\"24\" y2=\"24\" \n                    stroke=\"black\" \n                    stroke-width=\"3\"/>\n            </svg>`\n                }]\n        }] });\n\nclass JoyrideButtonComponent {\n    constructor() {\n        this.clicked = new EventEmitter();\n    }\n    onClick() {\n        this.clicked.emit();\n    }\n}\nJoyrideButtonComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nJoyrideButtonComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideButtonComponent, selector: \"joyride-button\", inputs: { color: \"color\" }, outputs: { clicked: \"clicked\" }, ngImport: i0, template: \"<button (mouseleave)=\\\"hover=false\\\" (mouseover)=\\\"hover=true\\\"\\n    [ngStyle]=\\\"{'background-color': hover ? '#fff' : color, \\n                'color': hover ? color : '#fff',\\n                'border-color' : hover ? color : 'transparent'}\\\"\\n    class=\\\"joyride-button\\\" (click)=\\\"onClick()\\\">\\n    <ng-content></ng-content>\\n</button>\", styles: [\".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\\n\"], directives: [{ type: i10.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideButtonComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'joyride-button', template: \"<button (mouseleave)=\\\"hover=false\\\" (mouseover)=\\\"hover=true\\\"\\n    [ngStyle]=\\\"{'background-color': hover ? '#fff' : color, \\n                'color': hover ? color : '#fff',\\n                'border-color' : hover ? color : 'transparent'}\\\"\\n    class=\\\"joyride-button\\\" (click)=\\\"onClick()\\\">\\n    <ng-content></ng-content>\\n</button>\", styles: [\".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:none;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}\\n\"] }]\n        }], propDecorators: { color: [{\n                type: Input\n            }], clicked: [{\n                type: Output\n            }] } });\n\nconst STEP_MIN_WIDTH = 200;\nconst STEP_MAX_WIDTH = 400;\nconst CUSTOM_STEP_MAX_WIDTH_VW = 90;\nconst STEP_HEIGHT = 200;\nconst ASPECT_RATIO = 1.212;\nconst DEFAULT_DISTANCE_FROM_MARGIN_TOP = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_LEFT = 2;\nconst DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM = 5;\nconst DEFAULT_DISTANCE_FROM_MARGIN_RIGHT = 5;\nvar KEY_CODE;\n(function (KEY_CODE) {\n    KEY_CODE[KEY_CODE[\"RIGHT_ARROW\"] = 39] = \"RIGHT_ARROW\";\n    KEY_CODE[KEY_CODE[\"LEFT_ARROW\"] = 37] = \"LEFT_ARROW\";\n    KEY_CODE[KEY_CODE[\"ESCAPE_KEY\"] = 27] = \"ESCAPE_KEY\";\n})(KEY_CODE || (KEY_CODE = {}));\nclass JoyrideStepComponent {\n    constructor(injector, stepsContainerService, eventListenerService, documentService, renderer, logger, optionsService, templateService) {\n        this.injector = injector;\n        this.stepsContainerService = stepsContainerService;\n        this.eventListenerService = eventListenerService;\n        this.documentService = documentService;\n        this.renderer = renderer;\n        this.logger = logger;\n        this.optionsService = optionsService;\n        this.templateService = templateService;\n        this.stepWidth = STEP_MIN_WIDTH;\n        this.stepHeight = STEP_HEIGHT;\n        this.showArrow = true;\n        this.arrowSize = ARROW_SIZE;\n        this.subscriptions = [];\n    }\n    ngOnInit() {\n        // Need to Inject here otherwise you will obtain a circular dependency\n        this.joyrideStepService = this.injector.get(JoyrideStepService);\n        this.documentHeight = this.documentService.getDocumentHeight();\n        this.subscriptions.push(this.subscribeToResizeEvents());\n        this.title = this.step.title.asObservable();\n        this.text = this.step.text.asObservable();\n        this.setCustomTemplates();\n        this.setCustomTexts();\n        this.counter = this.getCounter();\n        this.isCounterVisible = this.optionsService.isCounterVisible();\n        this.isPrevButtonVisible = this.optionsService.isPrevButtonVisible();\n        this.themeColor = this.optionsService.getThemeColor();\n        if (this.text)\n            this.text.subscribe(val => this.checkRedraw(val));\n        if (this.title)\n            this.title.subscribe(val => this.checkRedraw(val));\n    }\n    ngAfterViewInit() {\n        if (this.isCustomized()) {\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', CUSTOM_STEP_MAX_WIDTH_VW + 'vw');\n            this.updateStepDimensions();\n        }\n        else {\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'max-width', STEP_MAX_WIDTH + 'px');\n            let dimensions = this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth, this.stepContainer.nativeElement.clientHeight, ASPECT_RATIO);\n            dimensions = this.adjustDimensions(dimensions.width, dimensions.height);\n            this.stepWidth = dimensions.width;\n            this.stepHeight = dimensions.height;\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'width', this.stepWidth + 'px');\n            this.renderer.setStyle(this.stepContainer.nativeElement, 'height', this.stepHeight + 'px');\n        }\n        this.drawStep();\n    }\n    checkRedraw(val) {\n        if (val != null) {\n            // Need to wait that the change is rendered before redrawing\n            setTimeout(() => {\n                this.redrawStep();\n            }, 2);\n        }\n    }\n    isCustomized() {\n        return (this.step.stepContent ||\n            this.templateService.getCounter() ||\n            this.templateService.getPrevButton() ||\n            this.templateService.getNextButton() ||\n            this.templateService.getDoneButton());\n    }\n    setCustomTexts() {\n        const customeTexts = this.optionsService.getCustomTexts();\n        this.prevText = customeTexts.prev;\n        this.nextText = customeTexts.next;\n        this.doneText = customeTexts.done;\n    }\n    drawStep() {\n        let position = this.step.isElementOrAncestorFixed\n            ? 'fixed'\n            : 'absolute';\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', position);\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', this.step.transformCssStyle);\n        this.targetWidth = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width;\n        this.targetHeight = this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height;\n        this.targetAbsoluteLeft =\n            position === 'fixed'\n                ? this.documentService.getElementFixedLeft(this.step.targetViewContainer.element)\n                : this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element);\n        this.targetAbsoluteTop =\n            position === 'fixed'\n                ? this.documentService.getElementFixedTop(this.step.targetViewContainer.element)\n                : this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element);\n        this.setStepStyle();\n    }\n    getCounter() {\n        let stepPosition = this.stepsContainerService.getStepNumber(this.step.name);\n        let numberOfSteps = this.stepsContainerService.getStepsCount();\n        this.counterData = { step: stepPosition, total: numberOfSteps };\n        return stepPosition + '/' + numberOfSteps;\n    }\n    setCustomTemplates() {\n        this.customContent = this.step.stepContent;\n        this.ctx = this.step.stepContentParams;\n        this.customPrevButton = this.templateService.getPrevButton();\n        this.customNextButton = this.templateService.getNextButton();\n        this.customDoneButton = this.templateService.getDoneButton();\n        this.customCounter = this.templateService.getCounter();\n    }\n    keyEvent(event) {\n        console.log(event);\n        if (event.keyCode === KEY_CODE.RIGHT_ARROW) {\n            if (this.isLastStep()) {\n                this.close();\n            }\n            else {\n                this.next();\n            }\n        }\n        else if (event.keyCode === KEY_CODE.LEFT_ARROW) {\n            this.prev();\n        }\n        else if (event.keyCode === KEY_CODE.ESCAPE_KEY) {\n            this.close();\n        }\n    }\n    prev() {\n        this.joyrideStepService.prev();\n    }\n    next() {\n        this.joyrideStepService.next();\n    }\n    close() {\n        this.joyrideStepService.close();\n    }\n    isFirstStep() {\n        return this.stepsContainerService.getStepNumber(this.step.name) === 1;\n    }\n    isLastStep() {\n        return (this.stepsContainerService.getStepNumber(this.step.name) ===\n            this.stepsContainerService.getStepsCount());\n    }\n    setStepStyle() {\n        switch (this.step.position) {\n            case 'top': {\n                this.setStyleTop();\n                break;\n            }\n            case 'bottom': {\n                this.setStyleBottom();\n                break;\n            }\n            case 'right': {\n                this.setStyleRight();\n                break;\n            }\n            case 'left': {\n                this.setStyleLeft();\n                break;\n            }\n            case 'center': {\n                this.setStyleCenter();\n                break;\n            }\n            default: {\n                this.setStyleBottom();\n            }\n        }\n    }\n    setStyleTop() {\n        this.stepsContainerService.updatePosition(this.step.name, 'top');\n        this.topPosition =\n            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop - DISTANCE_FROM_TARGET - this.stepHeight;\n        this.arrowTopPosition = this.stepHeight;\n        this.leftPosition =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.stepAbsoluteLeft =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n        this.adjustLeftPosition();\n        this.adjustRightPosition();\n        this.arrowPosition = 'bottom';\n        this.autofixTopPosition();\n    }\n    setStyleRight() {\n        this.stepsContainerService.updatePosition(this.step.name, 'right');\n        this.topPosition =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n        this.leftPosition =\n            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n        this.stepAbsoluteLeft =\n            this.targetAbsoluteLeft + this.targetWidth + DISTANCE_FROM_TARGET;\n        this.arrowLeftPosition = -this.arrowSize;\n        this.adjustTopPosition();\n        this.adjustBottomPosition();\n        this.arrowPosition = 'left';\n        this.autofixRightPosition();\n    }\n    setStyleBottom() {\n        this.stepsContainerService.updatePosition(this.step.name, 'bottom');\n        this.topPosition =\n            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop + this.targetHeight + DISTANCE_FROM_TARGET;\n        this.arrowTopPosition = -this.arrowSize;\n        this.arrowLeftPosition = this.stepWidth / 2 - this.arrowSize;\n        this.leftPosition =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.stepAbsoluteLeft =\n            this.targetWidth / 2 - this.stepWidth / 2 + this.targetAbsoluteLeft;\n        this.adjustLeftPosition();\n        this.adjustRightPosition();\n        this.arrowPosition = 'top';\n        this.autofixBottomPosition();\n    }\n    setStyleLeft() {\n        this.stepsContainerService.updatePosition(this.step.name, 'left');\n        this.topPosition =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.stepAbsoluteTop =\n            this.targetAbsoluteTop +\n                this.targetHeight / 2 -\n                this.stepHeight / 2;\n        this.arrowTopPosition = this.stepHeight / 2 - this.arrowSize;\n        this.leftPosition =\n            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n        this.stepAbsoluteLeft =\n            this.targetAbsoluteLeft - this.stepWidth - DISTANCE_FROM_TARGET;\n        this.arrowLeftPosition = this.stepWidth;\n        this.adjustTopPosition();\n        this.adjustBottomPosition();\n        this.arrowPosition = 'right';\n        this.autofixLeftPosition();\n    }\n    setStyleCenter() {\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'position', 'fixed');\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'top', '50%');\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'left', '50%');\n        this.updateStepDimensions();\n        this.renderer.setStyle(this.stepHolder.nativeElement, 'transform', `translate(-${this.stepWidth / 2}px, -${this.stepHeight / 2}px)`);\n        this.showArrow = false;\n    }\n    adjustLeftPosition() {\n        if (this.leftPosition < 0) {\n            this.arrowLeftPosition =\n                this.arrowLeftPosition +\n                    this.leftPosition -\n                    DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n            this.leftPosition = DEFAULT_DISTANCE_FROM_MARGIN_LEFT;\n        }\n    }\n    adjustRightPosition() {\n        let currentWindowWidth = document.body.clientWidth;\n        if (this.stepAbsoluteLeft + this.stepWidth > currentWindowWidth) {\n            let newLeftPos = this.leftPosition -\n                (this.stepAbsoluteLeft +\n                    this.stepWidth +\n                    DEFAULT_DISTANCE_FROM_MARGIN_RIGHT -\n                    currentWindowWidth);\n            let deltaLeftPosition = newLeftPos - this.leftPosition;\n            this.leftPosition = newLeftPos;\n            this.arrowLeftPosition = this.arrowLeftPosition - deltaLeftPosition;\n        }\n    }\n    adjustTopPosition() {\n        if (this.stepAbsoluteTop < 0) {\n            this.arrowTopPosition =\n                this.arrowTopPosition +\n                    this.topPosition -\n                    DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n            this.topPosition = DEFAULT_DISTANCE_FROM_MARGIN_TOP;\n        }\n    }\n    adjustBottomPosition() {\n        if (this.stepAbsoluteTop + this.stepHeight > this.documentHeight) {\n            let newTopPos = this.topPosition -\n                (this.stepAbsoluteTop +\n                    this.stepHeight +\n                    DEFAULT_DISTANCE_FROM_MARGIN_BOTTOM -\n                    this.documentHeight);\n            let deltaTopPosition = newTopPos - this.topPosition;\n            this.topPosition = newTopPos;\n            this.arrowTopPosition = this.arrowTopPosition - deltaTopPosition;\n        }\n    }\n    autofixTopPosition() {\n        if (this.positionAlreadyFixed) {\n            this.logger.warn('No step positions found for this step. The step will be centered.');\n        }\n        else if (this.targetAbsoluteTop - this.stepHeight - this.arrowSize <\n            0) {\n            this.positionAlreadyFixed = true;\n            this.setStyleRight();\n        }\n    }\n    autofixRightPosition() {\n        if (this.targetAbsoluteLeft +\n            this.targetWidth +\n            this.stepWidth +\n            this.arrowSize >\n            document.body.clientWidth) {\n            this.setStyleBottom();\n        }\n    }\n    autofixBottomPosition() {\n        if (this.targetAbsoluteTop +\n            this.stepHeight +\n            this.arrowSize +\n            this.targetHeight >\n            this.documentHeight) {\n            this.setStyleLeft();\n        }\n    }\n    autofixLeftPosition() {\n        if (this.targetAbsoluteLeft - this.stepWidth - this.arrowSize < 0) {\n            this.setStyleTop();\n        }\n    }\n    subscribeToResizeEvents() {\n        return this.eventListenerService.resizeEvent.subscribe(() => {\n            this.redrawStep();\n        });\n    }\n    redrawStep() {\n        this.updateStepDimensions();\n        this.drawStep();\n    }\n    getDimensionsByAspectRatio(width, height, aspectRatio) {\n        let calcHeight = (width + height) / (1 + aspectRatio);\n        let calcWidth = calcHeight * aspectRatio;\n        return {\n            width: calcWidth,\n            height: calcHeight\n        };\n    }\n    adjustDimensions(width, height) {\n        let area = width * height;\n        let newWidth = width;\n        let newHeight = height;\n        if (width > STEP_MAX_WIDTH) {\n            newWidth = STEP_MAX_WIDTH;\n            newHeight = area / newWidth;\n        }\n        else if (width < STEP_MIN_WIDTH) {\n            newWidth = STEP_MIN_WIDTH;\n            newHeight = STEP_MIN_WIDTH / ASPECT_RATIO;\n        }\n        return {\n            width: newWidth,\n            height: newHeight\n        };\n    }\n    updateStepDimensions() {\n        this.stepWidth = this.stepContainer.nativeElement.clientWidth;\n        this.stepHeight = this.stepContainer.nativeElement.clientHeight;\n    }\n    ngOnDestroy() {\n        this.subscriptions.forEach(subscription => {\n            subscription.unsubscribe();\n        });\n    }\n}\nJoyrideStepComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepComponent, deps: [{ token: i0.Injector }, { token: JoyrideStepsContainerService }, { token: EventListenerService }, { token: DocumentService }, { token: i0.Renderer2 }, { token: LoggerService }, { token: JoyrideOptionsService }, { token: TemplatesService }], target: i0.ɵɵFactoryTarget.Component });\nJoyrideStepComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: JoyrideStepComponent, selector: \"joyride-step\", inputs: { step: \"step\" }, host: { listeners: { \"window:keyup\": \"keyEvent($event)\" } }, viewQueries: [{ propertyName: \"stepHolder\", first: true, predicate: [\"stepHolder\"], descendants: true, static: true }, { propertyName: \"stepContainer\", first: true, predicate: [\"stepContainer\"], descendants: true, static: true }], ngImport: i0, template: \"<div #stepHolder class=\\\"joyride-step__holder\\\" [id]=\\\"'joyride-step-' + step.name\\\" [style.top.px]=\\\"topPosition\\\" [style.left.px]=\\\"leftPosition\\\">\\n    <joyride-arrow *ngIf=\\\"showArrow\\\" class=\\\"joyride-step__arrow\\\" [position]=\\\"arrowPosition\\\" [style.top.px]=\\\"arrowTopPosition\\\"\\n        [style.left.px]=\\\"arrowLeftPosition\\\"></joyride-arrow>\\n    <div #stepContainer class=\\\"joyride-step__container\\\">\\n        <joy-close-button class=\\\"joyride-step__close\\\" (click)=\\\"close()\\\"></joy-close-button>\\n        <div class=\\\"joyride-step__header\\\">\\n            <div class=\\\"joyride-step__title\\\" [style.color]=\\\"themeColor\\\">{{ title | async }}</div>\\n        </div>\\n        <div class=\\\"joyride-step__body\\\">\\n            <ng-container *ngTemplateOutlet=\\\"customContent ? customContent : defaultContent; context: ctx\\\"></ng-container>\\n            <ng-template #defaultContent>\\n                {{ text | async }}\\n            </ng-template>\\n        </div>\\n        <div class=\\\"joyride-step__footer\\\">\\n            <div *ngIf=\\\"isCounterVisible\\\" class=\\\"joyride-step__counter-container\\\">\\n                <ng-container *ngTemplateOutlet=\\\"customCounter ? customCounter : defaultCounter; context: counterData\\\"></ng-container>\\n                <ng-template #defaultCounter>\\n                    <div class=\\\"joyride-step__counter\\\">{{ counter }}</div>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"joyride-step__buttons-container\\\">\\n                <div class=\\\"joyride-step__prev-container joyride-step__button\\\" *ngIf=\\\"isPrevButtonVisible && !isFirstStep()\\\" (click)=\\\"prev()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customPrevButton ? customPrevButton : defaultPrevButton\\\"></ng-container>\\n                    <ng-template #defaultPrevButton>\\n                        <joyride-button class=\\\"joyride-step__prev-button\\\" [color]=\\\"themeColor\\\">{{ prevText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <div class=\\\"joyride-step__next-container joyride-step__button\\\" *ngIf=\\\"!isLastStep(); else doneButton\\\" (click)=\\\"next()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customNextButton ? customNextButton : defaulNextButton\\\"></ng-container>\\n                    <ng-template #defaulNextButton>\\n                        <joyride-button [color]=\\\"themeColor\\\">{{ nextText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <ng-template #doneButton>\\n                    <div class=\\\"joyride-step__done-container joyride-step__button\\\" (click)=\\\"close()\\\">\\n                        <ng-container *ngTemplateOutlet=\\\"customDoneButton ? customDoneButton : defaultDoneButton\\\"></ng-container>\\n                        <ng-template #defaultDoneButton>\\n                            <joyride-button class=\\\"joyride-step__done-button\\\" [color]=\\\"themeColor\\\">{{ doneText | async }}</joyride-button>\\n                        </ng-template>\\n                    </div>\\n                </ng-template>\\n            </div>\\n        </div>\\n    </div>\\n</div>\", styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"], components: [{ type: JoyrideArrowComponent, selector: \"joyride-arrow\", inputs: [\"position\"] }, { type: JoyrideCloseButtonComponent, selector: \"joy-close-button\" }, { type: JoyrideButtonComponent, selector: \"joyride-button\", inputs: [\"color\"], outputs: [\"clicked\"] }], directives: [{ type: i10.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i10.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"async\": i10.AsyncPipe }, encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'joyride-step', encapsulation: ViewEncapsulation.None, template: \"<div #stepHolder class=\\\"joyride-step__holder\\\" [id]=\\\"'joyride-step-' + step.name\\\" [style.top.px]=\\\"topPosition\\\" [style.left.px]=\\\"leftPosition\\\">\\n    <joyride-arrow *ngIf=\\\"showArrow\\\" class=\\\"joyride-step__arrow\\\" [position]=\\\"arrowPosition\\\" [style.top.px]=\\\"arrowTopPosition\\\"\\n        [style.left.px]=\\\"arrowLeftPosition\\\"></joyride-arrow>\\n    <div #stepContainer class=\\\"joyride-step__container\\\">\\n        <joy-close-button class=\\\"joyride-step__close\\\" (click)=\\\"close()\\\"></joy-close-button>\\n        <div class=\\\"joyride-step__header\\\">\\n            <div class=\\\"joyride-step__title\\\" [style.color]=\\\"themeColor\\\">{{ title | async }}</div>\\n        </div>\\n        <div class=\\\"joyride-step__body\\\">\\n            <ng-container *ngTemplateOutlet=\\\"customContent ? customContent : defaultContent; context: ctx\\\"></ng-container>\\n            <ng-template #defaultContent>\\n                {{ text | async }}\\n            </ng-template>\\n        </div>\\n        <div class=\\\"joyride-step__footer\\\">\\n            <div *ngIf=\\\"isCounterVisible\\\" class=\\\"joyride-step__counter-container\\\">\\n                <ng-container *ngTemplateOutlet=\\\"customCounter ? customCounter : defaultCounter; context: counterData\\\"></ng-container>\\n                <ng-template #defaultCounter>\\n                    <div class=\\\"joyride-step__counter\\\">{{ counter }}</div>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"joyride-step__buttons-container\\\">\\n                <div class=\\\"joyride-step__prev-container joyride-step__button\\\" *ngIf=\\\"isPrevButtonVisible && !isFirstStep()\\\" (click)=\\\"prev()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customPrevButton ? customPrevButton : defaultPrevButton\\\"></ng-container>\\n                    <ng-template #defaultPrevButton>\\n                        <joyride-button class=\\\"joyride-step__prev-button\\\" [color]=\\\"themeColor\\\">{{ prevText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <div class=\\\"joyride-step__next-container joyride-step__button\\\" *ngIf=\\\"!isLastStep(); else doneButton\\\" (click)=\\\"next()\\\">\\n                    <ng-container *ngTemplateOutlet=\\\"customNextButton ? customNextButton : defaulNextButton\\\"></ng-container>\\n                    <ng-template #defaulNextButton>\\n                        <joyride-button [color]=\\\"themeColor\\\">{{ nextText | async }}</joyride-button>\\n                    </ng-template>\\n                </div>\\n                <ng-template #doneButton>\\n                    <div class=\\\"joyride-step__done-container joyride-step__button\\\" (click)=\\\"close()\\\">\\n                        <ng-container *ngTemplateOutlet=\\\"customDoneButton ? customDoneButton : defaultDoneButton\\\"></ng-container>\\n                        <ng-template #defaultDoneButton>\\n                            <joyride-button class=\\\"joyride-step__done-button\\\" [color]=\\\"themeColor\\\">{{ doneText | async }}</joyride-button>\\n                        </ng-template>\\n                    </div>\\n                </ng-template>\\n            </div>\\n        </div>\\n    </div>\\n</div>\", styles: [\".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:flex;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:flex;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: JoyrideStepsContainerService }, { type: EventListenerService }, { type: DocumentService }, { type: i0.Renderer2 }, { type: LoggerService }, { type: JoyrideOptionsService }, { type: TemplatesService }]; }, propDecorators: { step: [{\n                type: Input\n            }], stepHolder: [{\n                type: ViewChild,\n                args: ['stepHolder', { static: true }]\n            }], stepContainer: [{\n                type: ViewChild,\n                args: ['stepContainer', { static: true }]\n            }], keyEvent: [{\n                type: HostListener,\n                args: ['window:keyup', ['$event']]\n            }] } });\n\nclass StepDrawerService {\n    constructor(componentFactoryResolver, appRef, injector) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.appRef = appRef;\n        this.injector = injector;\n        this.refMap = {};\n    }\n    draw(step) {\n        // 1. Create a component reference from the component\n        const ref = this.componentFactoryResolver\n            .resolveComponentFactory(JoyrideStepComponent)\n            .create(this.injector);\n        // 2. Attach component to the appRef so that it's inside the ng component tree\n        this.appRef.attachView(ref.hostView);\n        // 3. Get DOM element from component\n        const domElem = ref.hostView\n            .rootNodes[0];\n        // 4. Append DOM element to the body\n        document.body.appendChild(domElem);\n        const instance = ref.instance;\n        instance.step = step;\n        ref.changeDetectorRef.detectChanges();\n        step.stepInstance = instance;\n        this.refMap[step.name] = ref;\n    }\n    remove(step) {\n        this.appRef.detachView(this.refMap[step.name].hostView);\n        this.refMap[step.name].destroy();\n    }\n}\nStepDrawerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: StepDrawerService, deps: [{ token: i0.ComponentFactoryResolver }, { token: i0.ApplicationRef }, { token: i0.Injector }], target: i0.ɵɵFactoryTarget.Injectable });\nStepDrawerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: StepDrawerService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: StepDrawerService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i0.ComponentFactoryResolver }, { type: i0.ApplicationRef }, { type: i0.Injector }]; } });\n\nconst SCROLLBAR_SIZE = 20;\nconst DISTANCE_FROM_TARGET = 15;\nconst ARROW_SIZE = 10;\nclass JoyrideStepService {\n    constructor(backDropService, eventListener, stepsContainerService, documentService, DOMService, stepDrawerService, optionsService, router, logger) {\n        this.backDropService = backDropService;\n        this.eventListener = eventListener;\n        this.stepsContainerService = stepsContainerService;\n        this.documentService = documentService;\n        this.DOMService = DOMService;\n        this.stepDrawerService = stepDrawerService;\n        this.optionsService = optionsService;\n        this.router = router;\n        this.logger = logger;\n        this.winTopPosition = 0;\n        this.winBottomPosition = 0;\n        this.stepsObserver = new ReplaySubject();\n        this.initViewportPositions();\n        this.subscribeToScrollEvents();\n        this.subscribeToResizeEvents();\n    }\n    initViewportPositions() {\n        this.winTopPosition = 0;\n        this.winBottomPosition = this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n    }\n    subscribeToScrollEvents() {\n        this.eventListener.startListeningScrollEvents();\n        this.eventListener.scrollEvent.subscribe(scroll => {\n            this.winTopPosition = scroll.scrollY;\n            this.winBottomPosition = this.winTopPosition + this.DOMService.getNativeWindow().innerHeight - SCROLLBAR_SIZE;\n            if (this.currentStep)\n                this.backDropService.redraw(this.currentStep, scroll);\n        });\n    }\n    subscribeToResizeEvents() {\n        this.eventListener.resizeEvent.subscribe(() => {\n            if (this.currentStep)\n                this.backDropService.redrawTarget(this.currentStep);\n        });\n    }\n    drawStep(step) {\n        step.position = step.position === NO_POSITION ? this.optionsService.getStepDefaultPosition() : step.position;\n        this.stepDrawerService.draw(step);\n    }\n    startTour() {\n        this.stepsObserver = new ReplaySubject();\n        this.stepsContainerService.init();\n        this.documentService.setDocumentHeight();\n        this.tryShowStep(StepActionType.NEXT);\n        this.eventListener.startListeningResizeEvents();\n        this.subscribeToStepsUpdates();\n        return this.stepsObserver.asObservable();\n    }\n    close() {\n        this.removeCurrentStep();\n        this.notifyTourIsFinished();\n        this.DOMService.getNativeWindow().scrollTo(0, 0);\n        this.eventListener.stopListeningResizeEvents();\n        this.backDropService.remove();\n    }\n    prev() {\n        this.removeCurrentStep();\n        this.currentStep.prevCliked.emit();\n        this.tryShowStep(StepActionType.PREV);\n    }\n    next() {\n        this.removeCurrentStep();\n        this.currentStep.nextClicked.emit();\n        this.tryShowStep(StepActionType.NEXT);\n    }\n    async navigateToStepPage(action) {\n        let stepRoute = this.stepsContainerService.getStepRoute(action);\n        if (stepRoute) {\n            return await this.router.navigate([stepRoute]);\n        }\n    }\n    subscribeToStepsUpdates() {\n        this.stepsContainerService.stepHasBeenModified.subscribe(updatedStep => {\n            if (this.currentStep && this.currentStep.name === updatedStep.name) {\n                this.currentStep = updatedStep;\n            }\n        });\n    }\n    async tryShowStep(actionType) {\n        await this.navigateToStepPage(actionType);\n        const timeout = this.optionsService.getWaitingTime();\n        if (timeout > 100)\n            this.backDropService.remove();\n        setTimeout(() => {\n            try {\n                this.showStep(actionType);\n            }\n            catch (error) {\n                if (error instanceof JoyrideStepDoesNotExist) {\n                    this.tryShowStep(actionType);\n                }\n                else if (error instanceof JoyrideStepOutOfRange) {\n                    this.logger.error('Forcing the tour closure: First or Last step not found in the DOM.');\n                    this.close();\n                }\n                else {\n                    throw new Error(error);\n                }\n            }\n        }, timeout);\n    }\n    showStep(actionType) {\n        this.currentStep = this.stepsContainerService.get(actionType);\n        if (this.currentStep == null)\n            throw new JoyrideStepDoesNotExist('');\n        this.notifyStepClicked(actionType);\n        // Scroll the element to get it visible if it's in a scrollable element\n        this.scrollIfElementBeyondOtherElements();\n        this.backDropService.draw(this.currentStep);\n        this.drawStep(this.currentStep);\n        this.scrollIfStepAndTargetAreNotVisible();\n    }\n    notifyStepClicked(actionType) {\n        let stepInfo = {\n            number: this.stepsContainerService.getStepNumber(this.currentStep.name),\n            name: this.currentStep.name,\n            route: this.currentStep.route,\n            actionType\n        };\n        this.stepsObserver.next(stepInfo);\n    }\n    notifyTourIsFinished() {\n        if (this.currentStep)\n            this.currentStep.tourDone.emit();\n        this.stepsObserver.complete();\n    }\n    removeCurrentStep() {\n        if (this.currentStep)\n            this.stepDrawerService.remove(this.currentStep);\n    }\n    scrollIfStepAndTargetAreNotVisible() {\n        this.scrollWhenTargetOrStepAreHiddenBottom();\n        this.scrollWhenTargetOrStepAreHiddenTop();\n    }\n    scrollWhenTargetOrStepAreHiddenBottom() {\n        let totalTargetBottom = this.getMaxTargetAndStepBottomPosition();\n        if (totalTargetBottom > this.winBottomPosition) {\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetBottom - this.winBottomPosition);\n        }\n    }\n    scrollWhenTargetOrStepAreHiddenTop() {\n        let totalTargetTop = this.getMaxTargetAndStepTopPosition();\n        if (totalTargetTop < this.winTopPosition) {\n            this.DOMService.getNativeWindow().scrollBy(0, totalTargetTop - this.winTopPosition);\n        }\n    }\n    getMaxTargetAndStepBottomPosition() {\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n        if (this.currentStep.position === 'top') {\n            return targetAbsoluteTop + this.currentStep.stepInstance.targetHeight;\n        }\n        else if (this.currentStep.position === 'bottom') {\n            return (targetAbsoluteTop +\n                this.currentStep.stepInstance.targetHeight +\n                this.currentStep.stepInstance.stepHeight +\n                ARROW_SIZE +\n                DISTANCE_FROM_TARGET);\n        }\n        else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n            return Math.max(targetAbsoluteTop + this.currentStep.stepInstance.targetHeight, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 + this.currentStep.stepInstance.stepHeight / 2);\n        }\n    }\n    getMaxTargetAndStepTopPosition() {\n        let targetAbsoluteTop = this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);\n        if (this.currentStep.position === 'top') {\n            return targetAbsoluteTop - (this.currentStep.stepInstance.stepHeight + ARROW_SIZE + DISTANCE_FROM_TARGET);\n        }\n        else if (this.currentStep.position === 'bottom') {\n            return targetAbsoluteTop;\n        }\n        else if (this.currentStep.position === 'right' || this.currentStep.position === 'left') {\n            return Math.min(targetAbsoluteTop, targetAbsoluteTop + this.currentStep.stepInstance.targetHeight / 2 - this.currentStep.stepInstance.stepHeight / 2);\n        }\n    }\n    scrollIfElementBeyondOtherElements() {\n        if (this.isElementBeyondOthers() === 2) {\n            this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element);\n        }\n        if (this.isElementBeyondOthers() === 2) {\n            this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element);\n        }\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n            this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed);\n        }\n        if (this.isElementBeyondOthers() === 1 && this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)) {\n            this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView();\n        }\n    }\n    isElementBeyondOthers() {\n        return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element, this.currentStep.isElementOrAncestorFixed, 'backdrop');\n    }\n}\nJoyrideStepService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepService, deps: [{ token: JoyrideBackdropService }, { token: EventListenerService }, { token: JoyrideStepsContainerService }, { token: DocumentService }, { token: DomRefService }, { token: StepDrawerService }, { token: JoyrideOptionsService }, { token: i3.Router }, { token: LoggerService }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideStepService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideStepService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: JoyrideBackdropService }, { type: EventListenerService }, { type: JoyrideStepsContainerService }, { type: DocumentService }, { type: DomRefService }, { type: StepDrawerService }, { type: JoyrideOptionsService }, { type: i3.Router }, { type: LoggerService }]; } });\n\nclass JoyrideService {\n    constructor(platformId, stepService, optionsService) {\n        this.platformId = platformId;\n        this.stepService = stepService;\n        this.optionsService = optionsService;\n        this.tourInProgress = false;\n    }\n    startTour(options) {\n        if (!isPlatformBrowser(this.platformId)) {\n            return of(new JoyrideStepInfo());\n        }\n        if (!this.tourInProgress) {\n            this.tourInProgress = true;\n            if (options) {\n                this.optionsService.setOptions(options);\n            }\n            this.tour$ = this.stepService.startTour().pipe(finalize(() => (this.tourInProgress = false)));\n            this.tour$.subscribe();\n        }\n        return this.tour$;\n    }\n    closeTour() {\n        if (this.isTourInProgress())\n            this.stepService.close();\n    }\n    isTourInProgress() {\n        return this.tourInProgress;\n    }\n}\nJoyrideService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideService, deps: [{ token: PLATFORM_ID }, { token: JoyrideStepService }, { token: JoyrideOptionsService }], target: i0.ɵɵFactoryTarget.Injectable });\nJoyrideService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: JoyrideStepService }, { type: JoyrideOptionsService }]; } });\n\nconst routerModuleForChild = RouterModule.forChild([]);\nclass JoyrideModule {\n    static forRoot() {\n        return {\n            ngModule: JoyrideModule,\n            providers: [\n                JoyrideService,\n                JoyrideStepService,\n                JoyrideStepsContainerService,\n                JoyrideBackdropService,\n                EventListenerService,\n                DocumentService,\n                JoyrideOptionsService,\n                StepDrawerService,\n                DomRefService,\n                LoggerService,\n                TemplatesService,\n            ],\n        };\n    }\n    static forChild() {\n        return {\n            ngModule: JoyrideModule,\n            providers: [],\n        };\n    }\n}\nJoyrideModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nJoyrideModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, declarations: [JoyrideDirective,\n        JoyrideStepComponent,\n        JoyrideArrowComponent,\n        JoyrideButtonComponent,\n        JoyrideCloseButtonComponent], imports: [CommonModule, i3.RouterModule], exports: [JoyrideDirective] });\nJoyrideModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, imports: [[CommonModule, routerModuleForChild]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: JoyrideModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, routerModuleForChild],\n                    declarations: [\n                        JoyrideDirective,\n                        JoyrideStepComponent,\n                        JoyrideArrowComponent,\n                        JoyrideButtonComponent,\n                        JoyrideCloseButtonComponent,\n                    ],\n                    exports: [JoyrideDirective],\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-joyride\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ARROW_SIZE, DEFAULT_DISTANCE_FROM_MARGIN_LEFT, DEFAULT_DISTANCE_FROM_MARGIN_TOP, DEFAULT_TEXTS, DEFAULT_THEME_COLOR, DEFAULT_TIMEOUT_BETWEEN_STEPS, DISTANCE_FROM_TARGET, DocumentService, DomRefService, EventListenerService, JoyrideArrowComponent, JoyrideBackdropService, JoyrideButtonComponent, JoyrideCloseButtonComponent, JoyrideDirective, JoyrideModule, JoyrideOptionsService, JoyrideService, JoyrideStepComponent, JoyrideStepService, JoyrideStepsContainerService, KEY_CODE, LoggerService, NO_POSITION, ObservableCustomTexts, STEP_DEFAULT_POSITION, Scroll, StepActionType, StepDrawerService, TemplatesService, routerModuleForChild };\n//# sourceMappingURL=ngx-joyride.mjs.map\n",null,null,null],"mappings":"AAAA,OAAO,KAAKA,EAAE,MAAM,eAAe;AACnC,SAASC,UAAU,EAAEC,WAAW,EAAEC,MAAM,EAAEC,YAAY,EAAEC,SAAS,EAAEC,KAAK,EAAEC,MAAM,EAAEC,SAAS,EAAEC,iBAAiB,EAAEC,SAAS,EAAEC,YAAY,EAAEC,QAAQ,QAAQ,eAAe;AACxK,OAAO,KAAKC,GAAG,MAAM,iBAAiB;AACtC,SAASC,iBAAiB,EAAEC,YAAY,QAAQ,iBAAiB;AACjE,SAASC,aAAa,EAAEC,EAAE,EAAEC,UAAU,EAAEC,OAAO,QAAQ,MAAM;AAC7D,OAAO,KAAKC,EAAE,MAAM,iBAAiB;AACrC,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,QAAQ,QAAQ,gBAAgB;AAAC,MAAAC,GAAA,YAAAA,CAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA;EAAA;IAAA,oBAAAF,EAAA;IAAA,SAAAC,EAAA;IAAA,gBAAAC;EAAA;AAAA;AAAA,MAAAC,GAAA;AAAA,MAAAC,GAAA;AAAA,MAAAC,GAAA;AAAA,SAAAC,8CAAAC,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAyI8D/B,EAAE,CAAAiC,SAAA,uBC9I/C,CAAC;EAAA;EAAA,IAAAF,EAAA;IAAA,MAAAG,MAAA,GD8I4ClC,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAoC,WAAA,QAAAF,MAAA,CAAAG,gBAAA,MC/IkB,CAAC,SAAAH,MAAA,CAAAI,iBAAA,MAAD,CAAC;ID+IrBtC,EAAE,CAAAuC,UAAA,aAAAL,MAAA,CAAAM,aC/IhB,CAAC;EAAA;AAAA;AAAA,SAAAC,8CAAAV,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;ID+Ia/B,EAAE,CAAA0C,kBAAA,ECvIe,CAAC;EAAA;AAAA;AAAA,SAAAC,6CAAAZ,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDuIlB/B,EAAE,CAAA4C,MAAA,ECpI/F,CAAC;IDoI4F5C,EAAE,CAAA6C,MAAA;EAAA;EAAA,IAAAd,EAAA;IAAA,MAAAe,MAAA,GAAF9C,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAA+C,kBAAA,MAAF/C,EAAE,CAAAgD,WAAA,OAAAF,MAAA,CAAAG,IAAA,MCpI/F,CAAC;EAAA;AAAA;AAAA,SAAAC,oDAAAnB,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDoI4F/B,EAAE,CAAA0C,kBAAA,EChI2B,CAAC;EAAA;AAAA;AAAA,SAAAS,mDAAApB,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDgI9B/B,EAAE,CAAAoD,cAAA,aC9HpD,CAAC;ID8HiDpD,EAAE,CAAA4C,MAAA,EC9HvC,CAAC;ID8HoC5C,EAAE,CAAAqD,YAAA,CC9HjC,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAAuB,OAAA,GD8H8BtD,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuD,SAAA,EC9HvC,CAAC;ID8HoCvD,EAAE,CAAAwD,iBAAA,CAAAF,OAAA,CAAAG,OC9HvC,CAAC;EAAA;AAAA;AAAA,SAAAC,qCAAA3B,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;ID8HoC/B,EAAE,CAAAoD,cAAA,aCjIzB,CAAC;IDiIsBpD,EAAE,CAAA2D,UAAA,IAAAT,mDAAA,yBChI2B,CAAC;IDgI9BlD,EAAE,CAAA2D,UAAA,IAAAR,kDAAA,iCAAFnD,EAAE,CAAA4D,sBC7H7E,CAAC;ID6H0E5D,EAAE,CAAAqD,YAAA,CC5HzF,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAA8B,IAAA,GD4HsF7D,EAAE,CAAA8D,WAAA;IAAA,MAAAC,MAAA,GAAF/D,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuD,SAAA,EChIV,CAAC;IDgIOvD,EAAE,CAAAuC,UAAA,qBAAAwB,MAAA,CAAAC,aAAA,GAAAD,MAAA,CAAAC,aAAA,GAAAH,IChIV,CAAC,4BAAAE,MAAA,CAAAE,WAAD,CAAC;EAAA;AAAA;AAAA,SAAAC,oDAAAnC,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDgIO/B,EAAE,CAAA0C,kBAAA,ECzHkB,CAAC;EAAA;AAAA;AAAA,SAAAyB,mDAAApC,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDyHrB/B,EAAE,CAAAoD,cAAA,wBCvHZ,CAAC;IDuHSpD,EAAE,CAAA4C,MAAA,ECvHU,CAAC;IDuHb5C,EAAE,CAAA6C,MAAA;IAAF7C,EAAE,CAAAqD,YAAA,CCvH2B,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAAqC,OAAA,GDuH9BpE,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuC,UAAA,UAAA6B,OAAA,CAAAC,UCvHb,CAAC;IDuHUrE,EAAE,CAAAuD,SAAA,ECvHU,CAAC;IDuHbvD,EAAE,CAAAwD,iBAAA,CAAFxD,EAAE,CAAAgD,WAAA,OAAAoB,OAAA,CAAAE,QAAA,CCvHU,CAAC;EAAA;AAAA;AAAA,SAAAC,qCAAAxC,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAAA,MAAAyC,IAAA,GDuHbxE,EAAE,CAAAyE,gBAAA;IAAFzE,EAAE,CAAAoD,cAAA,aC1HmC,CAAC;ID0HtCpD,EAAE,CAAA0E,UAAA,mBAAAC,0DAAA;MAAF3E,EAAE,CAAA4E,aAAA,CAAAJ,IAAA;MAAA,MAAAK,OAAA,GAAF7E,EAAE,CAAAmC,aAAA;MAAA,OAAA0C,OAAA,CAAAC,IAAA;IAAA,CC1HkC,CAAC;ID0HrC9E,EAAE,CAAA2D,UAAA,IAAAO,mDAAA,0BCzHkB,CAAC;IDyHrBlE,EAAE,CAAA2D,UAAA,IAAAQ,kDAAA,iCAAFnE,EAAE,CAAA4D,sBCtHzE,CAAC;IDsHsE5D,EAAE,CAAAqD,YAAA,CCrHrF,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAAgD,IAAA,GDqHkF/E,EAAE,CAAA8D,WAAA;IAAA,MAAAkB,MAAA,GAAFhF,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuD,SAAA,ECzHC,CAAC;IDyHJvD,EAAE,CAAAuC,UAAA,qBAAAyC,MAAA,CAAAC,gBAAA,GAAAD,MAAA,CAAAC,gBAAA,GAAAF,ICzHC,CAAC;EAAA;AAAA;AAAA,SAAAG,oDAAAnD,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDyHJ/B,EAAE,CAAA0C,kBAAA,ECnHiB,CAAC;EAAA;AAAA;AAAA,SAAAyC,mDAAApD,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDmHpB/B,EAAE,CAAAoD,cAAA,wBCjH9C,CAAC;IDiH2CpD,EAAE,CAAA4C,MAAA,ECjHxB,CAAC;IDiHqB5C,EAAE,CAAA6C,MAAA;IAAF7C,EAAE,CAAAqD,YAAA,CCjHP,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAAqD,OAAA,GDiHIpF,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuC,UAAA,UAAA6C,OAAA,CAAAf,UCjH/C,CAAC;IDiH4CrE,EAAE,CAAAuD,SAAA,ECjHxB,CAAC;IDiHqBvD,EAAE,CAAAwD,iBAAA,CAAFxD,EAAE,CAAAgD,WAAA,OAAAoC,OAAA,CAAAC,QAAA,CCjHxB,CAAC;EAAA;AAAA;AAAA,SAAAC,qCAAAvD,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAAA,MAAAwD,IAAA,GDiHqBvF,EAAE,CAAAyE,gBAAA;IAAFzE,EAAE,CAAAoD,cAAA,aCpH4B,CAAC;IDoH/BpD,EAAE,CAAA0E,UAAA,mBAAAc,0DAAA;MAAFxF,EAAE,CAAA4E,aAAA,CAAAW,IAAA;MAAA,MAAAE,OAAA,GAAFzF,EAAE,CAAAmC,aAAA;MAAA,OAAAsD,OAAA,CAAAC,IAAA;IAAA,CCpH2B,CAAC;IDoH9B1F,EAAE,CAAA2D,UAAA,IAAAuB,mDAAA,0BCnHiB,CAAC;IDmHpBlF,EAAE,CAAA2D,UAAA,IAAAwB,kDAAA,iCAAFnF,EAAE,CAAA4D,sBChHzE,CAAC;IDgHsE5D,EAAE,CAAAqD,YAAA,CC/GrF,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAA4D,IAAA,GD+GkF3F,EAAE,CAAA8D,WAAA;IAAA,MAAA8B,MAAA,GAAF5F,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuD,SAAA,ECnHA,CAAC;IDmHHvD,EAAE,CAAAuC,UAAA,qBAAAqD,MAAA,CAAAC,gBAAA,GAAAD,MAAA,CAAAC,gBAAA,GAAAF,ICnHA,CAAC;EAAA;AAAA;AAAA,SAAAG,4DAAA/D,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IDmHH/B,EAAE,CAAA0C,kBAAA,EC5GsB,CAAC;EAAA;AAAA;AAAA,SAAAqD,2DAAAhE,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;ID4GzB/B,EAAE,CAAAoD,cAAA,wBC1GR,CAAC;ID0GKpD,EAAE,CAAA4C,MAAA,EC1Gc,CAAC;ID0GjB5C,EAAE,CAAA6C,MAAA;IAAF7C,EAAE,CAAAqD,YAAA,CC1G+B,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAAiE,OAAA,GD0GlChG,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuC,UAAA,UAAAyD,OAAA,CAAA3B,UC1GT,CAAC;ID0GMrE,EAAE,CAAAuD,SAAA,EC1Gc,CAAC;ID0GjBvD,EAAE,CAAAwD,iBAAA,CAAFxD,EAAE,CAAAgD,WAAA,OAAAgD,OAAA,CAAAC,QAAA,CC1Gc,CAAC;EAAA;AAAA;AAAA,SAAAC,6CAAAnE,EAAA,EAAAC,GAAA;EAAA,IAAAD,EAAA;IAAA,MAAAoE,IAAA,GD0GjBnG,EAAE,CAAAyE,gBAAA;IAAFzE,EAAE,CAAAoD,cAAA,aC7GN,CAAC;ID6GGpD,EAAE,CAAA0E,UAAA,mBAAA0B,kEAAA;MAAFpG,EAAE,CAAA4E,aAAA,CAAAuB,IAAA;MAAA,MAAAE,OAAA,GAAFrG,EAAE,CAAAmC,aAAA;MAAA,OAAAkE,OAAA,CAAAC,KAAA;IAAA,CC7GP,CAAC;ID6GItG,EAAE,CAAA2D,UAAA,IAAAmC,2DAAA,0BC5GsB,CAAC;ID4GzB9F,EAAE,CAAA2D,UAAA,IAAAoC,0DAAA,iCAAF/F,EAAE,CAAA4D,sBCzGrE,CAAC;IDyGkE5D,EAAE,CAAAqD,YAAA,CCxGjF,CAAC;EAAA;EAAA,IAAAtB,EAAA;IAAA,MAAAwE,IAAA,GDwG8EvG,EAAE,CAAA8D,WAAA;IAAA,MAAA0C,OAAA,GAAFxG,EAAE,CAAAmC,aAAA;IAAFnC,EAAE,CAAAuD,SAAA,EC5GK,CAAC;ID4GRvD,EAAE,CAAAuC,UAAA,qBAAAiE,OAAA,CAAAC,gBAAA,GAAAD,OAAA,CAAAC,gBAAA,GAAAF,IC5GK,CAAC;EAAA;AAAA;AD3BhH,MAAMG,WAAW,CAAC;EACdC,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,KAAK,GAAG,IAAI5F,aAAa,CAAC,CAAC;IAChC,IAAI,CAACiC,IAAI,GAAG,IAAIjC,aAAa,CAAC,CAAC;EACnC;AACJ;AAEA,MAAM6F,YAAY,SAASC,KAAK,CAAC;EAC7BH,WAAWA,CAACI,OAAO,EAAE;IACjB,KAAK,CAACA,OAAO,CAAC;IACdC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEJ,YAAY,CAACK,SAAS,CAAC;EACvD;AACJ;AACA,MAAMC,uBAAuB,SAASL,KAAK,CAAC;EACxCH,WAAWA,CAACI,OAAO,EAAE;IACjB,KAAK,CAACA,OAAO,CAAC;IACdC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEE,uBAAuB,CAACD,SAAS,CAAC;EAClE;AACJ;AACA,MAAME,qBAAqB,SAASN,KAAK,CAAC;EACtCH,WAAWA,CAACI,OAAO,EAAE;IACjB,KAAK,CAACA,OAAO,CAAC;IACdC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEG,qBAAqB,CAACF,SAAS,CAAC;EAChE;AACJ;AAEA,MAAMG,mBAAmB,GAAG,SAAS;AACrC,MAAMC,qBAAqB,GAAG,QAAQ;AACtC,MAAMC,6BAA6B,GAAG,CAAC;AACvC,MAAMC,qBAAqB,CAAC;AAE5B,MAAMC,aAAa,GAAG;EAClB3C,IAAI,EAAE7D,EAAE,CAAC,MAAM,CAAC;EAChByE,IAAI,EAAEzE,EAAE,CAAC,MAAM,CAAC;EAChByG,IAAI,EAAEzG,EAAE,CAAC,MAAM,CAAC;EAChBqF,KAAK,EAAErF,EAAE,CAAC,IAAI;AAClB,CAAC;AACD,MAAM0G,qBAAqB,CAAC;EACxBhB,WAAWA,CAAA,EAAG;IACV,IAAI,CAACtC,UAAU,GAAGgD,mBAAmB;IACrC,IAAI,CAACO,mBAAmB,GAAGN,qBAAqB;IAChD,IAAI,CAACO,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,UAAU,GAAG,EAAE;EACxB;EACAC,UAAUA,CAACC,OAAO,EAAE;IAChB,IAAI,CAACF,UAAU,GAAGE,OAAO,CAACC,KAAK;IAC/B,IAAI,CAACP,mBAAmB,GAAGM,OAAO,CAACN,mBAAmB,GAChDM,OAAO,CAACN,mBAAmB,GAC3B,IAAI,CAACA,mBAAmB;IAC9B,IAAI,CAACC,WAAW,GACZ,OAAOK,OAAO,CAACL,WAAW,KAAK,WAAW,GACpCK,OAAO,CAACL,WAAW,GACnB,IAAI,CAACA,WAAW;IAC1B,IAAI,CAACC,WAAW,GACZ,OAAOI,OAAO,CAACJ,WAAW,KAAK,WAAW,GACpCI,OAAO,CAACJ,WAAW,GACnB,IAAI,CAACA,WAAW;IAC1B,IAAI,CAACC,cAAc,GACf,OAAOG,OAAO,CAACH,cAAc,KAAK,WAAW,GACvCG,OAAO,CAACH,cAAc,GACtB,IAAI,CAACA,cAAc;IAC7B,IAAI,CAAC1D,UAAU,GAAG6D,OAAO,CAAC7D,UAAU,GAC9B6D,OAAO,CAAC7D,UAAU,GAClB,IAAI,CAACA,UAAU;IACrB,IAAI,CAAC+D,SAAS,GAAGF,OAAO,CAACG,SAAS;IAClC,IAAI,CAACC,WAAW,GACZ,OAAOJ,OAAO,CAACI,WAAW,KAAK,WAAW,GACpCJ,OAAO,CAACI,WAAW,GACnBf,6BAA6B;IACvC,OAAOW,OAAO,CAACK,WAAW,KAAK,WAAW,GACpC,IAAI,CAACC,aAAa,CAACN,OAAO,CAACK,WAAW,CAAC,GACvC,IAAI,CAACC,aAAa,CAACf,aAAa,CAAC;EAC3C;EACAgB,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACrE,UAAU,CAAC;EACzC;EACAsE,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACtE,UAAU;EAC1B;EACAuE,sBAAsBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAAChB,mBAAmB;EACnC;EACAiB,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACb,UAAU;EAC1B;EACAc,YAAYA,CAAA,EAAG;IACX,OAAO,IAAI,CAACV,SAAS;EACzB;EACAW,cAAcA,CAAA,EAAG;IACb,OAAO,IAAI,CAACT,WAAW;EAC3B;EACAU,cAAcA,CAAA,EAAG;IACb,OAAO,IAAI,CAACnB,WAAW;EAC3B;EACAoB,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAI,CAACnB,WAAW;EAC3B;EACAoB,mBAAmBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACnB,cAAc;EAC9B;EACAoB,cAAcA,CAAA,EAAG;IACb,OAAO,IAAI,CAACZ,WAAW;EAC3B;EACAC,aAAaA,CAACY,KAAK,EAAE;IACjB,IAAItE,IAAI;IACR,IAAIY,IAAI;IACR,IAAIgC,IAAI;IACR,IAAIpB,KAAK;IACTxB,IAAI,GAAGsE,KAAK,CAACtE,IAAI,GAAGsE,KAAK,CAACtE,IAAI,GAAG2C,aAAa,CAAC3C,IAAI;IACnDY,IAAI,GAAG0D,KAAK,CAAC1D,IAAI,GAAG0D,KAAK,CAAC1D,IAAI,GAAG+B,aAAa,CAAC/B,IAAI;IACnDgC,IAAI,GAAG0B,KAAK,CAAC1B,IAAI,GAAG0B,KAAK,CAAC1B,IAAI,GAAGD,aAAa,CAACC,IAAI;IACnDpB,KAAK,GAAG8C,KAAK,CAAC9C,KAAK,GAAG8C,KAAK,CAAC9C,KAAK,GAAGmB,aAAa,CAACnB,KAAK;IACvD,IAAI,CAACiC,WAAW,GAAG;MACfzD,IAAI,EAAE,IAAI,CAACuE,YAAY,CAACvE,IAAI,CAAC;MAC7BY,IAAI,EAAE,IAAI,CAAC2D,YAAY,CAAC3D,IAAI,CAAC;MAC7BgC,IAAI,EAAE,IAAI,CAAC2B,YAAY,CAAC3B,IAAI,CAAC;MAC7BpB,KAAK,EAAE,IAAI,CAAC+C,YAAY,CAAC/C,KAAK;IAClC,CAAC;EACL;EACA+C,YAAYA,CAACC,KAAK,EAAE;IAChB,OAAOA,KAAK,YAAYpI,UAAU,GAAGoI,KAAK,GAAGrI,EAAE,CAACqI,KAAK,CAAC;EAC1D;EACAZ,QAAQA,CAACa,GAAG,EAAE;IACV,MAAMC,cAAc,GAAG,kCAAkC;IACzDD,GAAG,GAAGA,GAAG,CAACE,OAAO,CAACD,cAAc,EAAE,CAACE,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,KAAK;MAC9C,OAAOF,CAAC,GAAGA,CAAC,GAAGC,CAAC,GAAGA,CAAC,GAAGC,CAAC,GAAGA,CAAC;IAChC,CAAC,CAAC;IACF,MAAMC,MAAM,GAAG,2CAA2C,CAACC,IAAI,CAACR,GAAG,CAAC;IACpE,OAAOO,MAAM,GACP,GAAGE,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,KAAKE,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,KAAKE,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,GACpF,IAAI;EACd;AACJ;AACAnC,qBAAqB,CAACsC,IAAI,YAAAC,8BAAAC,CAAA;EAAA,YAAAA,CAAA,IAAwFxC,qBAAqB;AAAA,CAAoD;AAC3LA,qBAAqB,CAACyC,KAAK,kBAD6EpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EACY3C,qBAAqB;EAAA4C,OAAA,EAArB5C,qBAAqB,CAAAsC;AAAA,EAAG;AAC9I;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAFwGxK,EAAE,CAAAyK,iBAAA,CAEf9C,qBAAqB,EAAc,CAAC;IACnH+C,IAAI,EAAEzK;EACV,CAAC,CAAC;AAAA;AAEV,MAAM0K,OAAO,GAAG,gBAAgB;AAChC,MAAMC,aAAa,CAAC;EAChBjE,WAAWA,CAACkE,aAAa,EAAE;IACvB,IAAI,CAACA,aAAa,GAAGA,aAAa;EACtC;EACAC,KAAKA,CAAC/D,OAAO,EAAEgE,IAAI,GAAG,EAAE,EAAE;IACtB,IAAI,IAAI,CAACF,aAAa,CAAC7B,cAAc,CAAC,CAAC,EAAE;MACrCgC,OAAO,CAACF,KAAK,CAACH,OAAO,GAAG5D,OAAO,EAAEgE,IAAI,CAAC;IAC1C;EACJ;EACAE,IAAIA,CAAClE,OAAO,EAAEgE,IAAI,GAAG,EAAE,EAAE;IACrB,IAAI,IAAI,CAACF,aAAa,CAAC7B,cAAc,CAAC,CAAC,EAAE;MACrCgC,OAAO,CAACC,IAAI,CAACN,OAAO,GAAG5D,OAAO,EAAEgE,IAAI,CAAC;IACzC;EACJ;EACAG,IAAIA,CAACnE,OAAO,EAAEgE,IAAI,GAAG,EAAE,EAAE;IACrB,IAAI,IAAI,CAACF,aAAa,CAAC7B,cAAc,CAAC,CAAC,EAAE;MACrCgC,OAAO,CAACE,IAAI,CAACP,OAAO,GAAG5D,OAAO,EAAEgE,IAAI,CAAC;IACzC;EACJ;EACAI,KAAKA,CAACpE,OAAO,EAAEgE,IAAI,GAAG,EAAE,EAAE;IACtB,IAAI,IAAI,CAACF,aAAa,CAAC7B,cAAc,CAAC,CAAC,EAAE;MACrCgC,OAAO,CAACG,KAAK,CAACR,OAAO,GAAG5D,OAAO,EAAEgE,IAAI,CAAC;IAC1C;EACJ;AACJ;AACAH,aAAa,CAACX,IAAI,YAAAmB,sBAAAjB,CAAA;EAAA,YAAAA,CAAA,IAAwFS,aAAa,EAhCf5K,EAAE,CAAAqL,QAAA,CAgC+B1D,qBAAqB;AAAA,CAA6C;AAC3MiD,aAAa,CAACR,KAAK,kBAjCqFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAiCIM,aAAa;EAAAL,OAAA,EAAbK,aAAa,CAAAX;AAAA,EAAG;AAC9H;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAlCwGxK,EAAE,CAAAyK,iBAAA,CAkCfG,aAAa,EAAc,CAAC;IAC3GF,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE/C;IAAsB,CAAC,CAAC;EAAE,CAAC;AAAA;AAErF,MAAM2D,eAAe,GAAG,GAAG;AAC3B,MAAMC,IAAI,CAAC;AAEX,IAAIC,cAAc;AAClB,CAAC,UAAUA,cAAc,EAAE;EACvBA,cAAc,CAAC,MAAM,CAAC,GAAG,MAAM;EAC/BA,cAAc,CAAC,MAAM,CAAC,GAAG,MAAM;AACnC,CAAC,EAAEA,cAAc,KAAKA,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC;AAC3C,MAAMC,4BAA4B,CAAC;EAC/B9E,WAAWA,CAAC+E,WAAW,EAAEC,MAAM,EAAE;IAC7B,IAAI,CAACD,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,gBAAgB,GAAG,CAAC,CAAC;IAC1B,IAAI,CAACC,mBAAmB,GAAG,IAAI3K,OAAO,CAAC,CAAC;EAC5C;EACA4K,iBAAiBA,CAAA,EAAG;IAChB,MAAM3D,SAAS,GAAG,IAAI,CAACsD,WAAW,CAAC5C,YAAY,CAAC,CAAC;IACjD,MAAMkD,OAAO,GAAG,IAAI,CAACN,WAAW,CAAC7C,aAAa,CAAC,CAAC;IAChD,IAAIoD,KAAK,GAAGD,OAAO,CAACE,OAAO,CAAC9D,SAAS,CAAC;IACtC,IAAI6D,KAAK,GAAG,CAAC,EAAE;MACXA,KAAK,GAAG,CAAC;MACT,IAAI7D,SAAS,KAAK+D,SAAS,EACvB,IAAI,CAACR,MAAM,CAACT,IAAI,CAAC,YAAY9C,SAAS,2DAA2D,CAAC;IAC1G;IACA,OAAO6D,KAAK;EAChB;EACAG,IAAIA,CAAA,EAAG;IACH,IAAI,CAACT,MAAM,CAACV,IAAI,CAAC,+BAA+B,CAAC;IACjD,IAAI,CAAC9C,KAAK,GAAG,EAAE;IACf,IAAI,CAAC0D,gBAAgB,GAAG,IAAI,CAACE,iBAAiB,CAAC,CAAC,GAAG,CAAC;IACpD,IAAIC,OAAO,GAAG,IAAI,CAACN,WAAW,CAAC7C,aAAa,CAAC,CAAC;IAC9CmD,OAAO,CAACK,OAAO,CAACC,MAAM,IAAI,IAAI,CAACnE,KAAK,CAACoE,IAAI,CAAC;MAAEC,EAAE,EAAEF,MAAM;MAAEG,IAAI,EAAE;IAAK,CAAC,CAAC,CAAC;EAC1E;EACAC,OAAOA,CAACC,SAAS,EAAE;IACf,IAAIC,SAAS,GAAG,IAAI,CAAChB,SAAS,CAACiB,MAAM,CAACJ,IAAI,IAAIA,IAAI,CAACK,IAAI,KAAKH,SAAS,CAACG,IAAI,CAAC,CAACC,MAAM,GAAG,CAAC;IACtF,IAAI,CAACH,SAAS,EAAE;MACZ,IAAI,CAACjB,MAAM,CAACV,IAAI,CAAC,eAAe0B,SAAS,CAACG,IAAI,qBAAqB,CAAC;MACpE,IAAI,CAAClB,SAAS,CAACW,IAAI,CAACI,SAAS,CAAC;IAClC,CAAC,MACI;MACD,IAAIK,kBAAkB,GAAG,IAAI,CAACpB,SAAS,CAACqB,SAAS,CAACR,IAAI,IAAIA,IAAI,CAACK,IAAI,KAAKH,SAAS,CAACG,IAAI,CAAC;MACvF,IAAI,CAAClB,SAAS,CAACoB,kBAAkB,CAAC,GAAGL,SAAS;IAClD;EACJ;EACAO,GAAGA,CAACC,MAAM,EAAE;IACR,IAAIA,MAAM,KAAK3B,cAAc,CAAC4B,IAAI,EAC9B,IAAI,CAACvB,gBAAgB,EAAE,CAAC,KAExB,IAAI,CAACA,gBAAgB,EAAE;IAC3B,IAAI,IAAI,CAACA,gBAAgB,GAAG,CAAC,IAAI,IAAI,CAACA,gBAAgB,IAAI,IAAI,CAAC1D,KAAK,CAAC4E,MAAM,EACvE,MAAM,IAAI3F,qBAAqB,CAAC,qDAAqD,CAAC;IAC1F,MAAMiG,QAAQ,GAAG,IAAI,CAACC,WAAW,CAAC,IAAI,CAACnF,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,CAAC,CAACW,EAAE,CAAC;IACvE,MAAMP,KAAK,GAAG,IAAI,CAACL,SAAS,CAACqB,SAAS,CAACR,IAAI,IAAIA,IAAI,CAACK,IAAI,KAAKO,QAAQ,CAAC;IACtE,IAAIE,SAAS,GAAG,IAAI,CAAC3B,SAAS,CAACK,KAAK,CAAC;IACrC,IAAI,CAAC9D,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,CAAC,CAACY,IAAI,GAAGc,SAAS;IAClD,IAAIA,SAAS,IAAI,IAAI,EAAE;MACnB,IAAI,CAAC5B,MAAM,CAACT,IAAI,CAAC,QAAQ,IAAI,CAAC/C,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,CAAC,CAACW,EAAE,iEAAiE,CAAC;IACnI;IACA,OAAOe,SAAS;EACpB;EACAC,YAAYA,CAACL,MAAM,EAAE;IACjB,IAAIM,MAAM;IACV,IAAIN,MAAM,KAAK3B,cAAc,CAAC4B,IAAI,EAAE;MAChCK,MAAM,GAAG,IAAI,CAACtF,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC1D,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,GAAG,CAAC,CAAC,CAACW,EAAE,GAAG,IAAI;IACpG,CAAC,MACI;MACDiB,MAAM,GAAG,IAAI,CAACtF,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC1D,KAAK,CAAC,IAAI,CAAC0D,gBAAgB,GAAG,CAAC,CAAC,CAACW,EAAE,GAAG,IAAI;IACpG;IACA,IAAIkB,SAAS,GAAGD,MAAM,IAAIA,MAAM,CAACE,QAAQ,CAACrC,eAAe,CAAC,GAAGmC,MAAM,CAACG,KAAK,CAACtC,eAAe,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAClG,OAAOoC,SAAS;EACpB;EACAG,cAAcA,CAACR,QAAQ,EAAES,QAAQ,EAAE;IAC/B,IAAI7B,KAAK,GAAG,IAAI,CAAC8B,YAAY,CAACV,QAAQ,CAAC;IACvC,IAAI,IAAI,CAAClF,KAAK,CAAC8D,KAAK,CAAC,CAACQ,IAAI,EAAE;MACxB,IAAI,CAACtE,KAAK,CAAC8D,KAAK,CAAC,CAACQ,IAAI,CAACqB,QAAQ,GAAGA,QAAQ;MAC1C,IAAI,CAAChC,mBAAmB,CAACpG,IAAI,CAAC,IAAI,CAACyC,KAAK,CAAC8D,KAAK,CAAC,CAACQ,IAAI,CAAC;IACzD,CAAC,MACI;MACD,IAAI,CAACd,MAAM,CAACT,IAAI,CAAC,oCAAoCmC,QAAQ,OAAOS,QAAQ,6DAA6D,CAAC;IAC9I;EACJ;EACAE,aAAaA,CAACX,QAAQ,EAAE;IACpB,OAAO,IAAI,CAACU,YAAY,CAACV,QAAQ,CAAC,GAAG,CAAC;EAC1C;EACAY,aAAaA,CAAA,EAAG;IACZ,IAAIjG,UAAU,GAAG,IAAI,CAAC0D,WAAW,CAAC7C,aAAa,CAAC,CAAC;IACjD,OAAOb,UAAU,CAAC+E,MAAM;EAC5B;EACAgB,YAAYA,CAACV,QAAQ,EAAE;IACnB,MAAMpB,KAAK,GAAG,IAAI,CAAC9D,KAAK,CACnB+F,GAAG,CAACzB,IAAI,IAAKA,IAAI,CAACD,EAAE,CAACmB,QAAQ,CAACrC,eAAe,CAAC,GAAGmB,IAAI,CAACD,EAAE,CAACoB,KAAK,CAACtC,eAAe,CAAC,CAAC,CAAC,CAAC,GAAGmB,IAAI,CAACD,EAAG,CAAC,CAC9FS,SAAS,CAACH,IAAI,IAAIO,QAAQ,KAAKP,IAAI,CAAC;IACzC,IAAIb,KAAK,KAAK,CAAC,CAAC,EACZ,MAAM,IAAIpF,YAAY,CAAC,uBAAuBwG,QAAQ,mCAAmC,CAAC;IAC9F,OAAOpB,KAAK;EAChB;EACAqB,WAAWA,CAACG,MAAM,EAAE;IAChB,IAAIJ,QAAQ,GAAGI,MAAM,IAAIA,MAAM,CAACE,QAAQ,CAACrC,eAAe,CAAC,GAAGmC,MAAM,CAACG,KAAK,CAACtC,eAAe,CAAC,CAAC,CAAC,CAAC,GAAGmC,MAAM;IACrG,OAAOJ,QAAQ;EACnB;AACJ;AACA5B,4BAA4B,CAACxB,IAAI,YAAAkE,qCAAAhE,CAAA;EAAA,YAAAA,CAAA,IAAwFsB,4BAA4B,EA5I7CzL,EAAE,CAAAqL,QAAA,CA4I6D1D,qBAAqB,GA5IpF3H,EAAE,CAAAqL,QAAA,CA4I+FT,aAAa;AAAA,CAA6C;AACnQa,4BAA4B,CAACrB,KAAK,kBA7IsEpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EA6ImBmB,4BAA4B;EAAAlB,OAAA,EAA5BkB,4BAA4B,CAAAxB;AAAA,EAAG;AAC5J;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA9IwGxK,EAAE,CAAAyK,iBAAA,CA8IfgB,4BAA4B,EAAc,CAAC;IAC1Hf,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE/C;IAAsB,CAAC,EAAE;MAAE+C,IAAI,EAAEE;IAAc,CAAC,CAAC;EAAE,CAAC;AAAA;AAE9G,MAAMwD,aAAa,CAAC;EAChBzH,WAAWA,CAAC0H,UAAU,EAAE;IACpB,IAAI,CAACA,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,YAAY,GAAG;MAAEC,IAAI,EAAE,CAAC,CAAC;MAAEC,eAAe,EAAE,CAAC;IAAE,CAAC;IACrD,IAAI,CAACC,UAAU,GAAG;MAAEC,QAAQ,EAAE,IAAI,CAACJ,YAAY;MAAEK,SAAS,EAAE,CAAC;IAAE,CAAC;EACpE;EACAC,eAAeA,CAAA,EAAG;IACd,IAAI9N,iBAAiB,CAAC,IAAI,CAACuN,UAAU,CAAC,EAClC,OAAOQ,MAAM,CAAC,KAEd,OAAO,IAAI,CAACJ,UAAU;EAC9B;EACAK,iBAAiBA,CAAA,EAAG;IAChB,IAAIhO,iBAAiB,CAAC,IAAI,CAACuN,UAAU,CAAC,EAClC,OAAOK,QAAQ,CAAC,KAEhB,OAAO,IAAI,CAACJ,YAAY;EAChC;AACJ;AACAF,aAAa,CAACnE,IAAI,YAAA8E,sBAAA5E,CAAA;EAAA,YAAAA,CAAA,IAAwFiE,aAAa,EArKfpO,EAAE,CAAAqL,QAAA,CAqK+BnL,WAAW;AAAA,CAA6C;AACjMkO,aAAa,CAAChE,KAAK,kBAtKqFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAsKI8D,aAAa;EAAA7D,OAAA,EAAb6D,aAAa,CAAAnE;AAAA,EAAG;AAC9H;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAvKwGxK,EAAE,CAAAyK,iBAAA,CAuKf2D,aAAa,EAAc,CAAC;IAC3G1D,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE1D,MAAM;MAAEgI,UAAU,EAAE,CAAC;QAC3DtE,IAAI,EAAEvK,MAAM;QACZ8O,IAAI,EAAE,CAAC/O,WAAW;MACtB,CAAC;IAAE,CAAC,CAAC;EAAE,CAAC;AAAA;AAExB,MAAMgP,gBAAgB,CAAC;EACnBC,aAAaA,CAACC,QAAQ,EAAE;IACpB,IAAI,CAACC,WAAW,GAAGD,QAAQ;EAC/B;EACAE,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACD,WAAW;EAC3B;EACAE,aAAaA,CAACH,QAAQ,EAAE;IACpB,IAAI,CAACI,WAAW,GAAGJ,QAAQ;EAC/B;EACAK,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACD,WAAW;EAC3B;EACAE,aAAaA,CAACN,QAAQ,EAAE;IACpB,IAAI,CAACO,WAAW,GAAGP,QAAQ;EAC/B;EACAQ,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACD,WAAW;EAC3B;EACAE,UAAUA,CAACT,QAAQ,EAAE;IACjB,IAAI,CAACU,QAAQ,GAAGV,QAAQ;EAC5B;EACAW,UAAUA,CAAA,EAAG;IACT,OAAO,IAAI,CAACD,QAAQ;EACxB;AACJ;AACAZ,gBAAgB,CAACjF,IAAI,YAAA+F,yBAAA7F,CAAA;EAAA,YAAAA,CAAA,IAAwF+E,gBAAgB;AAAA,CAAoD;AACjLA,gBAAgB,CAAC9E,KAAK,kBAzMkFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAyMO4E,gBAAgB;EAAA3E,OAAA,EAAhB2E,gBAAgB,CAAAjF;AAAA,EAAG;AACpI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA1MwGxK,EAAE,CAAAyK,iBAAA,CA0MfyE,gBAAgB,EAAc,CAAC;IAC9GxE,IAAI,EAAEzK;EACV,CAAC,CAAC;AAAA;AAEV,MAAMgQ,WAAW,GAAG,aAAa;AACjC,MAAMC,gBAAgB,CAAC;EACnBvJ,WAAWA,CAACwJ,qBAAqB,EAAEC,gBAAgB,EAAEC,UAAU,EAAEC,MAAM,EAAEC,eAAe,EAAElC,UAAU,EAAE;IAClG,IAAI,CAAC8B,qBAAqB,GAAGA,qBAAqB;IAClD,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;IACxC,IAAI,CAACC,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,eAAe,GAAGA,eAAe;IACtC,IAAI,CAAClC,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACmC,YAAY,GAAGP,WAAW;IAC/B,IAAI,CAACnL,IAAI,GAAG,IAAI1E,YAAY,CAAC,CAAC;IAC9B,IAAI,CAACsF,IAAI,GAAG,IAAItF,YAAY,CAAC,CAAC;IAC9B,IAAI,CAACsH,IAAI,GAAG,IAAItH,YAAY,CAAC,CAAC;IAC9B,IAAI,CAACqQ,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,SAAS,GAAG,IAAI,CAACL,UAAU,CAACzB,eAAe,CAAC,CAAC;IAClD,IAAI,CAACnC,IAAI,GAAG,IAAI/F,WAAW,CAAC,CAAC;EACjC;EACAiK,eAAeA,CAAA,EAAG;IACd,IAAI,CAAC7P,iBAAiB,CAAC,IAAI,CAACuN,UAAU,CAAC,EACnC;IACJ,IAAI,IAAI,CAACuC,YAAY,EACjB,IAAI,CAACL,eAAe,CAACpB,aAAa,CAAC,IAAI,CAACyB,YAAY,CAAC;IACzD,IAAI,IAAI,CAACC,YAAY,EACjB,IAAI,CAACN,eAAe,CAAChB,aAAa,CAAC,IAAI,CAACsB,YAAY,CAAC;IACzD,IAAI,IAAI,CAACC,YAAY,EACjB,IAAI,CAACP,eAAe,CAACb,aAAa,CAAC,IAAI,CAACoB,YAAY,CAAC;IACzD,IAAI,IAAI,CAACC,eAAe,EACpB,IAAI,CAACR,eAAe,CAACV,UAAU,CAAC,IAAI,CAACkB,eAAe,CAAC;IACzD,IAAI,CAACtE,IAAI,CAACqB,QAAQ,GAAG,IAAI,CAAC0C,YAAY;IACtC,IAAI,CAAC/D,IAAI,CAACuE,mBAAmB,GAAG,IAAI,CAACZ,gBAAgB;IACrD,IAAI,CAACa,cAAc,CAAC,IAAI,CAACxE,IAAI,CAAC;IAC9B,IAAI,CAACA,IAAI,CAACyE,WAAW,GAAG,IAAI,CAACA,WAAW;IACxC,IAAI,CAACzE,IAAI,CAAC0E,iBAAiB,GAAG,IAAI,CAACA,iBAAiB;IACpD,IAAI,CAAC1E,IAAI,CAAC2E,WAAW,GAAG,IAAI,CAAC1L,IAAI;IACjC,IAAI,CAAC+G,IAAI,CAAC4E,UAAU,GAAG,IAAI,CAACvM,IAAI;IAChC,IAAI,CAAC2H,IAAI,CAAC6E,QAAQ,GAAG,IAAI,CAAC5J,IAAI;IAC9B,IAAI,CAAC,IAAI,CAACoF,IAAI,EACV,MAAM,IAAIjG,YAAY,CAAC,8EAA8E,CAAC;IAC1G,IAAI,CAAC4F,IAAI,CAACK,IAAI,GAAG,IAAI,CAACA,IAAI;IAC1B,IAAI,CAACL,IAAI,CAAC8E,KAAK,GAAG,IAAI,CAACjB,MAAM,CAACkB,GAAG,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,GAAG,IAAI,CAACnB,MAAM,CAACkB,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAACnB,MAAM,CAACkB,GAAG;IACpG,IAAI,CAAC/E,IAAI,CAACiF,iBAAiB,GAAG,IAAI,CAAChB,SAAS,CAACiB,gBAAgB,CAAC,IAAI,CAACvB,gBAAgB,CAACwB,OAAO,CAACC,aAAa,CAAC,CAACC,SAAS;IACpH,IAAI,CAACrF,IAAI,CAACsF,wBAAwB,GAC9B,IAAI,CAACC,cAAc,CAAC,IAAI,CAAC5B,gBAAgB,CAACwB,OAAO,CAAC,IAC9C,IAAI,CAACK,gBAAgB,CAAC,IAAI,CAAC7B,gBAAgB,CAACwB,OAAO,CAACC,aAAa,CAACK,aAAa,CAAC;IACxF,IAAI,CAAC/B,qBAAqB,CAACzD,OAAO,CAAC,IAAI,CAACD,IAAI,CAAC;EACjD;EACA0F,WAAWA,CAACC,OAAO,EAAE;IACjB,IAAIA,OAAO,CAAC,OAAO,CAAC,IAAIA,OAAO,CAAC,MAAM,CAAC,EAAE;MACrC,IAAI,CAACnB,cAAc,CAAC,IAAI,CAACxE,IAAI,CAAC;IAClC;EACJ;EACAuF,cAAcA,CAACJ,OAAO,EAAE;IACpB,OAAO,IAAI,CAAClB,SAAS,CAACiB,gBAAgB,CAACC,OAAO,CAACC,aAAa,CAAC,CAAC/D,QAAQ,KAAK,OAAO;EACtF;EACAmD,cAAcA,CAACxE,IAAI,EAAE;IACjB,IAAI,IAAI,CAAC7F,KAAK,YAAY1F,UAAU,EAAE;MAClC,IAAI,CAACuP,aAAa,CAAClE,IAAI,CAAC,IAAI,CAAC3F,KAAK,CAACyL,SAAS,CAACzL,KAAK,IAAI;QAClD6F,IAAI,CAAC7F,KAAK,CAAClB,IAAI,CAACkB,KAAK,CAAC;MAC1B,CAAC,CAAC,CAAC;IACP,CAAC,MACI;MACD6F,IAAI,CAAC7F,KAAK,CAAClB,IAAI,CAAC,IAAI,CAACkB,KAAK,CAAC;IAC/B;IACA,IAAI,IAAI,CAAC3D,IAAI,YAAY/B,UAAU,EAAE;MACjC,IAAI,CAACuP,aAAa,CAAClE,IAAI,CAAC,IAAI,CAACtJ,IAAI,CAACoP,SAAS,CAACpP,IAAI,IAAI;QAChDwJ,IAAI,CAACxJ,IAAI,CAACyC,IAAI,CAACzC,IAAI,CAAC;MACxB,CAAC,CAAC,CAAC;IACP,CAAC,MACI;MACDwJ,IAAI,CAACxJ,IAAI,CAACyC,IAAI,CAAC,IAAI,CAACzC,IAAI,CAAC;IAC7B;EACJ;EACAgP,gBAAgBA,CAACJ,aAAa,EAAE;IAC5B,IAAI,CAACA,aAAa,IAAI,CAACA,aAAa,CAACK,aAAa,EAC9C,OAAO,KAAK;IAChB,IAAIF,cAAc,GAAG,IAAI,CAACtB,SAAS,CAACiB,gBAAgB,CAACE,aAAa,CAACK,aAAa,CAAC,CAACpE,QAAQ,KAAK,OAAO;IACtG,IAAI+D,aAAa,CAACS,QAAQ,KAAK,MAAM,EAAE;MACnC,OAAON,cAAc;IACzB;IACA,IAAIA,cAAc,EACd,OAAO,IAAI,CAAC,KAEZ,OAAO,IAAI,CAACC,gBAAgB,CAACJ,aAAa,CAACK,aAAa,CAAC;EACjE;EACAK,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC9B,aAAa,CAACpE,OAAO,CAACmG,GAAG,IAAI;MAC9BA,GAAG,CAACC,WAAW,CAAC,CAAC;IACrB,CAAC,CAAC;EACN;AACJ;AACAvC,gBAAgB,CAACjG,IAAI,YAAAyI,yBAAAvI,CAAA;EAAA,YAAAA,CAAA,IAAwF+F,gBAAgB,EAxSrBlQ,EAAE,CAAA2S,iBAAA,CAwSqClH,4BAA4B,GAxSnEzL,EAAE,CAAA2S,iBAAA,CAwS8E3S,EAAE,CAAC4S,gBAAgB,GAxSnG5S,EAAE,CAAA2S,iBAAA,CAwS8GvE,aAAa,GAxS7HpO,EAAE,CAAA2S,iBAAA,CAwSwIvR,EAAE,CAACyR,MAAM,GAxSnJ7S,EAAE,CAAA2S,iBAAA,CAwS8JzD,gBAAgB,GAxShLlP,EAAE,CAAA2S,iBAAA,CAwS2LzS,WAAW;AAAA,CAA4C;AAC5VgQ,gBAAgB,CAAC4C,IAAI,kBAzSmF9S,EAAE,CAAA+S,iBAAA;EAAArI,IAAA,EAySTwF,gBAAgB;EAAA8C,SAAA;EAAAC,MAAA;IAAAnG,IAAA;IAAAoG,QAAA;IAAAtM,KAAA;IAAA3D,IAAA;IAAAuN,YAAA;IAAAU,WAAA;IAAAC,iBAAA;IAAAP,YAAA;IAAAC,YAAA;IAAAC,YAAA;IAAAC,eAAA;EAAA;EAAAoC,OAAA;IAAArO,IAAA;IAAAY,IAAA;IAAAgC,IAAA;EAAA;EAAA0L,QAAA,GAzSTpT,EAAE,CAAAqT,oBAAA;AAAA,EAyS2c;AACrjB;EAAA,QAAA7I,SAAA,oBAAAA,SAAA,KA1SwGxK,EAAE,CAAAyK,iBAAA,CA0SfyF,gBAAgB,EAAc,CAAC;IAC9GxF,IAAI,EAAErK,SAAS;IACf4O,IAAI,EAAE,CAAC;MACCqE,QAAQ,EAAE;IACd,CAAC;EACT,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAE5I,IAAI,EAAEe;IAA6B,CAAC,EAAE;MAAEf,IAAI,EAAE1K,EAAE,CAAC4S;IAAiB,CAAC,EAAE;MAAElI,IAAI,EAAE0D;IAAc,CAAC,EAAE;MAAE1D,IAAI,EAAEtJ,EAAE,CAACyR;IAAO,CAAC,EAAE;MAAEnI,IAAI,EAAEwE;IAAiB,CAAC,EAAE;MAAExE,IAAI,EAAE1D,MAAM;MAAEgI,UAAU,EAAE,CAAC;QAC5MtE,IAAI,EAAEvK,MAAM;QACZ8O,IAAI,EAAE,CAAC/O,WAAW;MACtB,CAAC;IAAE,CAAC,CAAC;EAAE,CAAC,EAAkB;IAAE4M,IAAI,EAAE,CAAC;MACnCpC,IAAI,EAAEpK,KAAK;MACX2O,IAAI,EAAE,CAAC,aAAa;IACxB,CAAC,CAAC;IAAEiE,QAAQ,EAAE,CAAC;MACXxI,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEsG,KAAK,EAAE,CAAC;MACR8D,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAE2C,IAAI,EAAE,CAAC;MACPyH,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEkQ,YAAY,EAAE,CAAC;MACf9F,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAE4Q,WAAW,EAAE,CAAC;MACdxG,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAE6Q,iBAAiB,EAAE,CAAC;MACpBzG,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEsQ,YAAY,EAAE,CAAC;MACflG,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEuQ,YAAY,EAAE,CAAC;MACfnG,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEwQ,YAAY,EAAE,CAAC;MACfpG,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEyQ,eAAe,EAAE,CAAC;MAClBrG,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEwE,IAAI,EAAE,CAAC;MACP4F,IAAI,EAAEnK;IACV,CAAC,CAAC;IAAEmF,IAAI,EAAE,CAAC;MACPgF,IAAI,EAAEnK;IACV,CAAC,CAAC;IAAEmH,IAAI,EAAE,CAAC;MACPgD,IAAI,EAAEnK;IACV,CAAC;EAAE,CAAC;AAAA;AAEhB,MAAMgT,eAAe,CAAC;AAGtB,MAAMC,eAAe,CAAC;EAClB7M,WAAWA,CAAC8M,UAAU,EAAEpF,UAAU,EAAE;IAChC,IAAI,CAACoF,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAAC3S,iBAAiB,CAACuN,UAAU,CAAC,EAAE;MAChC;IACJ;IACA,IAAI,CAACqF,iBAAiB,CAAC,CAAC;IACxB,IAAIC,GAAG,GAAGF,UAAU,CAAC3E,iBAAiB,CAAC,CAAC;IACxC,IAAI6E,GAAG,IAAI,CAACA,GAAG,CAACC,iBAAiB,EAAE;MAC/B;MACAD,GAAG,CAACC,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAAC;IAC7D;EACJ;EACAC,kBAAkBA,CAACC,UAAU,EAAE;IAC3B,OAAOA,UAAU,CAAClC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACC,GAAG;EAC/D;EACAC,mBAAmBA,CAACH,UAAU,EAAE;IAC5B,OAAOA,UAAU,CAAClC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACG,IAAI;EAChE;EACAC,qBAAqBA,CAACL,UAAU,EAAE;IAC9B,MAAMM,aAAa,GAAG,IAAI,CAACC,gBAAgB,CAAC,CAAC;IAC7C,OAAQP,UAAU,CAAClC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACC,GAAG,GACxDI,aAAa,CAACE,CAAC;EACvB;EACAC,sBAAsBA,CAACT,UAAU,EAAE;IAC/B,MAAMM,aAAa,GAAG,IAAI,CAACC,gBAAgB,CAAC,CAAC;IAC7C,OAAQP,UAAU,CAAClC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACG,IAAI,GACzDE,aAAa,CAACI,CAAC;EACvB;EACAf,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACgB,cAAc,GAAG,IAAI,CAACC,uBAAuB,CAAC,CAAC;EACxD;EACAC,iBAAiBA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACF,cAAc;EAC9B;EACAG,kBAAkBA,CAACd,UAAU,EAAE;IAC3B,OAAQ,IAAI,CAACe,wBAAwB,CAACf,UAAU,CAAClC,aAAa,CAAC,KAC3D,IAAI,CAAC4B,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI;EAChD;EACAwG,qBAAqBA,CAAChB,UAAU,EAAE/B,cAAc,EAAEgD,gBAAgB,EAAE;IAChE,MAAMC,EAAE,GAAGjD,cAAc,GACnB,IAAI,CAACkC,mBAAmB,CAACH,UAAU,CAAC,GACpC,IAAI,CAACS,sBAAsB,CAACT,UAAU,CAAC;IAC7C,MAAMmB,EAAE,GAAGlD,cAAc,GACnB,IAAI,CAAC8B,kBAAkB,CAACC,UAAU,CAAC,GACnC,IAAI,CAACK,qBAAqB,CAACL,UAAU,CAAC;IAC5C,MAAMoB,EAAE,GAAGF,EAAE,GAAGlB,UAAU,CAAClC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACoB,KAAK,GAAG,CAAC;IAC1E,MAAMC,EAAE,GAAGH,EAAE,GAAGnB,UAAU,CAAClC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACsB,MAAM,GAAG,CAAC;IAC3E,MAAMC,SAAS,GAAG,IAAI,CAAC9B,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAAC8E,iBAAiB,CAACqB,EAAE,EAAEC,EAAE,CAAC;IAC/E,MAAMM,SAAS,GAAG,IAAI,CAAC/B,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAAC8E,iBAAiB,CAACuB,EAAE,EAAEE,EAAE,CAAC;IAC/E,IAAIE,SAAS,CAACxI,MAAM,KAAK,CAAC,IAAIyI,SAAS,CAACzI,MAAM,KAAK,CAAC,EAChD,OAAO,CAAC;IACZ,IAAI,IAAI,CAAC0I,6BAA6B,CAACF,SAAS,EAAEP,gBAAgB,CAAC,KAC/DjB,UAAU,CAAClC,aAAa,IACxB,IAAI,CAAC4D,6BAA6B,CAACD,SAAS,EAAER,gBAAgB,CAAC,KAC3DjB,UAAU,CAAClC,aAAa,EAAE;MAC9B,OAAO,CAAC;IACZ;IACA,OAAO,CAAC;EACZ;EACA6D,cAAcA,CAAC3B,UAAU,EAAE/B,cAAc,EAAE;IACvC,MAAM2D,qBAAqB,GAAG,IAAI,CAACb,wBAAwB,CAACf,UAAU,CAAClC,aAAa,CAAC;IACrF,MAAMoC,GAAG,GAAGjC,cAAc,GACpB,IAAI,CAAC8B,kBAAkB,CAACC,UAAU,CAAC,GACnC,IAAI,CAACK,qBAAqB,CAACL,UAAU,CAAC;IAC5C,IAAI4B,qBAAqB,KAAK,IAAI,CAAClC,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,EAAE;MACpE,IAAIoH,qBAAqB,CAACC,QAAQ,EAAE;QAChCD,qBAAqB,CAACC,QAAQ,CAAC,CAAC,EAAE3B,GAAG,GAAG,GAAG,CAAC;MAChD,CAAC,MACI;QACD;QACA0B,qBAAqB,CAACE,SAAS,GAAG5B,GAAG,GAAG,GAAG;MAC/C;IACJ,CAAC,MACI;MACD,IAAI,CAACR,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACgH,QAAQ,CAAC,CAAC,EAAE3B,GAAG,GAAG,GAAG,CAAC;IAC5D;EACJ;EACA6B,cAAcA,CAAC/B,UAAU,EAAE;IACvB,MAAM4B,qBAAqB,GAAG,IAAI,CAACb,wBAAwB,CAACf,UAAU,CAAClC,aAAa,CAAC;IACrF,IAAI8D,qBAAqB,KAAK,IAAI,CAAClC,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,EAAE;MACpE,IAAIoH,qBAAqB,CAACC,QAAQ,EAAE;QAChCD,qBAAqB,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MACxC,CAAC,MACI;QACD;QACAD,qBAAqB,CAACE,SAAS,GAAG,CAAC;MACvC;IACJ,CAAC,MACI;MACD,IAAI,CAACpC,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACgH,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IACpD;EACJ;EACAG,iBAAiBA,CAAChC,UAAU,EAAE;IAC1B,MAAM4B,qBAAqB,GAAG,IAAI,CAACb,wBAAwB,CAACf,UAAU,CAAClC,aAAa,CAAC;IACrF,IAAI8D,qBAAqB,KAAK,IAAI,CAAClC,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,EAAE;MACpE,IAAIoH,qBAAqB,CAACC,QAAQ,EAAE;QAChCD,qBAAqB,CAACC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAACnC,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,CAACyH,YAAY,CAAC;MAC5F,CAAC,MACI;QACD;QACAL,qBAAqB,CAACE,SAAS,GAC3BF,qBAAqB,CAACK,YAAY,GAC9BL,qBAAqB,CAACM,YAAY;MAC9C;IACJ,CAAC,MACI;MACD,IAAI,CAACxC,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACgH,QAAQ,CAAC,CAAC,EAAE,IAAI,CAACnC,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,CAACyH,YAAY,CAAC;IACxG;EACJ;EACAlB,wBAAwBA,CAACoB,IAAI,EAAE;IAC3B,MAAMC,KAAK,GAAG,uBAAuB;IACrC,MAAMC,KAAK,GAAGA,CAACF,IAAI,EAAEG,IAAI,KAAK,IAAI,CAAC5C,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAC1D+C,gBAAgB,CAACuE,IAAI,EAAE,IAAI,CAAC,CAC5BI,gBAAgB,CAACD,IAAI,CAAC;IAC3B,MAAME,MAAM,GAAIL,IAAI,IAAKC,KAAK,CAACK,IAAI,CAACJ,KAAK,CAACF,IAAI,EAAE,UAAU,CAAC,GACvDE,KAAK,CAACF,IAAI,EAAE,YAAY,CAAC,GACzBE,KAAK,CAACF,IAAI,EAAE,YAAY,CAAC,CAAC;IAC9B,MAAMO,YAAY,GAAIP,IAAI,IAAK;MAC3B,OAAO,CAACA,IAAI,IAAIA,IAAI,KAAK,IAAI,CAACzC,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,GAC3D,IAAI,CAACkF,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAACP,IAAI,GACxCgI,MAAM,CAACL,IAAI,CAAC,GACRA,IAAI,GACJO,YAAY,CAACP,IAAI,CAACQ,UAAU,CAAC;IAC3C,CAAC;IACD,OAAOD,YAAY,CAACP,IAAI,CAAC;EAC7B;EACAvB,uBAAuBA,CAAA,EAAG;IACtB,MAAMgC,WAAW,GAAG,IAAI,CAAClD,UAAU,CAAC3E,iBAAiB,CAAC,CAAC;IACvD,OAAO8H,IAAI,CAACC,GAAG,CAACF,WAAW,CAACpI,IAAI,CAACyH,YAAY,EAAEW,WAAW,CAACnI,eAAe,CAACwH,YAAY,EAAEW,WAAW,CAACpI,IAAI,CAACuI,YAAY,EAAEH,WAAW,CAACnI,eAAe,CAACsI,YAAY,EAAEH,WAAW,CAACpI,IAAI,CAAC0H,YAAY,EAAEU,WAAW,CAACnI,eAAe,CAACyH,YAAY,CAAC;EAC9O;EACA3B,gBAAgBA,CAAA,EAAG;IACf,MAAMyC,YAAY,GAAG,IAAI,CAACtD,UAAU,CAAC7E,eAAe,CAAC,CAAC;IACtD,MAAMoI,YAAY,GAAG,IAAI,CAACvD,UAAU,CAAC3E,iBAAiB,CAAC,CAAC;IACxD;IACA,IAAIiI,YAAY,CAACE,WAAW,IAAI,IAAI,EAChC,OAAO;MAAExC,CAAC,EAAEsC,YAAY,CAACE,WAAW;MAAE1C,CAAC,EAAEwC,YAAY,CAACG;IAAY,CAAC;IACvE;IACA,IAAIF,YAAY,CAACG,UAAU,IAAI,YAAY,EACvC,OAAO;MACH1C,CAAC,EAAEuC,YAAY,CAACxI,eAAe,CAAC4I,UAAU;MAC1C7C,CAAC,EAAEyC,YAAY,CAACxI,eAAe,CAACqH;IACpC,CAAC;IACL;IACA,OAAO;MACHpB,CAAC,EAAEuC,YAAY,CAACzI,IAAI,CAAC6I,UAAU;MAC/B7C,CAAC,EAAEyC,YAAY,CAACzI,IAAI,CAACsH;IACzB,CAAC;EACL;EACAjC,iBAAiBA,CAACa,CAAC,EAAEF,CAAC,EAAE;IACpB,IAAI8C,OAAO,GAAG,EAAE;IAChB,IAAIC,MAAM,GAAG,KAAK,CAAC;IACnB,GAAG;MACC,MAAMC,IAAI,GAAG,IAAI,CAAC9D,UAAU,CAAC3E,iBAAiB,CAAC,CAAC,CAAC0I,gBAAgB,CAAC/C,CAAC,EAAEF,CAAC,CAAC;MACvE,IAAIgD,IAAI,IAAID,MAAM,KAAKC,IAAI,EAAE;QACzBD,MAAM,GAAGC,IAAI;QACbF,OAAO,CAAC9K,IAAI,CAAC+K,MAAM,CAAC;QACpBA,MAAM,CAAClB,KAAK,CAACqB,aAAa,GAAG,MAAM;MACvC,CAAC,MACI;QACDH,MAAM,GAAG,KAAK;MAClB;IACJ,CAAC,QAAQA,MAAM;IACfD,OAAO,CAAChL,OAAO,CAAC,UAAUiL,MAAM,EAAE;MAC9B,OAAQA,MAAM,CAAClB,KAAK,CAACqB,aAAa,GAAG,KAAK;IAC9C,CAAC,CAAC;IACF,OAAOJ,OAAO;EAClB;EACA5B,6BAA6BA,CAACiC,QAAQ,EAAEC,OAAO,EAAE;IAC7C,OAAOD,QAAQ,CAAC,CAAC,CAAC,IACdA,QAAQ,CAAC,CAAC,CAAC,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAAClK,QAAQ,CAACgK,OAAO,CAAC,EAAE;MACpDD,QAAQ,CAACI,KAAK,CAAC,CAAC;IACpB;IACA,OAAOJ,QAAQ,CAAC,CAAC,CAAC;EACtB;AACJ;AACAlE,eAAe,CAACvJ,IAAI,YAAA8N,wBAAA5N,CAAA;EAAA,YAAAA,CAAA,IAAwFqJ,eAAe,EApgBnBxT,EAAE,CAAAqL,QAAA,CAogBmC+C,aAAa,GApgBlDpO,EAAE,CAAAqL,QAAA,CAogB6DnL,WAAW;AAAA,CAA6C;AAC/NsT,eAAe,CAACpJ,KAAK,kBArgBmFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAqgBMkJ,eAAe;EAAAjJ,OAAA,EAAfiJ,eAAe,CAAAvJ;AAAA,EAAG;AAClI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAtgBwGxK,EAAE,CAAAyK,iBAAA,CAsgBf+I,eAAe,EAAc,CAAC;IAC7G9I,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE0D;IAAc,CAAC,EAAE;MAAE1D,IAAI,EAAE1D,MAAM;MAAEgI,UAAU,EAAE,CAAC;QACpFtE,IAAI,EAAEvK,MAAM;QACZ8O,IAAI,EAAE,CAAC/O,WAAW;MACtB,CAAC;IAAE,CAAC,CAAC;EAAE,CAAC;AAAA;AAExB,MAAM8X,sBAAsB,CAAC;EACzBrR,WAAWA,CAACsR,eAAe,EAAEC,cAAc,EAAEC,eAAe,EAAE;IAC1D,IAAI,CAACF,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACC,cAAc,GAAGA,cAAc;IACpC,IAAI,CAACC,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,WAAW,CAAC,CAAC;EACtB;EACAA,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACJ,eAAe,CAACK,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC;EACnE;EACAC,IAAIA,CAAChM,IAAI,EAAE;IACP,IAAI,CAACsH,UAAU,GAAGtH,IAAI,CAACuE,mBAAmB;IAC1C,IAAI,CAAC0H,iBAAiB,GAAG,IAAI,CAACC,iBAAiB,CAAClM,IAAI,CAAC;IACrD,IAAI,CAACmM,kBAAkB,GAAG,IAAI,CAACC,kBAAkB,CAACpM,IAAI,CAAC;IACvD,IAAI,CAACqM,wBAAwB,GAAG,IAAI,CAACP,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IAClE,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACF,wBAAwB,EAAE,oBAAoB,CAAC;IAC3E,IAAI,CAACP,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACH,wBAAwB,EAAE,UAAU,EAAE,OAAO,CAAC;IAC1E,IAAI,CAACP,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACH,wBAAwB,EAAE,KAAK,EAAE,KAAK,CAAC;IACnE,IAAI,CAACP,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACH,wBAAwB,EAAE,MAAM,EAAE,KAAK,CAAC;IACpE,IAAI,CAACP,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACH,wBAAwB,EAAE,OAAO,EAAE,MAAM,CAAC;IACtE,IAAI,CAACP,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACH,wBAAwB,EAAE,QAAQ,EAAE,MAAM,CAAC;IACvE,IAAI,CAACP,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACH,wBAAwB,EAAE,SAAS,EAAE,MAAM,CAAC;IACxE,IAAI,CAACP,QAAQ,CAACW,YAAY,CAAC,IAAI,CAACJ,wBAAwB,EAAE,IAAI,EAAE,WAAW,GAAGrM,IAAI,CAACK,IAAI,CAAC;IACxF,IAAI,CAACqM,eAAe,GAAG,IAAI,CAACZ,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACzD,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACG,eAAe,EAAE,kBAAkB,CAAC;IAChE,IAAI,CAACZ,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACE,eAAe,EAAE,UAAU,EAAE,UAAU,CAAC;IACpE,IAAI,CAACZ,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACE,eAAe,EAAE,QAAQ,EAAE,MAAM,CAAC;IAC9D,IAAI,CAACZ,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACE,eAAe,EAAE,SAAS,EAAE,MAAM,CAAC;IAC/D,IAAI,CAACZ,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACE,eAAe,EAAE,gBAAgB,EAAE,QAAQ,CAAC;IACxE,IAAI,CAACZ,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACN,wBAAwB,EAAE,IAAI,CAACK,eAAe,CAAC;IAC9E,IAAI,CAACE,WAAW,GAAG,IAAI,CAACd,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACrD,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACK,WAAW,EAAE,kBAAkB,CAAC;IAC5D,IAAI,CAACd,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACK,WAAW,EAAE,cAAc,CAAC;IACxD,IAAI,CAACd,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACI,WAAW,EAAE,OAAO,EAAE,MAAM,CAAC;IACzD,IAAI,CAACd,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACI,WAAW,EAAE,QAAQ,EAAE,IAAI,CAACX,iBAAiB,GAAG,IAAI,CAACL,WAAW,GAAG,IAAI,CAAC;IACpG,IAAI,CAACE,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACI,WAAW,EAAE,aAAa,EAAE,GAAG,CAAC;IAC5D,IAAI,CAACd,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACI,WAAW,EAAE,kBAAkB,EAAE,QAAQ,IAAI,CAACnB,cAAc,CAACzP,gBAAgB,CAAC,CAAC,QAAQ,CAAC;IACpH,IAAI,CAAC8P,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACD,eAAe,EAAE,IAAI,CAACE,WAAW,CAAC;IACjE,IAAI,CAACC,uBAAuB,GAAG,IAAI,CAACf,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACjE,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACM,uBAAuB,EAAE,2BAA2B,CAAC;IACjF,IAAI,CAACf,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACK,uBAAuB,EAAE,QAAQ,EAAE,IAAI,CAACvF,UAAU,CAACnC,OAAO,CAACC,aAAa,CAACiF,YAAY,GAAG,IAAI,CAAC;IACzH,IAAI,CAACyB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACK,uBAAuB,EAAE,OAAO,EAAE,MAAM,CAAC;IACrE,IAAI,CAACf,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACK,uBAAuB,EAAE,aAAa,EAAE,GAAG,CAAC;IACxE,IAAI,CAACf,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACD,eAAe,EAAE,IAAI,CAACG,uBAAuB,CAAC;IAC7E,IAAI,CAACC,qBAAqB,GAAG,IAAI,CAAChB,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IAC/D,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACO,qBAAqB,EAAE,yBAAyB,CAAC;IAC7E,IAAI,CAAChB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACM,qBAAqB,EAAE,SAAS,EAAE,MAAM,CAAC;IACrE,IAAI,CAAChB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACM,qBAAqB,EAAE,OAAO,EAAE,MAAM,CAAC;IACnE,IAAI,CAAChB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACM,qBAAqB,EAAE,QAAQ,EAAE,MAAM,CAAC;IACpE,IAAI,CAAChB,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACE,uBAAuB,EAAE,IAAI,CAACC,qBAAqB,CAAC;IACnF,IAAI,CAACC,YAAY,GAAG,IAAI,CAACjB,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACtD,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACQ,YAAY,EAAE,kBAAkB,CAAC;IAC7D,IAAI,CAACjB,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACQ,YAAY,EAAE,eAAe,CAAC;IAC1D,IAAI,CAACjB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACO,YAAY,EAAE,aAAa,EAAE,GAAG,CAAC;IAC7D,IAAI,CAACjB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACO,YAAY,EAAE,OAAO,EAAE,IAAI,CAACZ,kBAAkB,GAAG,IAAI,CAACR,WAAW,GAAG,IAAI,CAAC;IACrG,IAAI,CAACG,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACO,YAAY,EAAE,kBAAkB,EAAE,QAAQ,IAAI,CAACtB,cAAc,CAACzP,gBAAgB,CAAC,CAAC,QAAQ,CAAC;IACrH,IAAI,CAAC8P,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACG,qBAAqB,EAAE,IAAI,CAACC,YAAY,CAAC;IACxE,IAAI,CAACC,cAAc,GAAG,IAAI,CAAClB,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACxD,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACS,cAAc,EAAE,iBAAiB,CAAC;IAC9D,IAAI,CAAClB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACQ,cAAc,EAAE,aAAa,EAAE,GAAG,CAAC;IAC/D,IAAI,CAAClB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACQ,cAAc,EAAE,OAAO,EAAE,IAAI,CAAC1F,UAAU,CAACnC,OAAO,CAACC,aAAa,CAAC6H,WAAW,GAAG,IAAI,CAAC;IAC9G,IAAI,CAACnB,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACG,qBAAqB,EAAE,IAAI,CAACE,cAAc,CAAC;IAC1E,IAAI,CAACE,aAAa,GAAG,IAAI,CAACpB,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACvD,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACW,aAAa,EAAE,kBAAkB,CAAC;IAC9D,IAAI,CAACpB,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACW,aAAa,EAAE,gBAAgB,CAAC;IAC5D,IAAI,CAACpB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACU,aAAa,EAAE,OAAO,EAAE,MAAM,CAAC;IAC3D,IAAI,CAACpB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACU,aAAa,EAAE,kBAAkB,EAAE,QAAQ,IAAI,CAACzB,cAAc,CAACzP,gBAAgB,CAAC,CAAC,QAAQ,CAAC;IACtH,IAAI,CAAC8P,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACG,qBAAqB,EAAE,IAAI,CAACI,aAAa,CAAC;IACzE,IAAI,CAACC,cAAc,GAAG,IAAI,CAACrB,QAAQ,CAACQ,aAAa,CAAC,KAAK,CAAC;IACxD,IAAI,CAACR,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACY,cAAc,EAAE,kBAAkB,CAAC;IAC/D,IAAI,CAACrB,QAAQ,CAACS,QAAQ,CAAC,IAAI,CAACY,cAAc,EAAE,iBAAiB,CAAC;IAC9D,IAAI,CAACrB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACW,cAAc,EAAE,OAAO,EAAE,MAAM,CAAC;IAC5D,IAAI,CAACrB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACW,cAAc,EAAE,QAAQ,EAAE,MAAM,CAAC;IAC7D,IAAI,CAACrB,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACW,cAAc,EAAE,kBAAkB,EAAE,QAAQ,IAAI,CAAC1B,cAAc,CAACzP,gBAAgB,CAAC,CAAC,QAAQ,CAAC;IACvH,IAAI,CAAC8P,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACD,eAAe,EAAE,IAAI,CAACS,cAAc,CAAC;IACpE,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAACC,qBAAqB,GAAG,IAAI,CAACjB,wBAAwB;EAC9D;EACAkB,MAAMA,CAAA,EAAG;IACL,IAAI,CAACH,kBAAkB,CAAC,CAAC;EAC7B;EACAI,YAAYA,CAACxN,IAAI,EAAE;IACf,IAAI,CAACmM,kBAAkB,GAAG,IAAI,CAACC,kBAAkB,CAACpM,IAAI,CAAC;IACvD,IAAI,CAACiM,iBAAiB,GAAG,IAAI,CAACC,iBAAiB,CAAClM,IAAI,CAAC;IACrD,IAAI,CAACyN,oBAAoB,CAACzN,IAAI,CAAC;IAC/B,IAAI,CAAC0N,sBAAsB,CAAC1N,IAAI,CAAC;EACrC;EACAkM,iBAAiBA,CAAClM,IAAI,EAAE;IACpB,IAAI2N,QAAQ,GAAG3N,IAAI,CAACuE,mBAAmB;IACvC,OAAOvE,IAAI,CAACsF,wBAAwB,GAC9B,IAAI,CAACkG,eAAe,CAACnE,kBAAkB,CAACsG,QAAQ,CAACxI,OAAO,CAAC,GACzD,IAAI,CAACqG,eAAe,CAAC7D,qBAAqB,CAACgG,QAAQ,CAACxI,OAAO,CAAC;EACtE;EACAiH,kBAAkBA,CAACpM,IAAI,EAAE;IACrB,IAAI2N,QAAQ,GAAG3N,IAAI,CAACuE,mBAAmB;IACvC,OAAOvE,IAAI,CAACsF,wBAAwB,GAC9B,IAAI,CAACkG,eAAe,CAAC/D,mBAAmB,CAACkG,QAAQ,CAACxI,OAAO,CAAC,GAC1D,IAAI,CAACqG,eAAe,CAACzD,sBAAsB,CAAC4F,QAAQ,CAACxI,OAAO,CAAC;EACvE;EACAyI,MAAMA,CAAC5N,IAAI,EAAE8J,MAAM,EAAE;IACjB,IAAI,IAAI,CAAC8B,WAAW,KAAK9B,MAAM,CAAC+D,OAAO,EAAE;MACrC,IAAI,CAACjC,WAAW,GAAG9B,MAAM,CAAC+D,OAAO;MACjC,IAAI,IAAI,CAACvG,UAAU,EAAE;QACjB,IAAI,CAACmG,oBAAoB,CAACzN,IAAI,CAAC;MACnC;IACJ;IACA,IAAI,IAAI,CAAC2L,WAAW,KAAK7B,MAAM,CAACgE,OAAO,EAAE;MACrC,IAAI,CAACnC,WAAW,GAAG7B,MAAM,CAACgE,OAAO;MACjC,IAAI,IAAI,CAACxG,UAAU,EAAE;QACjB,IAAI,CAACoG,sBAAsB,CAAC1N,IAAI,CAAC;MACrC;IACJ;EACJ;EACA0N,sBAAsBA,CAAC1N,IAAI,EAAE;IACzB,IAAI+N,oBAAoB,GAAG/N,IAAI,CAACsF,wBAAwB,GAAG,IAAI,CAAC6G,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,GAAG,IAAI,CAACR,WAAW;IAC/H,IAAIoC,oBAAoB,IAAI,CAAC,EAAE;MAC3B,IAAI,CAACjC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACO,YAAY,EAAE,OAAO,EAAEgB,oBAAoB,GAAG,IAAI,CAAC;MAC/E,IAAI,CAACjC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACQ,cAAc,EAAE,OAAO,EAAE,IAAI,CAAC1F,UAAU,CAACnC,OAAO,CAACC,aAAa,CAAC6H,WAAW,GAAG,IAAI,CAAC;IAClH,CAAC,MACI;MACD,IAAI,CAACe,wBAAwB,CAACD,oBAAoB,CAAC;IACvD;EACJ;EACAC,wBAAwBA,CAACD,oBAAoB,EAAE;IAC3C,IAAI,CAACjC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACO,YAAY,EAAE,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC;IAC5D,IAAIkB,kBAAkB,GAAG,IAAI,CAAC3G,UAAU,CAACnC,OAAO,CAACC,aAAa,CAAC6H,WAAW,GAAGc,oBAAoB;IACjG,IAAIE,kBAAkB,IAAI,CAAC,EAAE;MACzB,IAAI,CAACnC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACQ,cAAc,EAAE,OAAO,EAAEiB,kBAAkB,GAAG,IAAI,CAAC;IACnF,CAAC,MACI;MACD,IAAI,CAACnC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACQ,cAAc,EAAE,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC;IAClE;EACJ;EACAS,oBAAoBA,CAACzN,IAAI,EAAE;IACvB,IAAIkO,oBAAoB,GAAGlO,IAAI,CAACsF,wBAAwB,GAAG,IAAI,CAAC2G,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,GAAG,IAAI,CAACL,WAAW;IAC7H,IAAIsC,oBAAoB,IAAI,CAAC,EAAE;MAC3B,IAAI,CAACpC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACI,WAAW,EAAE,QAAQ,EAAEsB,oBAAoB,GAAG,IAAI,CAAC;MAC/E,IAAI,CAACpC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACK,uBAAuB,EAAE,QAAQ,EAAE,IAAI,CAACvF,UAAU,CAACnC,OAAO,CAACC,aAAa,CAACiF,YAAY,GAAG,IAAI,CAAC;IAC7H,CAAC,MACI;MACD,IAAI,CAAC8D,yBAAyB,CAACD,oBAAoB,CAAC;IACxD;EACJ;EACAC,yBAAyBA,CAACD,oBAAoB,EAAE;IAC5C,IAAI,CAACpC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACI,WAAW,EAAE,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC;IAC5D,IAAIwB,mBAAmB,GAAG,IAAI,CAAC9G,UAAU,CAACnC,OAAO,CAACC,aAAa,CAACiF,YAAY,GAAG6D,oBAAoB;IACnG,IAAIE,mBAAmB,IAAI,CAAC,EAAE;MAC1B,IAAI,CAACtC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACK,uBAAuB,EAAE,QAAQ,EAAEuB,mBAAmB,GAAG,IAAI,CAAC;IAC9F,CAAC,MACI;MACD,IAAI,CAACtC,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACK,uBAAuB,EAAE,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC;IAC5E;EACJ;EACAO,kBAAkBA,CAAA,EAAG;IACjB,IAAI,IAAI,CAACE,qBAAqB,EAAE;MAC5B,IAAI,CAACxB,QAAQ,CAACuC,WAAW,CAACpM,QAAQ,CAACH,IAAI,EAAE,IAAI,CAACwL,qBAAqB,CAAC;MACpE,IAAI,CAACA,qBAAqB,GAAG5N,SAAS;IAC1C;EACJ;EACA2N,mBAAmBA,CAAA,EAAG;IAClB,IAAI,CAACvB,QAAQ,CAACa,WAAW,CAAC1K,QAAQ,CAACH,IAAI,EAAE,IAAI,CAACuK,wBAAwB,CAAC;EAC3E;AACJ;AACAd,sBAAsB,CAAC/N,IAAI,YAAA8Q,+BAAA5Q,CAAA;EAAA,YAAAA,CAAA,IAAwF6N,sBAAsB,EAnrBjChY,EAAE,CAAAqL,QAAA,CAmrBiDmI,eAAe,GAnrBlExT,EAAE,CAAAqL,QAAA,CAmrB6E1D,qBAAqB,GAnrBpG3H,EAAE,CAAAqL,QAAA,CAmrB+GrL,EAAE,CAACgb,gBAAgB;AAAA,CAA6C;AACzRhD,sBAAsB,CAAC5N,KAAK,kBAprB4EpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAorBa0N,sBAAsB;EAAAzN,OAAA,EAAtByN,sBAAsB,CAAA/N;AAAA,EAAG;AAChJ;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KArrBwGxK,EAAE,CAAAyK,iBAAA,CAqrBfuN,sBAAsB,EAAc,CAAC;IACpHtN,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE8I;IAAgB,CAAC,EAAE;MAAE9I,IAAI,EAAE/C;IAAsB,CAAC,EAAE;MAAE+C,IAAI,EAAE1K,EAAE,CAACgb;IAAiB,CAAC,CAAC;EAAE,CAAC;AAAA;AAE/I,MAAMC,MAAM,CAAC;AAEb,MAAMC,oBAAoB,CAAC;EACvBvU,WAAWA,CAACwR,eAAe,EAAE1E,UAAU,EAAE;IACrC,IAAI,CAAC0E,eAAe,GAAGA,eAAe;IACtC,IAAI,CAAC1E,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAAC0H,WAAW,GAAG,IAAIha,OAAO,CAAC,CAAC;IAChC,IAAI,CAACia,WAAW,GAAG,IAAIja,OAAO,CAAC,CAAC;IAChC,IAAI,CAACoX,QAAQ,GAAGJ,eAAe,CAACK,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC;EAC9D;EACA6C,0BAA0BA,CAAA,EAAG;IACzB,IAAI,CAACC,cAAc,GAAG,IAAI,CAAC/C,QAAQ,CAACgD,MAAM,CAAC,UAAU,EAAE,QAAQ,EAAEC,GAAG,IAAI;MACpE,IAAI,CAACL,WAAW,CAACzV,IAAI,CAAC;QAClB6U,OAAO,EAAE,IAAI,CAAC9G,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACqI,WAAW;QACtDqD,OAAO,EAAE,IAAI,CAAC7G,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACsI;MAC/C,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EACAuE,0BAA0BA,CAAA,EAAG;IACzB,IAAI,CAACC,cAAc,GAAG,IAAI,CAACnD,QAAQ,CAACgD,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAEC,GAAG,IAAI;MAClE,IAAI,CAACJ,WAAW,CAAC1V,IAAI,CAAC8V,GAAG,CAAC;IAC9B,CAAC,CAAC;EACN;EACAG,yBAAyBA,CAAA,EAAG;IACxB,IAAI,CAACL,cAAc,CAAC,CAAC;EACzB;EACAM,yBAAyBA,CAAA,EAAG;IACxB,IAAI,CAACF,cAAc,CAAC,CAAC;EACzB;AACJ;AACAR,oBAAoB,CAACjR,IAAI,YAAA4R,6BAAA1R,CAAA;EAAA,YAAAA,CAAA,IAAwF+Q,oBAAoB,EAvtB7Blb,EAAE,CAAAqL,QAAA,CAutB6CrL,EAAE,CAACgb,gBAAgB,GAvtBlEhb,EAAE,CAAAqL,QAAA,CAutB6E+C,aAAa;AAAA,CAA6C;AACjP8M,oBAAoB,CAAC9Q,KAAK,kBAxtB8EpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAwtBW4Q,oBAAoB;EAAA3Q,OAAA,EAApB2Q,oBAAoB,CAAAjR;AAAA,EAAG;AAC5I;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAztBwGxK,EAAE,CAAAyK,iBAAA,CAytBfyQ,oBAAoB,EAAc,CAAC;IAClHxQ,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE1K,EAAE,CAACgb;IAAiB,CAAC,EAAE;MAAEtQ,IAAI,EAAE0D;IAAc,CAAC,CAAC;EAAE,CAAC;AAAA;AAE5G,MAAM0N,qBAAqB,CAAC;EACxBnV,WAAWA,CAAA,EAAG;IACV,IAAI,CAACmH,QAAQ,GAAG,KAAK;EACzB;AACJ;AACAgO,qBAAqB,CAAC7R,IAAI,YAAA8R,8BAAA5R,CAAA;EAAA,YAAAA,CAAA,IAAwF2R,qBAAqB;AAAA,CAAmD;AAC1LA,qBAAqB,CAACE,IAAI,kBAnuB8Ehc,EAAE,CAAAic,iBAAA;EAAAvR,IAAA,EAmuBJoR,qBAAqB;EAAA9I,SAAA;EAAAC,MAAA;IAAAnF,QAAA;EAAA;EAAAoO,KAAA;EAAAC,IAAA;EAAA/M,QAAA,WAAAgN,+BAAAra,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MAnuBnB/B,EAAE,CAAAiC,SAAA,SE5IrG,CAAC;IAAA;IAAA,IAAAF,EAAA;MF4IkG/B,EAAE,CAAAqc,WAAA,uBAAAra,GAAA,CAAA8L,QAAA,SEhJxD,CAAC,0BAAA9L,GAAA,CAAA8L,QAAA,YAAD,CAAC,wBAAA9L,GAAA,CAAA8L,QAAA,UAAD,CAAC,yBAAA9L,GAAA,CAAA8L,QAAA,WAAD,CAAC;IAAA;EAAA;EAAAwO,MAAA;EAAAC,aAAA;AAAA,EFm3B67B;AACh/B;EAAA,QAAA/R,SAAA,oBAAAA,SAAA,KApuBwGxK,EAAE,CAAAyK,iBAAA,CAouBfqR,qBAAqB,EAAc,CAAC;IACnHpR,IAAI,EAAElK,SAAS;IACfyO,IAAI,EAAE,CAAC;MAAEqE,QAAQ,EAAE,eAAe;MAAEiJ,aAAa,EAAE9b,iBAAiB,CAAC+b,IAAI;MAAEpN,QAAQ,EAAE,iPAAiP;MAAEkN,MAAM,EAAE,CAAC,ofAAof;IAAE,CAAC;EAC50B,CAAC,CAAC,QAAkB;IAAExO,QAAQ,EAAE,CAAC;MACzBpD,IAAI,EAAEpK;IACV,CAAC;EAAE,CAAC;AAAA;AAEhB,MAAMmc,2BAA2B,CAAC;AAElCA,2BAA2B,CAACxS,IAAI,YAAAyS,oCAAAvS,CAAA;EAAA,YAAAA,CAAA,IAAwFsS,2BAA2B;AAAA,CAAmD;AACtMA,2BAA2B,CAACT,IAAI,kBA9uBwEhc,EAAE,CAAAic,iBAAA;EAAAvR,IAAA,EA8uBE+R,2BAA2B;EAAAzJ,SAAA;EAAAkJ,KAAA;EAAAC,IAAA;EAAAQ,MAAA;EAAAvN,QAAA,WAAAwN,qCAAA7a,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MA9uB/B/B,EAAE,CAAA6c,cAAA,CA8uBiJ,CAAC;MA9uBpJ7c,EAAE,CAAAoD,cAAA,YA8uBiJ,CAAC;MA9uBpJpD,EAAE,CAAAiC,SAAA,aAkvBrE,CAAC;MAlvBkEjC,EAAE,CAAAiC,SAAA,aAsvBrE,CAAC;MAtvBkEjC,EAAE,CAAAqD,YAAA,CAuvBzF,CAAC;IAAA;EAAA;EAAAkZ,aAAA;AAAA,EAAoB;AACtC;EAAA,QAAA/R,SAAA,oBAAAA,SAAA,KAxvBwGxK,EAAE,CAAAyK,iBAAA,CAwvBfgS,2BAA2B,EAAc,CAAC;IACzH/R,IAAI,EAAElK,SAAS;IACfyO,IAAI,EAAE,CAAC;MACCqE,QAAQ,EAAE,kBAAkB;MAC5BlE,QAAQ,EAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACgB,CAAC;EACT,CAAC,CAAC;AAAA;AAEV,MAAM0N,sBAAsB,CAAC;EACzBnW,WAAWA,CAAA,EAAG;IACV,IAAI,CAACoW,OAAO,GAAG,IAAI3c,YAAY,CAAC,CAAC;EACrC;EACA4c,OAAOA,CAAA,EAAG;IACN,IAAI,CAACD,OAAO,CAACE,IAAI,CAAC,CAAC;EACvB;AACJ;AACAH,sBAAsB,CAAC7S,IAAI,YAAAiT,+BAAA/S,CAAA;EAAA,YAAAA,CAAA,IAAwF2S,sBAAsB;AAAA,CAAmD;AAC5LA,sBAAsB,CAACd,IAAI,kBAlxB6Ehc,EAAE,CAAAic,iBAAA;EAAAvR,IAAA,EAkxBHoS,sBAAsB;EAAA9J,SAAA;EAAAC,MAAA;IAAAkK,KAAA;EAAA;EAAAhK,OAAA;IAAA4J,OAAA;EAAA;EAAAK,kBAAA,EAAAzb,GAAA;EAAAua,KAAA;EAAAC,IAAA;EAAAQ,MAAA;EAAAvN,QAAA,WAAAiO,gCAAAtb,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MAlxBrB/B,EAAE,CAAAsd,eAAA;MAAFtd,EAAE,CAAAoD,cAAA,eG5I5D,CAAC;MH4IyDpD,EAAE,CAAA0E,UAAA,wBAAA6Y,6DAAA;QAAA,OAAAvb,GAAA,CAAAwb,KAAA,GGhJ9E,KAAK;MAAA,EAAC,uBAAAC,4DAAA;QAAA,OAAAzb,GAAA,CAAAwb,KAAA,GAAoB,IAAI;MAAA,CAAzB,CAAC,mBAAAE,wDAAA;QAAA,OAIE1b,GAAA,CAAAgb,OAAA,CAAQ,CAAC;MAAA,CAJZ,CAAC;MHgJsEhd,EAAE,CAAA2d,YAAA,EG3I9E,CAAC;MH2I2E3d,EAAE,CAAAqD,YAAA,CG1IlG,CAAC;IAAA;IAAA,IAAAtB,EAAA;MH0I+F/B,EAAE,CAAAuC,UAAA,YAAFvC,EAAE,CAAA4d,eAAA,IAAArc,GAAA,EAAAS,GAAA,CAAAwb,KAAA,YAAAxb,GAAA,CAAAmb,KAAA,EAAAnb,GAAA,CAAAwb,KAAA,GAAAxb,GAAA,CAAAmb,KAAA,WAAAnb,GAAA,CAAAwb,KAAA,GAAAxb,GAAA,CAAAmb,KAAA,iBG7I3C,CAAC;IAAA;EAAA;EAAAU,UAAA,GH+5BozBhd,GAAG,CAACid,OAAO;EAAAxB,MAAA;AAAA,EAAkD;AACj7B;EAAA,QAAA9R,SAAA,oBAAAA,SAAA,KAnxBwGxK,EAAE,CAAAyK,iBAAA,CAmxBfqS,sBAAsB,EAAc,CAAC;IACpHpS,IAAI,EAAElK,SAAS;IACfyO,IAAI,EAAE,CAAC;MAAEqE,QAAQ,EAAE,gBAAgB;MAAElE,QAAQ,EAAE,oVAAoV;MAAEkN,MAAM,EAAE,CAAC,6QAA6Q;IAAE,CAAC;EAClqB,CAAC,CAAC,QAAkB;IAAEa,KAAK,EAAE,CAAC;MACtBzS,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEyc,OAAO,EAAE,CAAC;MACVrS,IAAI,EAAEnK;IACV,CAAC;EAAE,CAAC;AAAA;AAEhB,MAAMwd,cAAc,GAAG,GAAG;AAC1B,MAAMC,cAAc,GAAG,GAAG;AAC1B,MAAMC,wBAAwB,GAAG,EAAE;AACnC,MAAMC,WAAW,GAAG,GAAG;AACvB,MAAMC,YAAY,GAAG,KAAK;AAC1B,MAAMC,gCAAgC,GAAG,CAAC;AAC1C,MAAMC,iCAAiC,GAAG,CAAC;AAC3C,MAAMC,mCAAmC,GAAG,CAAC;AAC7C,MAAMC,kCAAkC,GAAG,CAAC;AAC5C,IAAIC,QAAQ;AACZ,CAAC,UAAUA,QAAQ,EAAE;EACjBA,QAAQ,CAACA,QAAQ,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,GAAG,aAAa;EACtDA,QAAQ,CAACA,QAAQ,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,GAAG,YAAY;EACpDA,QAAQ,CAACA,QAAQ,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,GAAG,YAAY;AACxD,CAAC,EAAEA,QAAQ,KAAKA,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/B,MAAMC,oBAAoB,CAAC;EACvB9X,WAAWA,CAAC+X,QAAQ,EAAEC,qBAAqB,EAAEC,oBAAoB,EAAE3G,eAAe,EAAEM,QAAQ,EAAE5M,MAAM,EAAEuM,cAAc,EAAE3H,eAAe,EAAE;IACnI,IAAI,CAACmO,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,qBAAqB,GAAGA,qBAAqB;IAClD,IAAI,CAACC,oBAAoB,GAAGA,oBAAoB;IAChD,IAAI,CAAC3G,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACM,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC5M,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACuM,cAAc,GAAGA,cAAc;IACpC,IAAI,CAAC3H,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACsO,SAAS,GAAGd,cAAc;IAC/B,IAAI,CAACe,UAAU,GAAGZ,WAAW;IAC7B,IAAI,CAACa,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,SAAS,GAAGC,UAAU;IAC3B,IAAI,CAACxO,aAAa,GAAG,EAAE;EAC3B;EACAyO,QAAQA,CAAA,EAAG;IACP;IACA,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAACT,QAAQ,CAACxR,GAAG,CAACkS,kBAAkB,CAAC;IAC/D,IAAI,CAAC1K,cAAc,GAAG,IAAI,CAACuD,eAAe,CAACrD,iBAAiB,CAAC,CAAC;IAC9D,IAAI,CAACnE,aAAa,CAAClE,IAAI,CAAC,IAAI,CAAC8S,uBAAuB,CAAC,CAAC,CAAC;IACvD,IAAI,CAACzY,KAAK,GAAG,IAAI,CAAC6F,IAAI,CAAC7F,KAAK,CAAC0Y,YAAY,CAAC,CAAC;IAC3C,IAAI,CAACrc,IAAI,GAAG,IAAI,CAACwJ,IAAI,CAACxJ,IAAI,CAACqc,YAAY,CAAC,CAAC;IACzC,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACC,cAAc,CAAC,CAAC;IACrB,IAAI,CAAC/b,OAAO,GAAG,IAAI,CAACsM,UAAU,CAAC,CAAC;IAChC,IAAI,CAAC9G,gBAAgB,GAAG,IAAI,CAACiP,cAAc,CAACjP,gBAAgB,CAAC,CAAC;IAC9D,IAAI,CAACC,mBAAmB,GAAG,IAAI,CAACgP,cAAc,CAAChP,mBAAmB,CAAC,CAAC;IACpE,IAAI,CAAC7E,UAAU,GAAG,IAAI,CAAC6T,cAAc,CAACvP,aAAa,CAAC,CAAC;IACrD,IAAI,IAAI,CAAC1F,IAAI,EACT,IAAI,CAACA,IAAI,CAACoP,SAAS,CAACoN,GAAG,IAAI,IAAI,CAACC,WAAW,CAACD,GAAG,CAAC,CAAC;IACrD,IAAI,IAAI,CAAC7Y,KAAK,EACV,IAAI,CAACA,KAAK,CAACyL,SAAS,CAACoN,GAAG,IAAI,IAAI,CAACC,WAAW,CAACD,GAAG,CAAC,CAAC;EAC1D;EACA9O,eAAeA,CAAA,EAAG;IACd,IAAI,IAAI,CAACgP,YAAY,CAAC,CAAC,EAAE;MACrB,IAAI,CAACpH,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAAC2G,aAAa,CAAC/N,aAAa,EAAE,WAAW,EAAEoM,wBAAwB,GAAG,IAAI,CAAC;MACtG,IAAI,CAAC4B,oBAAoB,CAAC,CAAC;IAC/B,CAAC,MACI;MACD,IAAI,CAACtH,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAAC2G,aAAa,CAAC/N,aAAa,EAAE,WAAW,EAAEmM,cAAc,GAAG,IAAI,CAAC;MAC5F,IAAI8B,UAAU,GAAG,IAAI,CAACC,0BAA0B,CAAC,IAAI,CAACH,aAAa,CAAC/N,aAAa,CAACmO,WAAW,EAAE,IAAI,CAACJ,aAAa,CAAC/N,aAAa,CAACoE,YAAY,EAAEkI,YAAY,CAAC;MAC3J2B,UAAU,GAAG,IAAI,CAACG,gBAAgB,CAACH,UAAU,CAAC1K,KAAK,EAAE0K,UAAU,CAACxK,MAAM,CAAC;MACvE,IAAI,CAACuJ,SAAS,GAAGiB,UAAU,CAAC1K,KAAK;MACjC,IAAI,CAAC0J,UAAU,GAAGgB,UAAU,CAACxK,MAAM;MACnC,IAAI,CAACiD,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAAC2G,aAAa,CAAC/N,aAAa,EAAE,OAAO,EAAE,IAAI,CAACgN,SAAS,GAAG,IAAI,CAAC;MACxF,IAAI,CAACtG,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAAC2G,aAAa,CAAC/N,aAAa,EAAE,QAAQ,EAAE,IAAI,CAACiN,UAAU,GAAG,IAAI,CAAC;IAC9F;IACA,IAAI,CAACoB,QAAQ,CAAC,CAAC;EACnB;EACAR,WAAWA,CAACD,GAAG,EAAE;IACb,IAAIA,GAAG,IAAI,IAAI,EAAE;MACb;MACAU,UAAU,CAAC,MAAM;QACb,IAAI,CAACC,UAAU,CAAC,CAAC;MACrB,CAAC,EAAE,CAAC,CAAC;IACT;EACJ;EACAT,YAAYA,CAAA,EAAG;IACX,OAAQ,IAAI,CAAClT,IAAI,CAACyE,WAAW,IACzB,IAAI,CAACX,eAAe,CAACR,UAAU,CAAC,CAAC,IACjC,IAAI,CAACQ,eAAe,CAACjB,aAAa,CAAC,CAAC,IACpC,IAAI,CAACiB,eAAe,CAACd,aAAa,CAAC,CAAC,IACpC,IAAI,CAACc,eAAe,CAACX,aAAa,CAAC,CAAC;EAC5C;EACA4P,cAAcA,CAAA,EAAG;IACb,MAAMa,YAAY,GAAG,IAAI,CAACnI,cAAc,CAAC/O,cAAc,CAAC,CAAC;IACzD,IAAI,CAAC7E,QAAQ,GAAG+b,YAAY,CAACvb,IAAI;IACjC,IAAI,CAACO,QAAQ,GAAGgb,YAAY,CAAC3a,IAAI;IACjC,IAAI,CAACO,QAAQ,GAAGoa,YAAY,CAAC3Y,IAAI;EACrC;EACAwY,QAAQA,CAAA,EAAG;IACP,IAAIpS,QAAQ,GAAG,IAAI,CAACrB,IAAI,CAACsF,wBAAwB,GAC3C,OAAO,GACP,UAAU;IAChB,IAAI,CAACwG,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACqH,UAAU,CAACzO,aAAa,EAAE,UAAU,EAAE/D,QAAQ,CAAC;IAC3E,IAAI,CAACyK,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACqH,UAAU,CAACzO,aAAa,EAAE,WAAW,EAAE,IAAI,CAACpF,IAAI,CAACiF,iBAAiB,CAAC;IAC/F,IAAI,CAAC6O,WAAW,GAAG,IAAI,CAAC9T,IAAI,CAACuE,mBAAmB,CAACY,OAAO,CAACC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACoB,KAAK;IACpG,IAAI,CAACoL,YAAY,GAAG,IAAI,CAAC/T,IAAI,CAACuE,mBAAmB,CAACY,OAAO,CAACC,aAAa,CAACmC,qBAAqB,CAAC,CAAC,CAACsB,MAAM;IACtG,IAAI,CAACsD,kBAAkB,GACnB9K,QAAQ,KAAK,OAAO,GACd,IAAI,CAACmK,eAAe,CAAC/D,mBAAmB,CAAC,IAAI,CAACzH,IAAI,CAACuE,mBAAmB,CAACY,OAAO,CAAC,GAC/E,IAAI,CAACqG,eAAe,CAACzD,sBAAsB,CAAC,IAAI,CAAC/H,IAAI,CAACuE,mBAAmB,CAACY,OAAO,CAAC;IAC5F,IAAI,CAAC8G,iBAAiB,GAClB5K,QAAQ,KAAK,OAAO,GACd,IAAI,CAACmK,eAAe,CAACnE,kBAAkB,CAAC,IAAI,CAACrH,IAAI,CAACuE,mBAAmB,CAACY,OAAO,CAAC,GAC9E,IAAI,CAACqG,eAAe,CAAC7D,qBAAqB,CAAC,IAAI,CAAC3H,IAAI,CAACuE,mBAAmB,CAACY,OAAO,CAAC;IAC3F,IAAI,CAAC6O,YAAY,CAAC,CAAC;EACvB;EACA1Q,UAAUA,CAAA,EAAG;IACT,IAAIS,YAAY,GAAG,IAAI,CAACmO,qBAAqB,CAAC3Q,aAAa,CAAC,IAAI,CAACvB,IAAI,CAACK,IAAI,CAAC;IAC3E,IAAI4T,aAAa,GAAG,IAAI,CAAC/B,qBAAqB,CAAC1Q,aAAa,CAAC,CAAC;IAC9D,IAAI,CAAChK,WAAW,GAAG;MAAEwI,IAAI,EAAE+D,YAAY;MAAEmQ,KAAK,EAAED;IAAc,CAAC;IAC/D,OAAOlQ,YAAY,GAAG,GAAG,GAAGkQ,aAAa;EAC7C;EACAnB,kBAAkBA,CAAA,EAAG;IACjB,IAAI,CAACqB,aAAa,GAAG,IAAI,CAACnU,IAAI,CAACyE,WAAW;IAC1C,IAAI,CAAClP,GAAG,GAAG,IAAI,CAACyK,IAAI,CAAC0E,iBAAiB;IACtC,IAAI,CAAClM,gBAAgB,GAAG,IAAI,CAACsL,eAAe,CAACjB,aAAa,CAAC,CAAC;IAC5D,IAAI,CAACzJ,gBAAgB,GAAG,IAAI,CAAC0K,eAAe,CAACd,aAAa,CAAC,CAAC;IAC5D,IAAI,CAAChJ,gBAAgB,GAAG,IAAI,CAAC8J,eAAe,CAACX,aAAa,CAAC,CAAC;IAC5D,IAAI,CAAC5L,aAAa,GAAG,IAAI,CAACuM,eAAe,CAACR,UAAU,CAAC,CAAC;EAC1D;EACA8Q,QAAQA,CAACC,KAAK,EAAE;IACZ9V,OAAO,CAAC+V,GAAG,CAACD,KAAK,CAAC;IAClB,IAAIA,KAAK,CAACE,OAAO,KAAKxC,QAAQ,CAACyC,WAAW,EAAE;MACxC,IAAI,IAAI,CAACC,UAAU,CAAC,CAAC,EAAE;QACnB,IAAI,CAAC5a,KAAK,CAAC,CAAC;MAChB,CAAC,MACI;QACD,IAAI,CAACZ,IAAI,CAAC,CAAC;MACf;IACJ,CAAC,MACI,IAAIob,KAAK,CAACE,OAAO,KAAKxC,QAAQ,CAAC2C,UAAU,EAAE;MAC5C,IAAI,CAACrc,IAAI,CAAC,CAAC;IACf,CAAC,MACI,IAAIgc,KAAK,CAACE,OAAO,KAAKxC,QAAQ,CAAC4C,UAAU,EAAE;MAC5C,IAAI,CAAC9a,KAAK,CAAC,CAAC;IAChB;EACJ;EACAxB,IAAIA,CAAA,EAAG;IACH,IAAI,CAACqa,kBAAkB,CAACra,IAAI,CAAC,CAAC;EAClC;EACAY,IAAIA,CAAA,EAAG;IACH,IAAI,CAACyZ,kBAAkB,CAACzZ,IAAI,CAAC,CAAC;EAClC;EACAY,KAAKA,CAAA,EAAG;IACJ,IAAI,CAAC6Y,kBAAkB,CAAC7Y,KAAK,CAAC,CAAC;EACnC;EACA+a,WAAWA,CAAA,EAAG;IACV,OAAO,IAAI,CAAC1C,qBAAqB,CAAC3Q,aAAa,CAAC,IAAI,CAACvB,IAAI,CAACK,IAAI,CAAC,KAAK,CAAC;EACzE;EACAoU,UAAUA,CAAA,EAAG;IACT,OAAQ,IAAI,CAACvC,qBAAqB,CAAC3Q,aAAa,CAAC,IAAI,CAACvB,IAAI,CAACK,IAAI,CAAC,KAC5D,IAAI,CAAC6R,qBAAqB,CAAC1Q,aAAa,CAAC,CAAC;EAClD;EACAwS,YAAYA,CAAA,EAAG;IACX,QAAQ,IAAI,CAAChU,IAAI,CAACqB,QAAQ;MACtB,KAAK,KAAK;QAAE;UACR,IAAI,CAACwT,WAAW,CAAC,CAAC;UAClB;QACJ;MACA,KAAK,QAAQ;QAAE;UACX,IAAI,CAACC,cAAc,CAAC,CAAC;UACrB;QACJ;MACA,KAAK,OAAO;QAAE;UACV,IAAI,CAACC,aAAa,CAAC,CAAC;UACpB;QACJ;MACA,KAAK,MAAM;QAAE;UACT,IAAI,CAACC,YAAY,CAAC,CAAC;UACnB;QACJ;MACA,KAAK,QAAQ;QAAE;UACX,IAAI,CAACC,cAAc,CAAC,CAAC;UACrB;QACJ;MACA;QAAS;UACL,IAAI,CAACH,cAAc,CAAC,CAAC;QACzB;IACJ;EACJ;EACAD,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC3C,qBAAqB,CAAC9Q,cAAc,CAAC,IAAI,CAACpB,IAAI,CAACK,IAAI,EAAE,KAAK,CAAC;IAChE,IAAI,CAAC6U,WAAW,GACZ,IAAI,CAACjJ,iBAAiB,GAAGkJ,oBAAoB,GAAG,IAAI,CAAC9C,UAAU;IACnE,IAAI,CAAC+C,eAAe,GAChB,IAAI,CAACnJ,iBAAiB,GAAGkJ,oBAAoB,GAAG,IAAI,CAAC9C,UAAU;IACnE,IAAI,CAACzc,gBAAgB,GAAG,IAAI,CAACyc,UAAU;IACvC,IAAI,CAACgD,YAAY,GACb,IAAI,CAACvB,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC1B,SAAS,GAAG,CAAC,GAAG,IAAI,CAACjG,kBAAkB;IACvE,IAAI,CAACmJ,gBAAgB,GACjB,IAAI,CAACxB,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC1B,SAAS,GAAG,CAAC,GAAG,IAAI,CAACjG,kBAAkB;IACvE,IAAI,CAACtW,iBAAiB,GAAG,IAAI,CAACuc,SAAS,GAAG,CAAC,GAAG,IAAI,CAACG,SAAS;IAC5D,IAAI,CAACgD,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAACzf,aAAa,GAAG,QAAQ;IAC7B,IAAI,CAAC0f,kBAAkB,CAAC,CAAC;EAC7B;EACAV,aAAaA,CAAA,EAAG;IACZ,IAAI,CAAC7C,qBAAqB,CAAC9Q,cAAc,CAAC,IAAI,CAACpB,IAAI,CAACK,IAAI,EAAE,OAAO,CAAC;IAClE,IAAI,CAAC6U,WAAW,GACZ,IAAI,CAACjJ,iBAAiB,GAClB,IAAI,CAAC8H,YAAY,GAAG,CAAC,GACrB,IAAI,CAAC1B,UAAU,GAAG,CAAC;IAC3B,IAAI,CAAC+C,eAAe,GAChB,IAAI,CAACnJ,iBAAiB,GAClB,IAAI,CAAC8H,YAAY,GAAG,CAAC,GACrB,IAAI,CAAC1B,UAAU,GAAG,CAAC;IAC3B,IAAI,CAACzc,gBAAgB,GAAG,IAAI,CAACyc,UAAU,GAAG,CAAC,GAAG,IAAI,CAACE,SAAS;IAC5D,IAAI,CAAC8C,YAAY,GACb,IAAI,CAAClJ,kBAAkB,GAAG,IAAI,CAAC2H,WAAW,GAAGqB,oBAAoB;IACrE,IAAI,CAACG,gBAAgB,GACjB,IAAI,CAACnJ,kBAAkB,GAAG,IAAI,CAAC2H,WAAW,GAAGqB,oBAAoB;IACrE,IAAI,CAACtf,iBAAiB,GAAG,CAAC,IAAI,CAAC0c,SAAS;IACxC,IAAI,CAACmD,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAAC5f,aAAa,GAAG,MAAM;IAC3B,IAAI,CAAC6f,oBAAoB,CAAC,CAAC;EAC/B;EACAd,cAAcA,CAAA,EAAG;IACb,IAAI,CAAC5C,qBAAqB,CAAC9Q,cAAc,CAAC,IAAI,CAACpB,IAAI,CAACK,IAAI,EAAE,QAAQ,CAAC;IACnE,IAAI,CAAC6U,WAAW,GACZ,IAAI,CAACjJ,iBAAiB,GAAG,IAAI,CAAC8H,YAAY,GAAGoB,oBAAoB;IACrE,IAAI,CAACC,eAAe,GAChB,IAAI,CAACnJ,iBAAiB,GAAG,IAAI,CAAC8H,YAAY,GAAGoB,oBAAoB;IACrE,IAAI,CAACvf,gBAAgB,GAAG,CAAC,IAAI,CAAC2c,SAAS;IACvC,IAAI,CAAC1c,iBAAiB,GAAG,IAAI,CAACuc,SAAS,GAAG,CAAC,GAAG,IAAI,CAACG,SAAS;IAC5D,IAAI,CAAC8C,YAAY,GACb,IAAI,CAACvB,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC1B,SAAS,GAAG,CAAC,GAAG,IAAI,CAACjG,kBAAkB;IACvE,IAAI,CAACmJ,gBAAgB,GACjB,IAAI,CAACxB,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC1B,SAAS,GAAG,CAAC,GAAG,IAAI,CAACjG,kBAAkB;IACvE,IAAI,CAACoJ,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAACzf,aAAa,GAAG,KAAK;IAC1B,IAAI,CAAC8f,qBAAqB,CAAC,CAAC;EAChC;EACAb,YAAYA,CAAA,EAAG;IACX,IAAI,CAAC9C,qBAAqB,CAAC9Q,cAAc,CAAC,IAAI,CAACpB,IAAI,CAACK,IAAI,EAAE,MAAM,CAAC;IACjE,IAAI,CAAC6U,WAAW,GACZ,IAAI,CAACjJ,iBAAiB,GAClB,IAAI,CAAC8H,YAAY,GAAG,CAAC,GACrB,IAAI,CAAC1B,UAAU,GAAG,CAAC;IAC3B,IAAI,CAAC+C,eAAe,GAChB,IAAI,CAACnJ,iBAAiB,GAClB,IAAI,CAAC8H,YAAY,GAAG,CAAC,GACrB,IAAI,CAAC1B,UAAU,GAAG,CAAC;IAC3B,IAAI,CAACzc,gBAAgB,GAAG,IAAI,CAACyc,UAAU,GAAG,CAAC,GAAG,IAAI,CAACE,SAAS;IAC5D,IAAI,CAAC8C,YAAY,GACb,IAAI,CAAClJ,kBAAkB,GAAG,IAAI,CAACiG,SAAS,GAAG+C,oBAAoB;IACnE,IAAI,CAACG,gBAAgB,GACjB,IAAI,CAACnJ,kBAAkB,GAAG,IAAI,CAACiG,SAAS,GAAG+C,oBAAoB;IACnE,IAAI,CAACtf,iBAAiB,GAAG,IAAI,CAACuc,SAAS;IACvC,IAAI,CAACsD,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAAC5f,aAAa,GAAG,OAAO;IAC5B,IAAI,CAAC+f,mBAAmB,CAAC,CAAC;EAC9B;EACAb,cAAcA,CAAA,EAAG;IACb,IAAI,CAACnJ,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACqH,UAAU,CAACzO,aAAa,EAAE,UAAU,EAAE,OAAO,CAAC;IAC1E,IAAI,CAAC0G,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACqH,UAAU,CAACzO,aAAa,EAAE,KAAK,EAAE,KAAK,CAAC;IACnE,IAAI,CAAC0G,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACqH,UAAU,CAACzO,aAAa,EAAE,MAAM,EAAE,KAAK,CAAC;IACpE,IAAI,CAACgO,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACtH,QAAQ,CAACU,QAAQ,CAAC,IAAI,CAACqH,UAAU,CAACzO,aAAa,EAAE,WAAW,EAAE,cAAc,IAAI,CAACgN,SAAS,GAAG,CAAC,QAAQ,IAAI,CAACC,UAAU,GAAG,CAAC,KAAK,CAAC;IACpI,IAAI,CAACC,SAAS,GAAG,KAAK;EAC1B;EACAiD,kBAAkBA,CAAA,EAAG;IACjB,IAAI,IAAI,CAACF,YAAY,GAAG,CAAC,EAAE;MACvB,IAAI,CAACxf,iBAAiB,GAClB,IAAI,CAACA,iBAAiB,GAClB,IAAI,CAACwf,YAAY,GACjBzD,iCAAiC;MACzC,IAAI,CAACyD,YAAY,GAAGzD,iCAAiC;IACzD;EACJ;EACA4D,mBAAmBA,CAAA,EAAG;IAClB,IAAIO,kBAAkB,GAAG9T,QAAQ,CAACH,IAAI,CAACyR,WAAW;IAClD,IAAI,IAAI,CAAC+B,gBAAgB,GAAG,IAAI,CAAClD,SAAS,GAAG2D,kBAAkB,EAAE;MAC7D,IAAIC,UAAU,GAAG,IAAI,CAACX,YAAY,IAC7B,IAAI,CAACC,gBAAgB,GAClB,IAAI,CAAClD,SAAS,GACdN,kCAAkC,GAClCiE,kBAAkB,CAAC;MAC3B,IAAIE,iBAAiB,GAAGD,UAAU,GAAG,IAAI,CAACX,YAAY;MACtD,IAAI,CAACA,YAAY,GAAGW,UAAU;MAC9B,IAAI,CAACngB,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,GAAGogB,iBAAiB;IACvE;EACJ;EACAP,iBAAiBA,CAAA,EAAG;IAChB,IAAI,IAAI,CAACN,eAAe,GAAG,CAAC,EAAE;MAC1B,IAAI,CAACxf,gBAAgB,GACjB,IAAI,CAACA,gBAAgB,GACjB,IAAI,CAACsf,WAAW,GAChBvD,gCAAgC;MACxC,IAAI,CAACuD,WAAW,GAAGvD,gCAAgC;IACvD;EACJ;EACAgE,oBAAoBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACP,eAAe,GAAG,IAAI,CAAC/C,UAAU,GAAG,IAAI,CAACpK,cAAc,EAAE;MAC9D,IAAIiO,SAAS,GAAG,IAAI,CAAChB,WAAW,IAC3B,IAAI,CAACE,eAAe,GACjB,IAAI,CAAC/C,UAAU,GACfR,mCAAmC,GACnC,IAAI,CAAC5J,cAAc,CAAC;MAC5B,IAAIkO,gBAAgB,GAAGD,SAAS,GAAG,IAAI,CAAChB,WAAW;MACnD,IAAI,CAACA,WAAW,GAAGgB,SAAS;MAC5B,IAAI,CAACtgB,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,GAAGugB,gBAAgB;IACpE;EACJ;EACAV,kBAAkBA,CAAA,EAAG;IACjB,IAAI,IAAI,CAACW,oBAAoB,EAAE;MAC3B,IAAI,CAAClX,MAAM,CAACT,IAAI,CAAC,mEAAmE,CAAC;IACzF,CAAC,MACI,IAAI,IAAI,CAACwN,iBAAiB,GAAG,IAAI,CAACoG,UAAU,GAAG,IAAI,CAACE,SAAS,GAC9D,CAAC,EAAE;MACH,IAAI,CAAC6D,oBAAoB,GAAG,IAAI;MAChC,IAAI,CAACrB,aAAa,CAAC,CAAC;IACxB;EACJ;EACAa,oBAAoBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACzJ,kBAAkB,GACvB,IAAI,CAAC2H,WAAW,GAChB,IAAI,CAAC1B,SAAS,GACd,IAAI,CAACG,SAAS,GACdtQ,QAAQ,CAACH,IAAI,CAACyR,WAAW,EAAE;MAC3B,IAAI,CAACuB,cAAc,CAAC,CAAC;IACzB;EACJ;EACAe,qBAAqBA,CAAA,EAAG;IACpB,IAAI,IAAI,CAAC5J,iBAAiB,GACtB,IAAI,CAACoG,UAAU,GACf,IAAI,CAACE,SAAS,GACd,IAAI,CAACwB,YAAY,GACjB,IAAI,CAAC9L,cAAc,EAAE;MACrB,IAAI,CAAC+M,YAAY,CAAC,CAAC;IACvB;EACJ;EACAc,mBAAmBA,CAAA,EAAG;IAClB,IAAI,IAAI,CAAC3J,kBAAkB,GAAG,IAAI,CAACiG,SAAS,GAAG,IAAI,CAACG,SAAS,GAAG,CAAC,EAAE;MAC/D,IAAI,CAACsC,WAAW,CAAC,CAAC;IACtB;EACJ;EACAjC,uBAAuBA,CAAA,EAAG;IACtB,OAAO,IAAI,CAACT,oBAAoB,CAACxD,WAAW,CAAC/I,SAAS,CAAC,MAAM;MACzD,IAAI,CAAC+N,UAAU,CAAC,CAAC;IACrB,CAAC,CAAC;EACN;EACAA,UAAUA,CAAA,EAAG;IACT,IAAI,CAACP,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACK,QAAQ,CAAC,CAAC;EACnB;EACAH,0BAA0BA,CAAC3K,KAAK,EAAEE,MAAM,EAAEwN,WAAW,EAAE;IACnD,IAAIC,UAAU,GAAG,CAAC3N,KAAK,GAAGE,MAAM,KAAK,CAAC,GAAGwN,WAAW,CAAC;IACrD,IAAIE,SAAS,GAAGD,UAAU,GAAGD,WAAW;IACxC,OAAO;MACH1N,KAAK,EAAE4N,SAAS;MAChB1N,MAAM,EAAEyN;IACZ,CAAC;EACL;EACA9C,gBAAgBA,CAAC7K,KAAK,EAAEE,MAAM,EAAE;IAC5B,IAAI2N,IAAI,GAAG7N,KAAK,GAAGE,MAAM;IACzB,IAAI4N,QAAQ,GAAG9N,KAAK;IACpB,IAAI+N,SAAS,GAAG7N,MAAM;IACtB,IAAIF,KAAK,GAAG4I,cAAc,EAAE;MACxBkF,QAAQ,GAAGlF,cAAc;MACzBmF,SAAS,GAAGF,IAAI,GAAGC,QAAQ;IAC/B,CAAC,MACI,IAAI9N,KAAK,GAAG2I,cAAc,EAAE;MAC7BmF,QAAQ,GAAGnF,cAAc;MACzBoF,SAAS,GAAGpF,cAAc,GAAGI,YAAY;IAC7C;IACA,OAAO;MACH/I,KAAK,EAAE8N,QAAQ;MACf5N,MAAM,EAAE6N;IACZ,CAAC;EACL;EACAtD,oBAAoBA,CAAA,EAAG;IACnB,IAAI,CAAChB,SAAS,GAAG,IAAI,CAACe,aAAa,CAAC/N,aAAa,CAACmO,WAAW;IAC7D,IAAI,CAAClB,UAAU,GAAG,IAAI,CAACc,aAAa,CAAC/N,aAAa,CAACoE,YAAY;EACnE;EACA1D,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC9B,aAAa,CAACpE,OAAO,CAAC+W,YAAY,IAAI;MACvCA,YAAY,CAAC3Q,WAAW,CAAC,CAAC;IAC9B,CAAC,CAAC;EACN;AACJ;AACAgM,oBAAoB,CAACxU,IAAI,YAAAoZ,6BAAAlZ,CAAA;EAAA,YAAAA,CAAA,IAAwFsU,oBAAoB,EA1pC7Bze,EAAE,CAAA2S,iBAAA,CA0pC6C3S,EAAE,CAACsjB,QAAQ,GA1pC1DtjB,EAAE,CAAA2S,iBAAA,CA0pCqElH,4BAA4B,GA1pCnGzL,EAAE,CAAA2S,iBAAA,CA0pC8GuI,oBAAoB,GA1pCpIlb,EAAE,CAAA2S,iBAAA,CA0pC+Ia,eAAe,GA1pChKxT,EAAE,CAAA2S,iBAAA,CA0pC2K3S,EAAE,CAACujB,SAAS,GA1pCzLvjB,EAAE,CAAA2S,iBAAA,CA0pCoM/H,aAAa,GA1pCnN5K,EAAE,CAAA2S,iBAAA,CA0pC8NhL,qBAAqB,GA1pCrP3H,EAAE,CAAA2S,iBAAA,CA0pCgQzD,gBAAgB;AAAA,CAA4C;AACtauP,oBAAoB,CAACzC,IAAI,kBA3pC+Ehc,EAAE,CAAAic,iBAAA;EAAAvR,IAAA,EA2pCL+T,oBAAoB;EAAAzL,SAAA;EAAAwQ,SAAA,WAAAC,2BAAA1hB,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MA3pCjB/B,EAAE,CAAA0jB,WAAA,CAAA9hB,GAAA;MAAF5B,EAAE,CAAA0jB,WAAA,CAAA7hB,GAAA;IAAA;IAAA,IAAAE,EAAA;MAAA,IAAA4hB,EAAA;MAAF3jB,EAAE,CAAA4jB,cAAA,CAAAD,EAAA,GAAF3jB,EAAE,CAAA6jB,WAAA,QAAA7hB,GAAA,CAAAse,UAAA,GAAAqD,EAAA,CAAAG,KAAA;MAAF9jB,EAAE,CAAA4jB,cAAA,CAAAD,EAAA,GAAF3jB,EAAE,CAAA6jB,WAAA,QAAA7hB,GAAA,CAAA4d,aAAA,GAAA+D,EAAA,CAAAG,KAAA;IAAA;EAAA;EAAAC,YAAA,WAAAC,kCAAAjiB,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MAAF/B,EAAE,CAAA0E,UAAA,mBAAAuf,8CAAAC,MAAA;QAAA,OA2pCLliB,GAAA,CAAA6e,QAAA,CAAAqD,MAAe,CAAC;MAAA,UA3pCblkB,EAAE,CAAAmkB,eAAA;IAAA;EAAA;EAAAlR,MAAA;IAAAxG,IAAA;EAAA;EAAAyP,KAAA;EAAAC,IAAA;EAAAQ,MAAA;EAAAvN,QAAA,WAAAgV,8BAAAriB,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MAAF/B,EAAE,CAAAoD,cAAA,eChJkC,CAAC;MDgJrCpD,EAAE,CAAA2D,UAAA,IAAA7B,6CAAA,0BC9I/C,CAAC;MD8I4C9B,EAAE,CAAAoD,cAAA,eC7InD,CAAC;MD6IgDpD,EAAE,CAAAoD,cAAA,yBC5InC,CAAC;MD4IgCpD,EAAE,CAAA0E,UAAA,mBAAA2f,gEAAA;QAAA,OC5I3CriB,GAAA,CAAAsE,KAAA,CAAM,CAAC;MAAA,EAAC;MD4IiCtG,EAAE,CAAAqD,YAAA,CC5IhB,CAAC;MD4IarD,EAAE,CAAAoD,cAAA,YC3IjE,CAAC;MD2I8DpD,EAAE,CAAAoD,cAAA,YC1InC,CAAC;MD0IgCpD,EAAE,CAAA4C,MAAA,EC1IhB,CAAC;MD0Ia5C,EAAE,CAAA6C,MAAA;MAAF7C,EAAE,CAAAqD,YAAA,CC1IV,CAAC;MD0IOrD,EAAE,CAAAqD,YAAA,CCzI7F,CAAC;MDyI0FrD,EAAE,CAAAoD,cAAA,aCxInE,CAAC;MDwIgEpD,EAAE,CAAA2D,UAAA,KAAAlB,6CAAA,yBCvIe,CAAC;MDuIlBzC,EAAE,CAAA2D,UAAA,KAAAhB,4CAAA,iCAAF3C,EAAE,CAAA4D,sBCpIjF,CAAC;MDoI8E5D,EAAE,CAAAqD,YAAA,CCnI7F,CAAC;MDmI0FrD,EAAE,CAAAoD,cAAA,cClIjE,CAAC;MDkI8DpD,EAAE,CAAA2D,UAAA,KAAAD,oCAAA,iBC5HzF,CAAC;MD4HsF1D,EAAE,CAAAoD,cAAA,cC3HlD,CAAC;MD2H+CpD,EAAE,CAAA2D,UAAA,KAAAY,oCAAA,iBCrHrF,CAAC;MDqHkFvE,EAAE,CAAA2D,UAAA,KAAA2B,oCAAA,iBC/GrF,CAAC;MD+GkFtF,EAAE,CAAA2D,UAAA,KAAAuC,4CAAA,iCAAFlG,EAAE,CAAA4D,sBCvG7E,CAAC;MDuG0E5D,EAAE,CAAAqD,YAAA,CCtGzF,CAAC;MDsGsFrD,EAAE,CAAAqD,YAAA,CCrG7F,CAAC;MDqG0FrD,EAAE,CAAAqD,YAAA,CCpGjG,CAAC;MDoG8FrD,EAAE,CAAAqD,YAAA,CCnGrG,CAAC;IAAA;IAAA,IAAAtB,EAAA;MAAA,MAAAuiB,GAAA,GDmGkGtkB,EAAE,CAAA8D,WAAA;MAAA,MAAAygB,GAAA,GAAFvkB,EAAE,CAAA8D,WAAA;MAAF9D,EAAE,CAAAoC,WAAA,QAAAJ,GAAA,CAAA2f,WAAA,MChJE,CAAC,SAAA3f,GAAA,CAAA8f,YAAA,MAAD,CAAC;MDgJL9hB,EAAE,CAAAuC,UAAA,yBAAAP,GAAA,CAAAyK,IAAA,CAAAK,IChJ3B,CAAC;MDgJwB9M,EAAE,CAAAuD,SAAA,EC/IxE,CAAC;MD+IqEvD,EAAE,CAAAuC,UAAA,SAAAP,GAAA,CAAA+c,SC/IxE,CAAC;MD+IqE/e,EAAE,CAAAuD,SAAA,EC1IpC,CAAC;MD0IiCvD,EAAE,CAAAoC,WAAA,UAAAJ,GAAA,CAAAqC,UC1IpC,CAAC;MD0IiCrE,EAAE,CAAAuD,SAAA,EC1IhB,CAAC;MD0IavD,EAAE,CAAAwD,iBAAA,CAAFxD,EAAE,CAAAgD,WAAA,QAAAhB,GAAA,CAAA4E,KAAA,CC1IhB,CAAC;MD0Ia5G,EAAE,CAAAuD,SAAA,ECvId,CAAC;MDuIWvD,EAAE,CAAAuC,UAAA,qBAAAP,GAAA,CAAA4e,aAAA,GAAA5e,GAAA,CAAA4e,aAAA,GAAA0D,GCvId,CAAC,4BAAAtiB,GAAA,CAAAA,GAAD,CAAC;MDuIWhC,EAAE,CAAAuD,SAAA,ECjInE,CAAC;MDiIgEvD,EAAE,CAAAuC,UAAA,SAAAP,GAAA,CAAAiH,gBCjInE,CAAC;MDiIgEjJ,EAAE,CAAAuD,SAAA,EC1HgB,CAAC;MD0HnBvD,EAAE,CAAAuC,UAAA,SAAAP,GAAA,CAAAkH,mBAAA,KAAAlH,GAAA,CAAAqf,WAAA,EC1HgB,CAAC;MD0HnBrhB,EAAE,CAAAuD,SAAA,ECpHN,CAAC;MDoHGvD,EAAE,CAAAuC,UAAA,UAAAP,GAAA,CAAAkf,UAAA,ECpHN,CAAC,aAAAqD,GAAD,CAAC;IAAA;EAAA;EAAA1G,UAAA,GD+wCswJhd,GAAG,CAAC2jB,IAAI,EAAlM/H,2BAA2B,EAAiP5b,GAAG,CAAC4jB,gBAAgB,EAAlX3I,qBAAqB,EAAkIgB,sBAAsB;EAAA4H,KAAA,GAAqT7jB,GAAG,CAAC8jB,SAAS;EAAArI,MAAA;EAAAC,aAAA;AAAA,EAA+C;AAC7nK;EAAA,QAAA/R,SAAA,oBAAAA,SAAA,KA5pCwGxK,EAAE,CAAAyK,iBAAA,CA4pCfgU,oBAAoB,EAAc,CAAC;IAClH/T,IAAI,EAAElK,SAAS;IACfyO,IAAI,EAAE,CAAC;MAAEqE,QAAQ,EAAE,cAAc;MAAEiJ,aAAa,EAAE9b,iBAAiB,CAAC+b,IAAI;MAAEpN,QAAQ,EAAE,ikGAAikG;MAAEkN,MAAM,EAAE,CAAC,ghCAAghC;IAAE,CAAC;EACvrI,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAE5R,IAAI,EAAE1K,EAAE,CAACsjB;IAAS,CAAC,EAAE;MAAE5Y,IAAI,EAAEe;IAA6B,CAAC,EAAE;MAAEf,IAAI,EAAEwQ;IAAqB,CAAC,EAAE;MAAExQ,IAAI,EAAE8I;IAAgB,CAAC,EAAE;MAAE9I,IAAI,EAAE1K,EAAE,CAACujB;IAAU,CAAC,EAAE;MAAE7Y,IAAI,EAAEE;IAAc,CAAC,EAAE;MAAEF,IAAI,EAAE/C;IAAsB,CAAC,EAAE;MAAE+C,IAAI,EAAEwE;IAAiB,CAAC,CAAC;EAAE,CAAC,EAAkB;IAAEzC,IAAI,EAAE,CAAC;MACvS/B,IAAI,EAAEpK;IACV,CAAC,CAAC;IAAEggB,UAAU,EAAE,CAAC;MACb5V,IAAI,EAAEhK,SAAS;MACfuO,IAAI,EAAE,CAAC,YAAY,EAAE;QAAE2V,MAAM,EAAE;MAAK,CAAC;IACzC,CAAC,CAAC;IAAEhF,aAAa,EAAE,CAAC;MAChBlV,IAAI,EAAEhK,SAAS;MACfuO,IAAI,EAAE,CAAC,eAAe,EAAE;QAAE2V,MAAM,EAAE;MAAK,CAAC;IAC5C,CAAC,CAAC;IAAE/D,QAAQ,EAAE,CAAC;MACXnW,IAAI,EAAE/J,YAAY;MAClBsO,IAAI,EAAE,CAAC,cAAc,EAAE,CAAC,QAAQ,CAAC;IACrC,CAAC;EAAE,CAAC;AAAA;AAEhB,MAAM4V,iBAAiB,CAAC;EACpBle,WAAWA,CAACme,wBAAwB,EAAEC,MAAM,EAAErG,QAAQ,EAAE;IACpD,IAAI,CAACoG,wBAAwB,GAAGA,wBAAwB;IACxD,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACrG,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACsG,MAAM,GAAG,CAAC,CAAC;EACpB;EACAvM,IAAIA,CAAChM,IAAI,EAAE;IACP;IACA,MAAMwY,GAAG,GAAG,IAAI,CAACH,wBAAwB,CACpCI,uBAAuB,CAACzG,oBAAoB,CAAC,CAC7C0G,MAAM,CAAC,IAAI,CAACzG,QAAQ,CAAC;IAC1B;IACA,IAAI,CAACqG,MAAM,CAACK,UAAU,CAACH,GAAG,CAACI,QAAQ,CAAC;IACpC;IACA,MAAMC,OAAO,GAAGL,GAAG,CAACI,QAAQ,CACvBE,SAAS,CAAC,CAAC,CAAC;IACjB;IACA7W,QAAQ,CAACH,IAAI,CAAC6K,WAAW,CAACkM,OAAO,CAAC;IAClC,MAAME,QAAQ,GAAGP,GAAG,CAACO,QAAQ;IAC7BA,QAAQ,CAAC/Y,IAAI,GAAGA,IAAI;IACpBwY,GAAG,CAACQ,iBAAiB,CAACC,aAAa,CAAC,CAAC;IACrCjZ,IAAI,CAACkZ,YAAY,GAAGH,QAAQ;IAC5B,IAAI,CAACR,MAAM,CAACvY,IAAI,CAACK,IAAI,CAAC,GAAGmY,GAAG;EAChC;EACAjL,MAAMA,CAACvN,IAAI,EAAE;IACT,IAAI,CAACsY,MAAM,CAACa,UAAU,CAAC,IAAI,CAACZ,MAAM,CAACvY,IAAI,CAACK,IAAI,CAAC,CAACuY,QAAQ,CAAC;IACvD,IAAI,CAACL,MAAM,CAACvY,IAAI,CAACK,IAAI,CAAC,CAAC+Y,OAAO,CAAC,CAAC;EACpC;AACJ;AACAhB,iBAAiB,CAAC5a,IAAI,YAAA6b,0BAAA3b,CAAA;EAAA,YAAAA,CAAA,IAAwF0a,iBAAiB,EA1sCvB7kB,EAAE,CAAAqL,QAAA,CA0sCuCrL,EAAE,CAAC+lB,wBAAwB,GA1sCpE/lB,EAAE,CAAAqL,QAAA,CA0sC+ErL,EAAE,CAACgmB,cAAc,GA1sClGhmB,EAAE,CAAAqL,QAAA,CA0sC6GrL,EAAE,CAACsjB,QAAQ;AAAA,CAA6C;AAC/QuB,iBAAiB,CAACza,KAAK,kBA3sCiFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EA2sCQua,iBAAiB;EAAAta,OAAA,EAAjBsa,iBAAiB,CAAA5a;AAAA,EAAG;AACtI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA5sCwGxK,EAAE,CAAAyK,iBAAA,CA4sCfoa,iBAAiB,EAAc,CAAC;IAC/Gna,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE1K,EAAE,CAAC+lB;IAAyB,CAAC,EAAE;MAAErb,IAAI,EAAE1K,EAAE,CAACgmB;IAAe,CAAC,EAAE;MAAEtb,IAAI,EAAE1K,EAAE,CAACsjB;IAAS,CAAC,CAAC;EAAE,CAAC;AAAA;AAE/I,MAAM2C,cAAc,GAAG,EAAE;AACzB,MAAMrE,oBAAoB,GAAG,EAAE;AAC/B,MAAM3C,UAAU,GAAG,EAAE;AACrB,MAAMG,kBAAkB,CAAC;EACrBzY,WAAWA,CAACuf,eAAe,EAAEC,aAAa,EAAExH,qBAAqB,EAAE1G,eAAe,EAAExE,UAAU,EAAE2S,iBAAiB,EAAElO,cAAc,EAAE5H,MAAM,EAAE3E,MAAM,EAAE;IAC/I,IAAI,CAACua,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACC,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACxH,qBAAqB,GAAGA,qBAAqB;IAClD,IAAI,CAAC1G,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACxE,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAAC2S,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAAClO,cAAc,GAAGA,cAAc;IACpC,IAAI,CAAC5H,MAAM,GAAGA,MAAM;IACpB,IAAI,CAAC3E,MAAM,GAAGA,MAAM;IACpB,IAAI,CAAC0a,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,iBAAiB,GAAG,CAAC;IAC1B,IAAI,CAACC,aAAa,GAAG,IAAIvlB,aAAa,CAAC,CAAC;IACxC,IAAI,CAACwlB,qBAAqB,CAAC,CAAC;IAC5B,IAAI,CAACC,uBAAuB,CAAC,CAAC;IAC9B,IAAI,CAACpH,uBAAuB,CAAC,CAAC;EAClC;EACAmH,qBAAqBA,CAAA,EAAG;IACpB,IAAI,CAACH,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAAC7S,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAAC8X,WAAW,GAAGT,cAAc;EAC3F;EACAQ,uBAAuBA,CAAA,EAAG;IACtB,IAAI,CAACN,aAAa,CAAC9K,0BAA0B,CAAC,CAAC;IAC/C,IAAI,CAAC8K,aAAa,CAAChL,WAAW,CAAC9I,SAAS,CAACkE,MAAM,IAAI;MAC/C,IAAI,CAAC8P,cAAc,GAAG9P,MAAM,CAAC+D,OAAO;MACpC,IAAI,CAACgM,iBAAiB,GAAG,IAAI,CAACD,cAAc,GAAG,IAAI,CAAC5S,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAAC8X,WAAW,GAAGT,cAAc;MAC7G,IAAI,IAAI,CAACU,WAAW,EAChB,IAAI,CAACT,eAAe,CAAC7L,MAAM,CAAC,IAAI,CAACsM,WAAW,EAAEpQ,MAAM,CAAC;IAC7D,CAAC,CAAC;EACN;EACA8I,uBAAuBA,CAAA,EAAG;IACtB,IAAI,CAAC8G,aAAa,CAAC/K,WAAW,CAAC/I,SAAS,CAAC,MAAM;MAC3C,IAAI,IAAI,CAACsU,WAAW,EAChB,IAAI,CAACT,eAAe,CAACjM,YAAY,CAAC,IAAI,CAAC0M,WAAW,CAAC;IAC3D,CAAC,CAAC;EACN;EACAzG,QAAQA,CAACzT,IAAI,EAAE;IACXA,IAAI,CAACqB,QAAQ,GAAGrB,IAAI,CAACqB,QAAQ,KAAKmC,WAAW,GAAG,IAAI,CAACiI,cAAc,CAACtP,sBAAsB,CAAC,CAAC,GAAG6D,IAAI,CAACqB,QAAQ;IAC5G,IAAI,CAACsY,iBAAiB,CAAC3N,IAAI,CAAChM,IAAI,CAAC;EACrC;EACAma,SAASA,CAAA,EAAG;IACR,IAAI,CAACL,aAAa,GAAG,IAAIvlB,aAAa,CAAC,CAAC;IACxC,IAAI,CAAC2d,qBAAqB,CAACvS,IAAI,CAAC,CAAC;IACjC,IAAI,CAAC6L,eAAe,CAACvE,iBAAiB,CAAC,CAAC;IACxC,IAAI,CAACmT,WAAW,CAACrb,cAAc,CAAC4B,IAAI,CAAC;IACrC,IAAI,CAAC+Y,aAAa,CAAC1K,0BAA0B,CAAC,CAAC;IAC/C,IAAI,CAACqL,uBAAuB,CAAC,CAAC;IAC9B,OAAO,IAAI,CAACP,aAAa,CAACjH,YAAY,CAAC,CAAC;EAC5C;EACAhZ,KAAKA,CAAA,EAAG;IACJ,IAAI,CAACygB,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACvT,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACgH,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAChD,IAAI,CAACuQ,aAAa,CAACvK,yBAAyB,CAAC,CAAC;IAC9C,IAAI,CAACsK,eAAe,CAAClM,MAAM,CAAC,CAAC;EACjC;EACAlV,IAAIA,CAAA,EAAG;IACH,IAAI,CAACiiB,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACJ,WAAW,CAACtV,UAAU,CAAC4L,IAAI,CAAC,CAAC;IAClC,IAAI,CAAC4J,WAAW,CAACrb,cAAc,CAACyb,IAAI,CAAC;EACzC;EACAvhB,IAAIA,CAAA,EAAG;IACH,IAAI,CAACqhB,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACJ,WAAW,CAACvV,WAAW,CAAC6L,IAAI,CAAC,CAAC;IACnC,IAAI,CAAC4J,WAAW,CAACrb,cAAc,CAAC4B,IAAI,CAAC;EACzC;EACA,MAAM8Z,kBAAkBA,CAAC/Z,MAAM,EAAE;IAC7B,IAAIO,SAAS,GAAG,IAAI,CAACiR,qBAAqB,CAACnR,YAAY,CAACL,MAAM,CAAC;IAC/D,IAAIO,SAAS,EAAE;MACX,OAAO,MAAM,IAAI,CAAC4C,MAAM,CAAC6W,QAAQ,CAAC,CAACzZ,SAAS,CAAC,CAAC;IAClD;EACJ;EACAoZ,uBAAuBA,CAAA,EAAG;IACtB,IAAI,CAACnI,qBAAqB,CAAC7S,mBAAmB,CAACuG,SAAS,CAAC+U,WAAW,IAAI;MACpE,IAAI,IAAI,CAACT,WAAW,IAAI,IAAI,CAACA,WAAW,CAAC7Z,IAAI,KAAKsa,WAAW,CAACta,IAAI,EAAE;QAChE,IAAI,CAAC6Z,WAAW,GAAGS,WAAW;MAClC;IACJ,CAAC,CAAC;EACN;EACA,MAAMP,WAAWA,CAACQ,UAAU,EAAE;IAC1B,MAAM,IAAI,CAACH,kBAAkB,CAACG,UAAU,CAAC;IACzC,MAAMC,OAAO,GAAG,IAAI,CAACpP,cAAc,CAACnP,cAAc,CAAC,CAAC;IACpD,IAAIue,OAAO,GAAG,GAAG,EACb,IAAI,CAACpB,eAAe,CAAClM,MAAM,CAAC,CAAC;IACjCmG,UAAU,CAAC,MAAM;MACb,IAAI;QACA,IAAI,CAACoH,QAAQ,CAACF,UAAU,CAAC;MAC7B,CAAC,CACD,OAAOlc,KAAK,EAAE;QACV,IAAIA,KAAK,YAAYhE,uBAAuB,EAAE;UAC1C,IAAI,CAAC0f,WAAW,CAACQ,UAAU,CAAC;QAChC,CAAC,MACI,IAAIlc,KAAK,YAAY/D,qBAAqB,EAAE;UAC7C,IAAI,CAACuE,MAAM,CAACR,KAAK,CAAC,oEAAoE,CAAC;UACvF,IAAI,CAAC7E,KAAK,CAAC,CAAC;QAChB,CAAC,MACI;UACD,MAAM,IAAIQ,KAAK,CAACqE,KAAK,CAAC;QAC1B;MACJ;IACJ,CAAC,EAAEmc,OAAO,CAAC;EACf;EACAC,QAAQA,CAACF,UAAU,EAAE;IACjB,IAAI,CAACV,WAAW,GAAG,IAAI,CAAChI,qBAAqB,CAACzR,GAAG,CAACma,UAAU,CAAC;IAC7D,IAAI,IAAI,CAACV,WAAW,IAAI,IAAI,EACxB,MAAM,IAAIxf,uBAAuB,CAAC,EAAE,CAAC;IACzC,IAAI,CAACqgB,iBAAiB,CAACH,UAAU,CAAC;IAClC;IACA,IAAI,CAACI,kCAAkC,CAAC,CAAC;IACzC,IAAI,CAACvB,eAAe,CAACzN,IAAI,CAAC,IAAI,CAACkO,WAAW,CAAC;IAC3C,IAAI,CAACzG,QAAQ,CAAC,IAAI,CAACyG,WAAW,CAAC;IAC/B,IAAI,CAACe,kCAAkC,CAAC,CAAC;EAC7C;EACAF,iBAAiBA,CAACH,UAAU,EAAE;IAC1B,IAAIM,QAAQ,GAAG;MACXC,MAAM,EAAE,IAAI,CAACjJ,qBAAqB,CAAC3Q,aAAa,CAAC,IAAI,CAAC2Y,WAAW,CAAC7Z,IAAI,CAAC;MACvEA,IAAI,EAAE,IAAI,CAAC6Z,WAAW,CAAC7Z,IAAI;MAC3ByE,KAAK,EAAE,IAAI,CAACoV,WAAW,CAACpV,KAAK;MAC7B8V;IACJ,CAAC;IACD,IAAI,CAACd,aAAa,CAAC7gB,IAAI,CAACiiB,QAAQ,CAAC;EACrC;EACAX,oBAAoBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACL,WAAW,EAChB,IAAI,CAACA,WAAW,CAACrV,QAAQ,CAAC2L,IAAI,CAAC,CAAC;IACpC,IAAI,CAACsJ,aAAa,CAACsB,QAAQ,CAAC,CAAC;EACjC;EACAd,iBAAiBA,CAAA,EAAG;IAChB,IAAI,IAAI,CAACJ,WAAW,EAChB,IAAI,CAACP,iBAAiB,CAACpM,MAAM,CAAC,IAAI,CAAC2M,WAAW,CAAC;EACvD;EACAe,kCAAkCA,CAAA,EAAG;IACjC,IAAI,CAACI,qCAAqC,CAAC,CAAC;IAC5C,IAAI,CAACC,kCAAkC,CAAC,CAAC;EAC7C;EACAD,qCAAqCA,CAAA,EAAG;IACpC,IAAIE,iBAAiB,GAAG,IAAI,CAACC,iCAAiC,CAAC,CAAC;IAChE,IAAID,iBAAiB,GAAG,IAAI,CAAC1B,iBAAiB,EAAE;MAC5C,IAAI,CAAC7S,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACsZ,QAAQ,CAAC,CAAC,EAAEF,iBAAiB,GAAG,IAAI,CAAC1B,iBAAiB,CAAC;IAC7F;EACJ;EACAyB,kCAAkCA,CAAA,EAAG;IACjC,IAAII,cAAc,GAAG,IAAI,CAACC,8BAA8B,CAAC,CAAC;IAC1D,IAAID,cAAc,GAAG,IAAI,CAAC9B,cAAc,EAAE;MACtC,IAAI,CAAC5S,UAAU,CAAC7E,eAAe,CAAC,CAAC,CAACsZ,QAAQ,CAAC,CAAC,EAAEC,cAAc,GAAG,IAAI,CAAC9B,cAAc,CAAC;IACvF;EACJ;EACA4B,iCAAiCA,CAAA,EAAG;IAChC,IAAIvP,iBAAiB,GAAG,IAAI,CAACT,eAAe,CAAC7D,qBAAqB,CAAC,IAAI,CAACuS,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAAC;IAChH,IAAI,IAAI,CAAC+U,WAAW,CAAC7Y,QAAQ,KAAK,KAAK,EAAE;MACrC,OAAO4K,iBAAiB,GAAG,IAAI,CAACiO,WAAW,CAAChB,YAAY,CAACnF,YAAY;IACzE,CAAC,MACI,IAAI,IAAI,CAACmG,WAAW,CAAC7Y,QAAQ,KAAK,QAAQ,EAAE;MAC7C,OAAQ4K,iBAAiB,GACrB,IAAI,CAACiO,WAAW,CAAChB,YAAY,CAACnF,YAAY,GAC1C,IAAI,CAACmG,WAAW,CAAChB,YAAY,CAAC7G,UAAU,GACxCG,UAAU,GACV2C,oBAAoB;IAC5B,CAAC,MACI,IAAI,IAAI,CAAC+E,WAAW,CAAC7Y,QAAQ,KAAK,OAAO,IAAI,IAAI,CAAC6Y,WAAW,CAAC7Y,QAAQ,KAAK,MAAM,EAAE;MACpF,OAAO8I,IAAI,CAACC,GAAG,CAAC6B,iBAAiB,GAAG,IAAI,CAACiO,WAAW,CAAChB,YAAY,CAACnF,YAAY,EAAE9H,iBAAiB,GAAG,IAAI,CAACiO,WAAW,CAAChB,YAAY,CAACnF,YAAY,GAAG,CAAC,GAAG,IAAI,CAACmG,WAAW,CAAChB,YAAY,CAAC7G,UAAU,GAAG,CAAC,CAAC;IACtM;EACJ;EACAsJ,8BAA8BA,CAAA,EAAG;IAC7B,IAAI1P,iBAAiB,GAAG,IAAI,CAACT,eAAe,CAAC7D,qBAAqB,CAAC,IAAI,CAACuS,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAAC;IAChH,IAAI,IAAI,CAAC+U,WAAW,CAAC7Y,QAAQ,KAAK,KAAK,EAAE;MACrC,OAAO4K,iBAAiB,IAAI,IAAI,CAACiO,WAAW,CAAChB,YAAY,CAAC7G,UAAU,GAAGG,UAAU,GAAG2C,oBAAoB,CAAC;IAC7G,CAAC,MACI,IAAI,IAAI,CAAC+E,WAAW,CAAC7Y,QAAQ,KAAK,QAAQ,EAAE;MAC7C,OAAO4K,iBAAiB;IAC5B,CAAC,MACI,IAAI,IAAI,CAACiO,WAAW,CAAC7Y,QAAQ,KAAK,OAAO,IAAI,IAAI,CAAC6Y,WAAW,CAAC7Y,QAAQ,KAAK,MAAM,EAAE;MACpF,OAAO8I,IAAI,CAACyR,GAAG,CAAC3P,iBAAiB,EAAEA,iBAAiB,GAAG,IAAI,CAACiO,WAAW,CAAChB,YAAY,CAACnF,YAAY,GAAG,CAAC,GAAG,IAAI,CAACmG,WAAW,CAAChB,YAAY,CAAC7G,UAAU,GAAG,CAAC,CAAC;IACzJ;EACJ;EACA2I,kCAAkCA,CAAA,EAAG;IACjC,IAAI,IAAI,CAAC1S,qBAAqB,CAAC,CAAC,KAAK,CAAC,EAAE;MACpC,IAAI,CAACkD,eAAe,CAACnC,cAAc,CAAC,IAAI,CAAC6Q,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAAC;IACrF;IACA,IAAI,IAAI,CAACmD,qBAAqB,CAAC,CAAC,KAAK,CAAC,EAAE;MACpC,IAAI,CAACkD,eAAe,CAAClC,iBAAiB,CAAC,IAAI,CAAC4Q,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAAC;IACxF;IACA,IAAI,IAAI,CAACmD,qBAAqB,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAACkD,eAAe,CAACpD,kBAAkB,CAAC,IAAI,CAAC8R,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAAC,EAAE;MAC7H,IAAI,CAACqG,eAAe,CAACvC,cAAc,CAAC,IAAI,CAACiR,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,EAAE,IAAI,CAAC+U,WAAW,CAAC5U,wBAAwB,CAAC;IAChI;IACA,IAAI,IAAI,CAACgD,qBAAqB,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAACkD,eAAe,CAACpD,kBAAkB,CAAC,IAAI,CAAC8R,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAAC,EAAE;MAC7H,IAAI,CAAC+U,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,CAACC,aAAa,CAAC6D,cAAc,CAAC,CAAC;IAC/E;EACJ;EACAX,qBAAqBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAACkD,eAAe,CAAClD,qBAAqB,CAAC,IAAI,CAAC4R,WAAW,CAAC3V,mBAAmB,CAACY,OAAO,EAAE,IAAI,CAAC+U,WAAW,CAAC5U,wBAAwB,EAAE,UAAU,CAAC;EAC1J;AACJ;AACAqN,kBAAkB,CAACnV,IAAI,YAAAqe,2BAAAne,CAAA;EAAA,YAAAA,CAAA,IAAwFiV,kBAAkB,EAr5CzBpf,EAAE,CAAAqL,QAAA,CAq5CyC2M,sBAAsB,GAr5CjEhY,EAAE,CAAAqL,QAAA,CAq5C4E6P,oBAAoB,GAr5ClGlb,EAAE,CAAAqL,QAAA,CAq5C6GI,4BAA4B,GAr5C3IzL,EAAE,CAAAqL,QAAA,CAq5CsJmI,eAAe,GAr5CvKxT,EAAE,CAAAqL,QAAA,CAq5CkL+C,aAAa,GAr5CjMpO,EAAE,CAAAqL,QAAA,CAq5C4MwZ,iBAAiB,GAr5C/N7kB,EAAE,CAAAqL,QAAA,CAq5C0O1D,qBAAqB,GAr5CjQ3H,EAAE,CAAAqL,QAAA,CAq5C4QjK,EAAE,CAACyR,MAAM,GAr5CvR7S,EAAE,CAAAqL,QAAA,CAq5CkST,aAAa;AAAA,CAA6C;AACtcwU,kBAAkB,CAAChV,KAAK,kBAt5CgFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAs5CS8U,kBAAkB;EAAA7U,OAAA,EAAlB6U,kBAAkB,CAAAnV;AAAA,EAAG;AACxI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KAv5CwGxK,EAAE,CAAAyK,iBAAA,CAu5Cf2U,kBAAkB,EAAc,CAAC;IAChH1U,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAEsN;IAAuB,CAAC,EAAE;MAAEtN,IAAI,EAAEwQ;IAAqB,CAAC,EAAE;MAAExQ,IAAI,EAAEe;IAA6B,CAAC,EAAE;MAAEf,IAAI,EAAE8I;IAAgB,CAAC,EAAE;MAAE9I,IAAI,EAAE0D;IAAc,CAAC,EAAE;MAAE1D,IAAI,EAAEma;IAAkB,CAAC,EAAE;MAAEna,IAAI,EAAE/C;IAAsB,CAAC,EAAE;MAAE+C,IAAI,EAAEtJ,EAAE,CAACyR;IAAO,CAAC,EAAE;MAAEnI,IAAI,EAAEE;IAAc,CAAC,CAAC;EAAE,CAAC;AAAA;AAE9T,MAAM2d,cAAc,CAAC;EACjB5hB,WAAWA,CAAC0H,UAAU,EAAEma,WAAW,EAAEtQ,cAAc,EAAE;IACjD,IAAI,CAAC7J,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACma,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACtQ,cAAc,GAAGA,cAAc;IACpC,IAAI,CAACuQ,cAAc,GAAG,KAAK;EAC/B;EACA7B,SAASA,CAAC1e,OAAO,EAAE;IACf,IAAI,CAACpH,iBAAiB,CAAC,IAAI,CAACuN,UAAU,CAAC,EAAE;MACrC,OAAOpN,EAAE,CAAC,IAAIsS,eAAe,CAAC,CAAC,CAAC;IACpC;IACA,IAAI,CAAC,IAAI,CAACkV,cAAc,EAAE;MACtB,IAAI,CAACA,cAAc,GAAG,IAAI;MAC1B,IAAIvgB,OAAO,EAAE;QACT,IAAI,CAACgQ,cAAc,CAACjQ,UAAU,CAACC,OAAO,CAAC;MAC3C;MACA,IAAI,CAACwgB,KAAK,GAAG,IAAI,CAACF,WAAW,CAAC5B,SAAS,CAAC,CAAC,CAAC+B,IAAI,CAACrnB,QAAQ,CAAC,MAAO,IAAI,CAACmnB,cAAc,GAAG,KAAM,CAAC,CAAC;MAC7F,IAAI,CAACC,KAAK,CAACrW,SAAS,CAAC,CAAC;IAC1B;IACA,OAAO,IAAI,CAACqW,KAAK;EACrB;EACAE,SAASA,CAAA,EAAG;IACR,IAAI,IAAI,CAACC,gBAAgB,CAAC,CAAC,EACvB,IAAI,CAACL,WAAW,CAACliB,KAAK,CAAC,CAAC;EAChC;EACAuiB,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAI,CAACJ,cAAc;EAC9B;AACJ;AACAF,cAAc,CAACte,IAAI,YAAA6e,uBAAA3e,CAAA;EAAA,YAAAA,CAAA,IAAwFoe,cAAc,EAx7CjBvoB,EAAE,CAAAqL,QAAA,CAw7CiCnL,WAAW,GAx7C9CF,EAAE,CAAAqL,QAAA,CAw7CyD+T,kBAAkB,GAx7C7Epf,EAAE,CAAAqL,QAAA,CAw7CwF1D,qBAAqB;AAAA,CAA6C;AACpQ4gB,cAAc,CAACne,KAAK,kBAz7CoFpK,EAAE,CAAAqK,kBAAA;EAAAC,KAAA,EAy7CKie,cAAc;EAAAhe,OAAA,EAAdge,cAAc,CAAAte;AAAA,EAAG;AAChI;EAAA,QAAAO,SAAA,oBAAAA,SAAA,KA17CwGxK,EAAE,CAAAyK,iBAAA,CA07Cf8d,cAAc,EAAc,CAAC;IAC5G7d,IAAI,EAAEzK;EACV,CAAC,CAAC,EAAkB,YAAY;IAAE,OAAO,CAAC;MAAEyK,IAAI,EAAE1D,MAAM;MAAEgI,UAAU,EAAE,CAAC;QAC3DtE,IAAI,EAAEvK,MAAM;QACZ8O,IAAI,EAAE,CAAC/O,WAAW;MACtB,CAAC;IAAE,CAAC,EAAE;MAAEwK,IAAI,EAAE0U;IAAmB,CAAC,EAAE;MAAE1U,IAAI,EAAE/C;IAAsB,CAAC,CAAC;EAAE,CAAC;AAAA;AAEvF,MAAMohB,oBAAoB,GAAG1nB,YAAY,CAAC2nB,QAAQ,CAAC,EAAE,CAAC;AACtD,MAAMC,aAAa,CAAC;EAChB,OAAOC,OAAOA,CAAA,EAAG;IACb,OAAO;MACHC,QAAQ,EAAEF,aAAa;MACvBG,SAAS,EAAE,CACPb,cAAc,EACdnJ,kBAAkB,EAClB3T,4BAA4B,EAC5BuM,sBAAsB,EACtBkD,oBAAoB,EACpB1H,eAAe,EACf7L,qBAAqB,EACrBkd,iBAAiB,EACjBzW,aAAa,EACbxD,aAAa,EACbsE,gBAAgB;IAExB,CAAC;EACL;EACA,OAAO8Z,QAAQA,CAAA,EAAG;IACd,OAAO;MACHG,QAAQ,EAAEF,aAAa;MACvBG,SAAS,EAAE;IACf,CAAC;EACL;AACJ;AACAH,aAAa,CAAChf,IAAI,YAAAof,sBAAAlf,CAAA;EAAA,YAAAA,CAAA,IAAwF8e,aAAa;AAAA,CAAkD;AACzKA,aAAa,CAACK,IAAI,kBA79CsFtpB,EAAE,CAAAupB,gBAAA;EAAA7e,IAAA,EA69CCue;AAAa,EAIV;AAC9GA,aAAa,CAACO,IAAI,kBAl+CsFxpB,EAAE,CAAAypB,gBAAA;EAAAC,OAAA,GAk+C0B,CAAC3oB,YAAY,EAAEgoB,oBAAoB,CAAC;AAAA,EAAI;AAC5K;EAAA,QAAAve,SAAA,oBAAAA,SAAA,KAn+CwGxK,EAAE,CAAAyK,iBAAA,CAm+Cfwe,aAAa,EAAc,CAAC;IAC3Gve,IAAI,EAAE9J,QAAQ;IACdqO,IAAI,EAAE,CAAC;MACCya,OAAO,EAAE,CAAC3oB,YAAY,EAAEgoB,oBAAoB,CAAC;MAC7CY,YAAY,EAAE,CACVzZ,gBAAgB,EAChBuO,oBAAoB,EACpB3C,qBAAqB,EACrBgB,sBAAsB,EACtBL,2BAA2B,CAC9B;MACDmN,OAAO,EAAE,CAAC1Z,gBAAgB;IAC9B,CAAC;EACT,CAAC,CAAC;AAAA;;AAEV;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS+O,UAAU,EAAEZ,iCAAiC,EAAED,gCAAgC,EAAE3W,aAAa,EAAEJ,mBAAmB,EAAEE,6BAA6B,EAAEqa,oBAAoB,EAAEpO,eAAe,EAAEpF,aAAa,EAAE8M,oBAAoB,EAAEY,qBAAqB,EAAE9D,sBAAsB,EAAE8E,sBAAsB,EAAEL,2BAA2B,EAAEvM,gBAAgB,EAAE+Y,aAAa,EAAEthB,qBAAqB,EAAE4gB,cAAc,EAAE9J,oBAAoB,EAAEW,kBAAkB,EAAE3T,4BAA4B,EAAE+S,QAAQ,EAAE5T,aAAa,EAAEqF,WAAW,EAAEzI,qBAAqB,EAAEF,qBAAqB,EAAE2T,MAAM,EAAEzP,cAAc,EAAEqZ,iBAAiB,EAAE3V,gBAAgB,EAAE6Z,oBAAoB;AACloB","ignoreList":[]},"metadata":{},"sourceType":"module"}